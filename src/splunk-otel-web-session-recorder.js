!function(){"use strict";var e={25:function(e,t,r){var n=r(9207),o=r(6781),i=r(7676);e.exports=function(e,t,r){var s,a;o(e);try{if(!(s=i(e,"return"))){if("throw"===t)throw r;return r}s=n(s,e)}catch(e){a=!0,s=e}if("throw"===t)throw r;if(a)throw s;return o(s),r}},46:function(e,t,r){var n=r(7132),o=r(8049),i=r(8328);n({target:"Set",proto:!0,real:!0,forced:!r(8370)("intersection",function(e){return 2===e.size&&e.has(1)&&e.has(2)})||o(function(){return"3,2"!==String(Array.from(new Set([1,2,3]).intersection(new Set([3,2]))))})},{intersection:i})},85:function(e,t,r){var n=r(8038),o=r(6275),i=r(7570);e.exports=n?function(e,t,r){return o.f(e,t,i(1,r))}:function(e,t,r){return e[t]=r,e}},135:function(e,t,r){var n=r(8985),o=r(3939),i=r(887),s=r(4326),a=Object;e.exports=s?function(e){return"symbol"==typeof e}:function(e){var t=n("Symbol");return o(t)&&i(t.prototype,a(e))}},143:function(e,t,r){var n=r(8038),o=r(6480),i=r(6275),s=r(6781),a=r(7159),c=r(3682);t.f=n&&!o?Object.defineProperties:function(e,t){s(e);for(var r,n=a(t),o=c(t),u=o.length,l=0;u>l;)i.f(e,r=o[l++],n[r]);return e}},160:function(e,t,r){var n=r(7132),o=r(1662),i=r(8049);n({target:"Set",proto:!0,real:!0,forced:!r(8370)("difference",function(e){return 0===e.size})||i(function(){var e={size:1,has:function(){return!0},keys:function(){var e=0;return{next:function(){var r=e++>1;return t.has(1)&&t.clear(),{done:r,value:2}}}}},t=new Set([1,2,3,4]);return 3!==t.difference(e).size})},{difference:o})},164:function(e,t,r){var n=r(9207),o=r(3939),i=r(8928),s=TypeError;e.exports=function(e,t){var r,a;if("string"===t&&o(r=e.toString)&&!i(a=n(r,e)))return a;if(o(r=e.valueOf)&&!i(a=n(r,e)))return a;if("string"!==t&&o(r=e.toString)&&!i(a=n(r,e)))return a;throw new s("Can't convert object to primitive value")}},185:function(e,t,r){var n=r(7132),o=r(9207),i=r(2192),s=r(7853),a=r(6553),c=r(5146);n({target:"Promise",stat:!0,forced:r(2807)},{race:function(e){var t=this,r=s.f(t),n=r.reject,u=a(function(){var s=i(t.resolve);c(e,function(e){o(s,t,e).then(r.resolve,n)})});return u.error&&n(u.value),r.promise}})},215:function(e,t,r){var n=r(7132),o=r(8723);n({target:"Set",proto:!0,real:!0,forced:!r(8370)("isDisjointFrom",function(e){return!e})},{isDisjointFrom:o})},233:function(e,t,r){var n=r(8049);e.exports=!n(function(){function e(){}return e.prototype.constructor=null,Object.getPrototypeOf(new e)!==e.prototype})},234:function(e,t,r){var n=r(1497)("iterator"),o=!1;try{var i=0,s={next:function(){return{done:!!i++}},return:function(){o=!0}};s[n]=function(){return this},Array.from(s,function(){throw 2})}catch(e){}e.exports=function(e,t){try{if(!t&&!o)return!1}catch(e){return!1}var r=!1;try{var i={};i[n]=function(){return{next:function(){return{done:r=!0}}}},e(i)}catch(e){}return r}},268:function(e,t,r){var n=r(7120),o=r(7176);e.exports=n(o.proto,"size","get")||function(e){return e.size}},298:function(e,t,r){var n=r(2610),o=r(2192),i=r(2218),s=n(n.bind);e.exports=function(e,t){return o(e),void 0===t?e:i?s(e,t):function(){return e.apply(t,arguments)}}},307:function(e,t,r){var n=r(7159),o=r(4792),i=r(1048),s=function(e){return function(t,r,s){var a=n(t),c=i(a);if(0===c)return!e&&-1;var u,l=o(s,c);if(e&&r!=r){for(;c>l;)if((u=a[l++])!=u)return!0}else for(;c>l;l++)if((e||l in a)&&a[l]===r)return e||l||0;return!e&&-1}};e.exports={includes:s(!0),indexOf:s(!1)}},433:function(e,t,r){var n=r(7266),o=r(8049),i=r(3939),s=r(6883),a=r(8038),c=r(1512).CONFIGURABLE,u=r(3996),l=r(8235),d=l.enforce,f=l.get,h=String,p=Object.defineProperty,v=n("".slice),y=n("".replace),g=n([].join),m=a&&!o(function(){return 8!==p(function(){},"length",{value:8}).length}),b=String(String).split("String"),w=e.exports=function(e,t,r){"Symbol("===v(h(t),0,7)&&(t="["+y(h(t),/^Symbol\(([^)]*)\).*$/,"$1")+"]"),r&&r.getter&&(t="get "+t),r&&r.setter&&(t="set "+t),(!s(e,"name")||c&&e.name!==t)&&(a?p(e,"name",{value:t,configurable:!0}):e.name=t),m&&r&&s(r,"arity")&&e.length!==r.arity&&p(e,"length",{value:r.arity});try{r&&s(r,"constructor")&&r.constructor?a&&p(e,"prototype",{writable:!1}):e.prototype&&(e.prototype=void 0)}catch(e){}var n=d(e);return s(n,"source")||(n.source=g(b,"string"==typeof t?t:"")),e};Function.prototype.toString=w(function(){return i(this)&&f(this).source||u(this)},"toString")},449:function(e,t,r){var n=r(7266),o=r(8049),i=r(2038),s=Object,a=n("".split);e.exports=o(function(){return!s("z").propertyIsEnumerable(0)})?function(e){return"String"===i(e)?a(e,""):s(e)}:s},466:function(e,t,r){var n=r(7132),o=r(4178),i=r(5699),s=r(6183),a="WebAssembly",c=o[a],u=7!==new Error("e",{cause:7}).cause,l=function(e,t){var r={};r[e]=s(e,t,u),n({global:!0,constructor:!0,arity:1,forced:u},r)},d=function(e,t){if(c&&c[e]){var r={};r[e]=s(a+"."+e,t,u),n({target:a,stat:!0,constructor:!0,arity:1,forced:u},r)}};l("Error",function(e){return function(t){return i(e,this,arguments)}}),l("EvalError",function(e){return function(t){return i(e,this,arguments)}}),l("RangeError",function(e){return function(t){return i(e,this,arguments)}}),l("ReferenceError",function(e){return function(t){return i(e,this,arguments)}}),l("SyntaxError",function(e){return function(t){return i(e,this,arguments)}}),l("TypeError",function(e){return function(t){return i(e,this,arguments)}}),l("URIError",function(e){return function(t){return i(e,this,arguments)}}),d("CompileError",function(e){return function(t){return i(e,this,arguments)}}),d("LinkError",function(e){return function(t){return i(e,this,arguments)}}),d("RuntimeError",function(e){return function(t){return i(e,this,arguments)}})},474:function(e,t,r){var n={};n[r(1497)("toStringTag")]="z",e.exports="[object z]"===String(n)},517:function(e,t,r){var n=r(6781);e.exports=function(){var e=n(this),t="";return e.hasIndices&&(t+="d"),e.global&&(t+="g"),e.ignoreCase&&(t+="i"),e.multiline&&(t+="m"),e.dotAll&&(t+="s"),e.unicode&&(t+="u"),e.unicodeSets&&(t+="v"),e.sticky&&(t+="y"),t}},555:function(e){var t=TypeError;e.exports=function(e){if(e>9007199254740991)throw t("Maximum allowed index exceeded");return e}},730:function(e,t,r){var n=r(7159),o=r(6031),i=r(9695),s=r(8235),a=r(6275).f,c=r(2838),u=r(2727),l=r(8381),d=r(8038),f="Array Iterator",h=s.set,p=s.getterFor(f);e.exports=c(Array,"Array",function(e,t){h(this,{type:f,target:n(e),index:0,kind:t})},function(){var e=p(this),t=e.target,r=e.index++;if(!t||r>=t.length)return e.target=null,u(void 0,!0);switch(e.kind){case"keys":return u(r,!1);case"values":return u(t[r],!1)}return u([r,t[r]],!1)},"values");var v=i.Arguments=i.Array;if(o("keys"),o("values"),o("entries"),!l&&d&&"values"!==v.name)try{a(v,"name",{value:"values"})}catch(e){}},737:function(e,t,r){var n=r(7132),o=r(9207),i=r(2192),s=r(7853),a=r(6553),c=r(5146);n({target:"Promise",stat:!0,forced:r(2807)},{all:function(e){var t=this,r=s.f(t),n=r.resolve,u=r.reject,l=a(function(){var r=i(t.resolve),s=[],a=0,l=1;c(e,function(e){var i=a++,c=!1;l++,o(r,t,e).then(function(e){c||(c=!0,s[i]=e,--l||n(s))},u)}),--l||n(s)});return l.error&&u(l.value),r.promise}})},831:function(e,t,r){var n=r(7266),o=r(7657),i=r(7176),s=i.Set,a=i.proto,c=n(a.forEach),u=n(a.keys),l=u(new s).next;e.exports=function(e,t,r){return r?o({iterator:u(e),next:l},t):c(e,t)}},887:function(e,t,r){var n=r(7266);e.exports=n({}.isPrototypeOf)},909:function(e,t,r){var n=r(887),o=TypeError;e.exports=function(e,t){if(n(t,e))return e;throw new o("Incorrect invocation")}},1048:function(e,t,r){var n=r(2076);e.exports=function(e){return n(e.length)}},1107:function(e,t,r){var n=r(3528),o=Object;e.exports=function(e){return o(n(e))}},1275:function(e,t,r){var n=r(6781),o=r(4206),i=r(8375),s=r(1497)("species");e.exports=function(e,t){var r,a=n(e).constructor;return void 0===a||i(r=n(a)[s])?t:o(r)}},1428:function(e,t,r){var n=r(6781),o=r(8928),i=r(7853);e.exports=function(e,t){if(n(e),o(t)&&t.constructor===e)return t;var r=i.f(e);return(0,r.resolve)(t),r.promise}},1487:function(e,t,r){var n=r(8381),o=r(4178),i=r(3719),s="__core-js_shared__",a=e.exports=o[s]||i(s,{});(a.versions||(a.versions=[])).push({version:"3.45.0",mode:n?"pure":"global",copyright:"Â© 2014-2025 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.45.0/LICENSE",source:"https://github.com/zloirock/core-js"})},1497:function(e,t,r){var n=r(4178),o=r(9807),i=r(6883),s=r(3938),a=r(6325),c=r(4326),u=n.Symbol,l=o("wks"),d=c?u.for||u:u&&u.withoutSetter||s;e.exports=function(e){return i(l,e)||(l[e]=a&&i(u,e)?u[e]:d("Symbol."+e)),l[e]}},1512:function(e,t,r){var n=r(8038),o=r(6883),i=Function.prototype,s=n&&Object.getOwnPropertyDescriptor,a=o(i,"name"),c=a&&"something"===function(){}.name,u=a&&(!n||n&&s(i,"name").configurable);e.exports={EXISTS:a,PROPER:c,CONFIGURABLE:u}},1662:function(e,t,r){var n=r(8990),o=r(7176),i=r(6208),s=r(268),a=r(3795),c=r(831),u=r(7657),l=o.has,d=o.remove;e.exports=function(e){var t=n(this),r=a(e),o=i(t);return s(t)<=r.size?c(t,function(e){r.includes(e)&&d(o,e)}):u(r.getIterator(),function(e){l(o,e)&&d(o,e)}),o}},1702:function(e,t,r){r(5392)},1706:function(e,t,r){var n=r(8928),o=r(85);e.exports=function(e,t){n(t)&&"cause"in t&&o(e,"cause",t.cause)}},1733:function(e){e.exports=function(e){try{var t=new Set,r={size:0,has:function(){return!0},keys:function(){return Object.defineProperty({},"next",{get:function(){return t.clear(),t.add(4),function(){return{done:!0}}}})}},n=t[e](r);return 1===n.size&&4===n.values().next().value}catch(e){return!1}}},1746:function(e,t,r){var n=r(3939),o=r(6275),i=r(433),s=r(3719);e.exports=function(e,t,r,a){a||(a={});var c=a.enumerable,u=void 0!==a.name?a.name:t;if(n(r)&&i(r,u,a),a.global)c?e[t]=r:s(t,r);else{try{a.unsafe?e[t]&&(c=!0):delete e[t]}catch(e){}c?e[t]=r:o.f(e,t,{value:r,enumerable:!1,configurable:!a.nonConfigurable,writable:!a.nonWritable})}return e}},1878:function(e,t,r){var n=r(298),o=r(9207),i=r(1107),s=r(7069),a=r(2491),c=r(3239),u=r(1048),l=r(2998),d=r(9215),f=r(8657),h=Array;e.exports=function(e){var t=i(e),r=c(this),p=arguments.length,v=p>1?arguments[1]:void 0,y=void 0!==v;y&&(v=n(v,p>2?arguments[2]:void 0));var g,m,b,w,S,O,E=f(t),P=0;if(!E||this===h&&a(E))for(g=u(t),m=r?new this(g):h(g);g>P;P++)O=y?v(t[P],P):t[P],l(m,P,O);else for(m=r?new this:[],S=(w=d(t,E)).next;!(b=o(S,w)).done;P++)O=y?s(w,v,[b.value,P],!0):b.value,l(m,P,O);return m.length=P,m}},1904:function(e,t,r){var n=r(7132),o=r(8985),i=r(5699),s=r(9207),a=r(7266),c=r(8049),u=r(3939),l=r(135),d=r(5098),f=r(4263),h=r(6325),p=String,v=o("JSON","stringify"),y=a(/./.exec),g=a("".charAt),m=a("".charCodeAt),b=a("".replace),w=a(1.1.toString),S=/[\uD800-\uDFFF]/g,O=/^[\uD800-\uDBFF]$/,E=/^[\uDC00-\uDFFF]$/,P=!h||c(function(){var e=o("Symbol")("stringify detection");return"[null]"!==v([e])||"{}"!==v({a:e})||"{}"!==v(Object(e))}),x=c(function(){return'"\\udf06\\ud834"'!==v("\udf06\ud834")||'"\\udead"'!==v("\udead")}),T=function(e,t){var r=d(arguments),n=f(t);if(u(n)||void 0!==e&&!l(e))return r[1]=function(e,t){if(u(n)&&(t=s(n,this,p(e),t)),!l(t))return t},i(v,null,r)},k=function(e,t,r){var n=g(r,t-1),o=g(r,t+1);return y(O,e)&&!y(E,o)||y(E,e)&&!y(O,n)?"\\u"+w(m(e,0),16):e};v&&n({target:"JSON",stat:!0,arity:3,forced:P||x},{stringify:function(e,t,r){var n=d(arguments),o=i(P?T:v,null,n);return x&&"string"==typeof o?b(o,S,k):o}})},1961:function(e,t,r){var n=r(7266),o=r(5477),i=r(5773),s=r(3528),a=n("".charAt),c=n("".charCodeAt),u=n("".slice),l=function(e){return function(t,r){var n,l,d=i(s(t)),f=o(r),h=d.length;return f<0||f>=h?e?"":void 0:(n=c(d,f))<55296||n>56319||f+1===h||(l=c(d,f+1))<56320||l>57343?e?a(d,f):n:e?u(d,f,f+2):l-56320+(n-55296<<10)+65536}};e.exports={codeAt:l(!1),charAt:l(!0)}},2013:function(e,t,r){var n=r(4178).navigator,o=n&&n.userAgent;e.exports=o?String(o):""},2038:function(e,t,r){var n=r(7266),o=n({}.toString),i=n("".slice);e.exports=function(e){return i(o(e),8,-1)}},2076:function(e,t,r){var n=r(5477),o=Math.min;e.exports=function(e){var t=n(e);return t>0?o(t,9007199254740991):0}},2097:function(e,t,r){var n=r(1746);e.exports=function(e,t,r){for(var o in t)n(e,o,t[o],r);return e}},2192:function(e,t,r){var n=r(3939),o=r(8081),i=TypeError;e.exports=function(e){if(n(e))return e;throw new i(o(e)+" is not a function")}},2218:function(e,t,r){var n=r(8049);e.exports=!n(function(){var e=function(){}.bind();return"function"!=typeof e||e.hasOwnProperty("prototype")})},2426:function(e,t,r){var n=r(7132),o=r(6932),i=r(1733);n({target:"Set",proto:!0,real:!0,forced:!r(8370)("symmetricDifference")||!i("symmetricDifference")},{symmetricDifference:o})},2491:function(e,t,r){var n=r(1497),o=r(9695),i=n("iterator"),s=Array.prototype;e.exports=function(e){return void 0!==e&&(o.Array===e||s[i]===e)}},2555:function(e,t,r){var n=r(9207),o=r(8928),i=r(135),s=r(7676),a=r(164),c=r(1497),u=TypeError,l=c("toPrimitive");e.exports=function(e,t){if(!o(e)||i(e))return e;var r,c=s(e,l);if(c){if(void 0===t&&(t="default"),r=n(c,e,t),!o(r)||i(r))return r;throw new u("Can't convert object to primitive value")}return void 0===t&&(t="number"),a(e,t)}},2562:function(e,t,r){var n,o=r(6781),i=r(143),s=r(4061),a=r(2651),c=r(3459),u=r(8145),l=r(3721),d="prototype",f="script",h=l("IE_PROTO"),p=function(){},v=function(e){return"<"+f+">"+e+"</"+f+">"},y=function(e){e.write(v("")),e.close();var t=e.parentWindow.Object;return e=null,t},g=function(){try{n=new ActiveXObject("htmlfile")}catch(e){}var e,t,r;g="undefined"!=typeof document?document.domain&&n?y(n):(t=u("iframe"),r="java"+f+":",t.style.display="none",c.appendChild(t),t.src=String(r),(e=t.contentWindow.document).open(),e.write(v("document.F=Object")),e.close(),e.F):y(n);for(var o=s.length;o--;)delete g[d][s[o]];return g()};a[h]=!0,e.exports=Object.create||function(e,t){var r;return null!==e?(p[d]=o(e),r=new p,p[d]=null,r[h]=e):r=g(),void 0===t?r:i.f(r,t)}},2610:function(e,t,r){var n=r(2038),o=r(7266);e.exports=function(e){if("Function"===n(e))return o(e)}},2651:function(e){e.exports={}},2715:function(e){var t=function(){this.head=null,this.tail=null};t.prototype={add:function(e){var t={item:e,next:null},r=this.tail;r?r.next=t:this.head=t,this.tail=t},get:function(){var e=this.head;if(e)return null===(this.head=e.next)&&(this.tail=null),e.item}},e.exports=t},2727:function(e){e.exports=function(e,t){return{value:e,done:t}}},2807:function(e,t,r){var n=r(8856),o=r(234),i=r(5510).CONSTRUCTOR;e.exports=i||!o(function(e){n.all(e).then(void 0,function(){})})},2838:function(e,t,r){var n=r(7132),o=r(9207),i=r(8381),s=r(1512),a=r(3939),c=r(8904),u=r(6773),l=r(7225),d=r(3101),f=r(85),h=r(1746),p=r(1497),v=r(9695),y=r(9315),g=s.PROPER,m=s.CONFIGURABLE,b=y.IteratorPrototype,w=y.BUGGY_SAFARI_ITERATORS,S=p("iterator"),O="keys",E="values",P="entries",x=function(){return this};e.exports=function(e,t,r,s,p,y,T){c(r,t,s);var k,I,C,R=function(e){if(e===p&&L)return L;if(!w&&e&&e in M)return M[e];switch(e){case O:case E:case P:return function(){return new r(this,e)}}return function(){return new r(this)}},A=t+" Iterator",j=!1,M=e.prototype,N=M[S]||M["@@iterator"]||p&&M[p],L=!w&&N||R(p),_="Array"===t&&M.entries||N;if(_&&(k=u(_.call(new e)))!==Object.prototype&&k.next&&(i||u(k)===b||(l?l(k,b):a(k[S])||h(k,S,x)),d(k,A,!0,!0),i&&(v[A]=x)),g&&p===E&&N&&N.name!==E&&(!i&&m?f(M,"name",E):(j=!0,L=function(){return o(N,this)})),p)if(I={values:R(E),keys:y?L:R(O),entries:R(P)},T)for(C in I)(w||j||!(C in M))&&h(M,C,I[C]);else n({target:t,proto:!0,forced:w||j},I);return i&&!T||M[S]===L||h(M,S,L,{name:p}),v[t]=L,I}},2889:function(e,t,r){var n,o,i=r(9207),s=r(7266),a=r(5773),c=r(517),u=r(4147),l=r(9807),d=r(2562),f=r(8235).get,h=r(3557),p=r(9368),v=l("native-string-replace",String.prototype.replace),y=RegExp.prototype.exec,g=y,m=s("".charAt),b=s("".indexOf),w=s("".replace),S=s("".slice),O=(o=/b*/g,i(y,n=/a/,"a"),i(y,o,"a"),0!==n.lastIndex||0!==o.lastIndex),E=u.BROKEN_CARET,P=void 0!==/()??/.exec("")[1];(O||P||E||h||p)&&(g=function(e){var t,r,n,o,s,u,l,h=this,p=f(h),x=a(e),T=p.raw;if(T)return T.lastIndex=h.lastIndex,t=i(g,T,x),h.lastIndex=T.lastIndex,t;var k=p.groups,I=E&&h.sticky,C=i(c,h),R=h.source,A=0,j=x;if(I&&(C=w(C,"y",""),-1===b(C,"g")&&(C+="g"),j=S(x,h.lastIndex),h.lastIndex>0&&(!h.multiline||h.multiline&&"\n"!==m(x,h.lastIndex-1))&&(R="(?: "+R+")",j=" "+j,A++),r=new RegExp("^(?:"+R+")",C)),P&&(r=new RegExp("^"+R+"$(?!\\s)",C)),O&&(n=h.lastIndex),o=i(y,I?r:h,j),I?o?(o.input=S(o.input,A),o[0]=S(o[0],A),o.index=h.lastIndex,h.lastIndex+=o[0].length):h.lastIndex=0:O&&o&&(h.lastIndex=h.global?o.index+o[0].length:n),P&&o&&o.length>1&&i(v,o[0],r,function(){for(s=1;s<arguments.length-2;s++)void 0===arguments[s]&&(o[s]=void 0)}),o&&k)for(o.groups=u=d(null),s=0;s<k.length;s++)u[(l=k[s])[0]]=o[l[1]];return o}),e.exports=g},2998:function(e,t,r){var n=r(8038),o=r(6275),i=r(7570);e.exports=function(e,t,r){n?o.f(e,t,i(0,r)):e[t]=r}},3101:function(e,t,r){var n=r(6275).f,o=r(6883),i=r(1497)("toStringTag");e.exports=function(e,t,r){e&&!r&&(e=e.prototype),e&&!o(e,i)&&n(e,i,{configurable:!0,value:t})}},3131:function(e,t,r){var n=r(7132),o=r(7266),i=r(4792),s=RangeError,a=String.fromCharCode,c=String.fromCodePoint,u=o([].join);n({target:"String",stat:!0,arity:1,forced:!!c&&1!==c.length},{fromCodePoint:function(e){for(var t,r=[],n=arguments.length,o=0;n>o;){if(t=+arguments[o++],i(t,1114111)!==t)throw new s(t+" is not a valid code point");r[o]=t<65536?a(t):a(55296+((t-=65536)>>10),t%1024+56320)}return u(r,"")}})},3239:function(e,t,r){var n=r(7266),o=r(8049),i=r(3939),s=r(4201),a=r(8985),c=r(3996),u=function(){},l=a("Reflect","construct"),d=/^\s*(?:class|function)\b/,f=n(d.exec),h=!d.test(u),p=function(e){if(!i(e))return!1;try{return l(u,[],e),!0}catch(e){return!1}},v=function(e){if(!i(e))return!1;switch(s(e)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}try{return h||!!f(d,c(e))}catch(e){return!0}};v.sham=!0,e.exports=!l||o(function(){var e;return p(p.call)||!p(Object)||!p(function(){e=!0})||e})?v:p},3379:function(e,t,r){var n=r(4178),o=r(8038),i=Object.getOwnPropertyDescriptor;e.exports=function(e){if(!o)return n[e];var t=i(n,e);return t&&t.value}},3459:function(e,t,r){var n=r(8985);e.exports=n("document","documentElement")},3462:function(e,t,r){var n=r(8145)("span").classList,o=n&&n.constructor&&n.constructor.prototype;e.exports=o===Object.prototype?void 0:o},3474:function(e,t,r){var n=r(5098),o=Math.floor,i=function(e,t){var r=e.length;if(r<8)for(var s,a,c=1;c<r;){for(a=c,s=e[c];a&&t(e[a-1],s)>0;)e[a]=e[--a];a!==c++&&(e[a]=s)}else for(var u=o(r/2),l=i(n(e,0,u),t),d=i(n(e,u),t),f=l.length,h=d.length,p=0,v=0;p<f||v<h;)e[p+v]=p<f&&v<h?t(l[p],d[v])<=0?l[p++]:d[v++]:p<f?l[p++]:d[v++];return e};e.exports=i},3528:function(e,t,r){var n=r(8375),o=TypeError;e.exports=function(e){if(n(e))throw new o("Can't call method on "+e);return e}},3557:function(e,t,r){var n=r(8049),o=r(4178).RegExp;e.exports=n(function(){var e=o(".","s");return!(e.dotAll&&e.test("\n")&&"s"===e.flags)})},3585:function(e,t,r){var n=r(7132),o=r(307).includes,i=r(8049),s=r(6031);n({target:"Array",proto:!0,forced:i(function(){return!Array(1).includes()})},{includes:function(e){return o(this,e,arguments.length>1?arguments[1]:void 0)}}),s("includes")},3682:function(e,t,r){var n=r(8814),o=r(4061);e.exports=Object.keys||function(e){return n(e,o)}},3700:function(e,t,r){var n=r(6727),o=String,i=TypeError;e.exports=function(e){if(n(e))return e;throw new i("Can't set "+o(e)+" as a prototype")}},3719:function(e,t,r){var n=r(4178),o=Object.defineProperty;e.exports=function(e,t){try{o(n,e,{value:t,configurable:!0,writable:!0})}catch(r){n[e]=t}return t}},3721:function(e,t,r){var n=r(9807),o=r(3938),i=n("keys");e.exports=function(e){return i[e]||(i[e]=o(e))}},3722:function(e,t,r){var n=r(1048),o=r(5477),i=RangeError;e.exports=function(e,t,r,s){var a=n(e),c=o(r),u=c<0?a+c:c;if(u>=a||u<0)throw new i("Incorrect index");for(var l=new t(a),d=0;d<a;d++)l[d]=d===u?s:e[d];return l}},3795:function(e,t,r){var n=r(2192),o=r(6781),i=r(9207),s=r(5477),a=r(7217),c="Invalid size",u=RangeError,l=TypeError,d=Math.max,f=function(e,t){this.set=e,this.size=d(t,0),this.has=n(e.has),this.keys=n(e.keys)};f.prototype={getIterator:function(){return a(o(i(this.keys,this.set)))},includes:function(e){return i(this.has,this.set,e)}},e.exports=function(e){o(e);var t=+e.size;if(t!=t)throw new l(c);var r=s(t);if(r<0)throw new u(c);return new f(e,r)}},3883:function(e,t,r){var n=r(8985),o=r(8224),i=r(1497),s=r(8038),a=i("species");e.exports=function(e){var t=n(e);s&&t&&!t[a]&&o(t,a,{configurable:!0,get:function(){return this}})}},3938:function(e,t,r){var n=r(7266),o=0,i=Math.random(),s=n(1.1.toString);e.exports=function(e){return"Symbol("+(void 0===e?"":e)+")_"+s(++o+i,36)}},3939:function(e){var t="object"==typeof document&&document.all;e.exports=void 0===t&&void 0!==t?function(e){return"function"==typeof e||e===t}:function(e){return"function"==typeof e}},3996:function(e,t,r){var n=r(7266),o=r(3939),i=r(1487),s=n(Function.toString);o(i.inspectSource)||(i.inspectSource=function(e){return s(e)}),e.exports=i.inspectSource},4061:function(e){e.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},4122:function(e){var t=TypeError;e.exports=function(e,r){if(e<r)throw new t("Not enough arguments");return e}},4147:function(e,t,r){var n=r(8049),o=r(4178).RegExp,i=n(function(){var e=o("a","y");return e.lastIndex=2,null!==e.exec("abcd")}),s=i||n(function(){return!o("a","y").sticky}),a=i||n(function(){var e=o("^r","gy");return e.lastIndex=2,null!==e.exec("str")});e.exports={BROKEN_CARET:a,MISSED_STICKY:s,UNSUPPORTED_Y:i}},4153:function(e,t,r){var n=r(8038),o=r(9207),i=r(8419),s=r(7570),a=r(7159),c=r(7391),u=r(6883),l=r(7903),d=Object.getOwnPropertyDescriptor;t.f=n?d:function(e,t){if(e=a(e),t=c(t),l)try{return d(e,t)}catch(e){}if(u(e,t))return s(!o(i.f,e,t),e[t])}},4178:function(e,t,r){var n=function(e){return e&&e.Math===Math&&e};e.exports=n("object"==typeof globalThis&&globalThis)||n("object"==typeof window&&window)||n("object"==typeof self&&self)||n("object"==typeof r.g&&r.g)||n("object"==typeof this&&this)||function(){return this}()||Function("return this")()},4201:function(e,t,r){var n=r(474),o=r(3939),i=r(2038),s=r(1497)("toStringTag"),a=Object,c="Arguments"===i(function(){return arguments}());e.exports=n?i:function(e){var t,r,n;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(r=function(e,t){try{return e[t]}catch(e){}}(t=a(e),s))?r:c?i(t):"Object"===(n=i(t))&&o(t.callee)?"Arguments":n}},4206:function(e,t,r){var n=r(3239),o=r(8081),i=TypeError;e.exports=function(e){if(n(e))return e;throw new i(o(e)+" is not a constructor")}},4209:function(e,t,r){var n=r(7132),o=r(8381),i=r(5510).CONSTRUCTOR,s=r(8856),a=r(8985),c=r(3939),u=r(1746),l=s&&s.prototype;if(n({target:"Promise",proto:!0,forced:i,real:!0},{catch:function(e){return this.then(void 0,e)}}),!o&&c(s)){var d=a("Promise").prototype.catch;l.catch!==d&&u(l,"catch",d,{unsafe:!0})}},4263:function(e,t,r){var n=r(7266),o=r(9962),i=r(3939),s=r(2038),a=r(5773),c=n([].push);e.exports=function(e){if(i(e))return e;if(o(e)){for(var t=e.length,r=[],n=0;n<t;n++){var u=e[n];"string"==typeof u?c(r,u):"number"!=typeof u&&"Number"!==s(u)&&"String"!==s(u)||c(r,a(u))}var l=r.length,d=!0;return function(e,t){if(d)return d=!1,t;if(o(this))return t;for(var n=0;n<l;n++)if(r[n]===e)return t}}}},4326:function(e,t,r){var n=r(6325);e.exports=n&&!Symbol.sham&&"symbol"==typeof Symbol.iterator},4649:function(e,t,r){var n=r(8990),o=r(7176).add,i=r(6208),s=r(3795),a=r(7657);e.exports=function(e){var t=n(this),r=s(e).getIterator(),c=i(t);return a(r,function(e){o(c,e)}),c}},4686:function(e,t,r){var n=r(7132),o=r(6264);n({target:"Set",proto:!0,real:!0,forced:!r(8370)("isSubsetOf",function(e){return e})},{isSubsetOf:o})},4792:function(e,t,r){var n=r(5477),o=Math.max,i=Math.min;e.exports=function(e,t){var r=n(e);return r<0?o(r+t,0):i(r,t)}},4964:function(e,t,r){var n=r(7132),o=r(1107),i=r(1048),s=r(9361),a=r(555);n({target:"Array",proto:!0,arity:1,forced:r(8049)(function(){return 4294967297!==[].push.call({length:4294967296},1)})||!function(){try{Object.defineProperty([],"length",{writable:!1}).push()}catch(e){return e instanceof TypeError}}()},{push:function(e){var t=o(this),r=i(t),n=arguments.length;a(r+n);for(var c=0;c<n;c++)t[r]=arguments[c],r++;return s(t,r),r}})},4981:function(e,t,r){var n=r(7132),o=r(5985);n({target:"Set",proto:!0,real:!0,forced:!r(8370)("isSupersetOf",function(e){return!e})},{isSupersetOf:o})},5001:function(e,t,r){var n=r(5773);e.exports=function(e,t){return void 0===e?arguments.length<2?"":t:n(e)}},5047:function(e,t,r){var n=r(7266),o=Error,i=n("".replace),s=String(new o("zxcasd").stack),a=/\n\s*at [^:]*:[^\n]*/,c=a.test(s);e.exports=function(e,t){if(c&&"string"==typeof e&&!o.prepareStackTrace)for(;t--;)e=i(e,a,"");return e}},5048:function(e,t,r){var n=r(7132),o=r(3722),i=r(7159),s=Array;n({target:"Array",proto:!0,forced:function(){try{[].with({valueOf:function(){throw 4}},null)}catch(e){return 4!==e}}()},{with:function(e,t){return o(i(this),s,e,t)}})},5066:function(e,t,r){var n=r(2013);e.exports=/(?:ipad|iphone|ipod).*applewebkit/i.test(n)},5098:function(e,t,r){var n=r(7266);e.exports=n([].slice)},5146:function(e,t,r){var n=r(298),o=r(9207),i=r(6781),s=r(8081),a=r(2491),c=r(1048),u=r(887),l=r(9215),d=r(8657),f=r(25),h=TypeError,p=function(e,t){this.stopped=e,this.result=t},v=p.prototype;e.exports=function(e,t,r){var y,g,m,b,w,S,O,E=r&&r.that,P=!(!r||!r.AS_ENTRIES),x=!(!r||!r.IS_RECORD),T=!(!r||!r.IS_ITERATOR),k=!(!r||!r.INTERRUPTED),I=n(t,E),C=function(e){return y&&f(y,"normal"),new p(!0,e)},R=function(e){return P?(i(e),k?I(e[0],e[1],C):I(e[0],e[1])):k?I(e,C):I(e)};if(x)y=e.iterator;else if(T)y=e;else{if(!(g=d(e)))throw new h(s(e)+" is not iterable");if(a(g)){for(m=0,b=c(e);b>m;m++)if((w=R(e[m]))&&u(v,w))return w;return new p(!1)}y=l(e,g)}for(S=x?e.next:y.next;!(O=o(S,y)).done;){try{w=R(O.value)}catch(e){f(y,"throw",e)}if("object"==typeof w&&w&&u(v,w))return w}return new p(!1)}},5161:function(e,t,r){var n=r(85),o=r(5047),i=r(7317),s=Error.captureStackTrace;e.exports=function(e,t,r,a){i&&(s?s(e,t):n(e,"stack",o(r,a)))}},5235:function(e,t){t.f=Object.getOwnPropertySymbols},5292:function(e,t,r){var n=r(1746),o=r(7266),i=r(5773),s=r(4122),a=URLSearchParams,c=a.prototype,u=o(c.getAll),l=o(c.has),d=new a("a=1");!d.has("a",2)&&d.has("a",void 0)||n(c,"has",function(e){var t=arguments.length,r=t<2?void 0:arguments[1];if(t&&void 0===r)return l(this,e);var n=u(this,e);s(t,1);for(var o=i(r),a=0;a<n.length;)if(n[a++]===o)return!0;return!1},{enumerable:!0,unsafe:!0})},5392:function(e,t,r){r(730),r(3131);var n=r(7132),o=r(4178),i=r(3379),s=r(8985),a=r(9207),c=r(7266),u=r(8038),l=r(6754),d=r(1746),f=r(8224),h=r(2097),p=r(3101),v=r(8904),y=r(8235),g=r(909),m=r(3939),b=r(6883),w=r(298),S=r(4201),O=r(6781),E=r(8928),P=r(5773),x=r(2562),T=r(7570),k=r(9215),I=r(8657),C=r(2727),R=r(4122),A=r(1497),j=r(3474),M=A("iterator"),N="URLSearchParams",L=N+"Iterator",_=y.set,D=y.getterFor(N),B=y.getterFor(L),F=i("fetch"),U=i("Request"),W=i("Headers"),z=U&&U.prototype,V=W&&W.prototype,G=o.TypeError,q=o.encodeURIComponent,H=String.fromCharCode,$=s("String","fromCodePoint"),K=parseInt,J=c("".charAt),Q=c([].join),Y=c([].push),X=c("".replace),Z=c([].shift),ee=c([].splice),te=c("".split),re=c("".slice),ne=c(/./.exec),oe=/\+/g,ie=/^[0-9a-f]+$/i,se=function(e,t){var r=re(e,t,t+2);return ne(ie,r)?K(r,16):NaN},ae=function(e){for(var t=0,r=128;r>0&&0!==(e&r);r>>=1)t++;return t},ce=function(e){var t=null;switch(e.length){case 1:t=e[0];break;case 2:t=(31&e[0])<<6|63&e[1];break;case 3:t=(15&e[0])<<12|(63&e[1])<<6|63&e[2];break;case 4:t=(7&e[0])<<18|(63&e[1])<<12|(63&e[2])<<6|63&e[3]}return t>1114111?null:t},ue=function(e){for(var t=(e=X(e,oe," ")).length,r="",n=0;n<t;){var o=J(e,n);if("%"===o){if("%"===J(e,n+1)||n+3>t){r+="%",n++;continue}var i=se(e,n+1);if(i!=i){r+=o,n++;continue}n+=2;var s=ae(i);if(0===s)o=H(i);else{if(1===s||s>4){r+="ï¿½",n++;continue}for(var a=[i],c=1;c<s&&!(++n+3>t||"%"!==J(e,n));){var u=se(e,n+1);if(u!=u){n+=3;break}if(u>191||u<128)break;Y(a,u),n+=2,c++}if(a.length!==s){r+="ï¿½";continue}var l=ce(a);null===l?r+="ï¿½":o=$(l)}}r+=o,n++}return r},le=/[!'()~]|%20/g,de={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+"},fe=function(e){return de[e]},he=function(e){return X(q(e),le,fe)},pe=v(function(e,t){_(this,{type:L,target:D(e).entries,index:0,kind:t})},N,function(){var e=B(this),t=e.target,r=e.index++;if(!t||r>=t.length)return e.target=null,C(void 0,!0);var n=t[r];switch(e.kind){case"keys":return C(n.key,!1);case"values":return C(n.value,!1)}return C([n.key,n.value],!1)},!0),ve=function(e){this.entries=[],this.url=null,void 0!==e&&(E(e)?this.parseObject(e):this.parseQuery("string"==typeof e?"?"===J(e,0)?re(e,1):e:P(e)))};ve.prototype={type:N,bindURL:function(e){this.url=e,this.update()},parseObject:function(e){var t,r,n,o,i,s,c,u=this.entries,l=I(e);if(l)for(r=(t=k(e,l)).next;!(n=a(r,t)).done;){if(i=(o=k(O(n.value))).next,(s=a(i,o)).done||(c=a(i,o)).done||!a(i,o).done)throw new G("Expected sequence with length 2");Y(u,{key:P(s.value),value:P(c.value)})}else for(var d in e)b(e,d)&&Y(u,{key:d,value:P(e[d])})},parseQuery:function(e){if(e)for(var t,r,n=this.entries,o=te(e,"&"),i=0;i<o.length;)(t=o[i++]).length&&(r=te(t,"="),Y(n,{key:ue(Z(r)),value:ue(Q(r,"="))}))},serialize:function(){for(var e,t=this.entries,r=[],n=0;n<t.length;)e=t[n++],Y(r,he(e.key)+"="+he(e.value));return Q(r,"&")},update:function(){this.entries.length=0,this.parseQuery(this.url.query)},updateURL:function(){this.url&&this.url.update()}};var ye=function(){g(this,ge);var e=_(this,new ve(arguments.length>0?arguments[0]:void 0));u||(this.size=e.entries.length)},ge=ye.prototype;if(h(ge,{append:function(e,t){var r=D(this);R(arguments.length,2),Y(r.entries,{key:P(e),value:P(t)}),u||this.length++,r.updateURL()},delete:function(e){for(var t=D(this),r=R(arguments.length,1),n=t.entries,o=P(e),i=r<2?void 0:arguments[1],s=void 0===i?i:P(i),a=0;a<n.length;){var c=n[a];if(c.key!==o||void 0!==s&&c.value!==s)a++;else if(ee(n,a,1),void 0!==s)break}u||(this.size=n.length),t.updateURL()},get:function(e){var t=D(this).entries;R(arguments.length,1);for(var r=P(e),n=0;n<t.length;n++)if(t[n].key===r)return t[n].value;return null},getAll:function(e){var t=D(this).entries;R(arguments.length,1);for(var r=P(e),n=[],o=0;o<t.length;o++)t[o].key===r&&Y(n,t[o].value);return n},has:function(e){for(var t=D(this).entries,r=R(arguments.length,1),n=P(e),o=r<2?void 0:arguments[1],i=void 0===o?o:P(o),s=0;s<t.length;){var a=t[s++];if(a.key===n&&(void 0===i||a.value===i))return!0}return!1},set:function(e,t){var r=D(this);R(arguments.length,1);for(var n,o=r.entries,i=!1,s=P(e),a=P(t),c=0;c<o.length;c++)(n=o[c]).key===s&&(i?ee(o,c--,1):(i=!0,n.value=a));i||Y(o,{key:s,value:a}),u||(this.size=o.length),r.updateURL()},sort:function(){var e=D(this);j(e.entries,function(e,t){return e.key>t.key?1:-1}),e.updateURL()},forEach:function(e){for(var t,r=D(this).entries,n=w(e,arguments.length>1?arguments[1]:void 0),o=0;o<r.length;)n((t=r[o++]).value,t.key,this)},keys:function(){return new pe(this,"keys")},values:function(){return new pe(this,"values")},entries:function(){return new pe(this,"entries")}},{enumerable:!0}),d(ge,M,ge.entries,{name:"entries"}),d(ge,"toString",function(){return D(this).serialize()},{enumerable:!0}),u&&f(ge,"size",{get:function(){return D(this).entries.length},configurable:!0,enumerable:!0}),p(ye,N),n({global:!0,constructor:!0,forced:!l},{URLSearchParams:ye}),!l&&m(W)){var me=c(V.has),be=c(V.set),we=function(e){if(E(e)){var t,r=e.body;if(S(r)===N)return t=e.headers?new W(e.headers):new W,me(t,"content-type")||be(t,"content-type","application/x-www-form-urlencoded;charset=UTF-8"),x(e,{body:T(0,P(r)),headers:T(0,t)})}return e};if(m(F)&&n({global:!0,enumerable:!0,dontCallGetSet:!0,forced:!0},{fetch:function(e){return F(e,arguments.length>1?we(arguments[1]):{})}}),m(U)){var Se=function(e){return g(this,z),new U(e,arguments.length>1?we(arguments[1]):{})};z.constructor=Se,Se.prototype=z,n({global:!0,constructor:!0,dontCallGetSet:!0,forced:!0},{Request:Se})}}e.exports={URLSearchParams:ye,getState:D}},5477:function(e,t,r){var n=r(8943);e.exports=function(e){var t=+e;return t!=t||0===t?0:n(t)}},5509:function(e,t,r){var n,o,i=r(4178),s=r(2013),a=i.process,c=i.Deno,u=a&&a.versions||c&&c.version,l=u&&u.v8;l&&(o=(n=l.split("."))[0]>0&&n[0]<4?1:+(n[0]+n[1])),!o&&s&&(!(n=s.match(/Edge\/(\d+)/))||n[1]>=74)&&(n=s.match(/Chrome\/(\d+)/))&&(o=+n[1]),e.exports=o},5510:function(e,t,r){var n=r(4178),o=r(8856),i=r(3939),s=r(6626),a=r(3996),c=r(1497),u=r(6641),l=r(8381),d=r(5509),f=o&&o.prototype,h=c("species"),p=!1,v=i(n.PromiseRejectionEvent),y=s("Promise",function(){var e=a(o),t=e!==String(o);if(!t&&66===d)return!0;if(l&&(!f.catch||!f.finally))return!0;if(!d||d<51||!/native code/.test(e)){var r=new o(function(e){e(1)}),n=function(e){e(function(){},function(){})};if((r.constructor={})[h]=n,!(p=r.then(function(){})instanceof n))return!0}return!(t||"BROWSER"!==u&&"DENO"!==u||v)});e.exports={CONSTRUCTOR:y,REJECTION_EVENT:v,SUBCLASSING:p}},5538:function(e,t,r){var n=r(7132),o=r(9207);n({target:"URL",proto:!0,enumerable:!0},{toJSON:function(){return o(URL.prototype.toString,this)}})},5668:function(e,t,r){r(6498);var n,o=r(7132),i=r(8038),s=r(6754),a=r(4178),c=r(298),u=r(7266),l=r(1746),d=r(8224),f=r(909),h=r(6883),p=r(5927),v=r(1878),y=r(5098),g=r(1961).codeAt,m=r(7331),b=r(5773),w=r(3101),S=r(4122),O=r(5392),E=r(8235),P=E.set,x=E.getterFor("URL"),T=O.URLSearchParams,k=O.getState,I=a.URL,C=a.TypeError,R=a.parseInt,A=Math.floor,j=Math.pow,M=u("".charAt),N=u(/./.exec),L=u([].join),_=u(1.1.toString),D=u([].pop),B=u([].push),F=u("".replace),U=u([].shift),W=u("".split),z=u("".slice),V=u("".toLowerCase),G=u([].unshift),q="Invalid scheme",H="Invalid host",$="Invalid port",K=/[a-z]/i,J=/[\d+-.a-z]/i,Q=/\d/,Y=/^0x/i,X=/^[0-7]+$/,Z=/^\d+$/,ee=/^[\da-f]+$/i,te=/[\0\t\n\r #%/:<>?@[\\\]^|]/,re=/[\0\t\n\r #/:<>?@[\\\]^|]/,ne=/^[\u0000-\u0020]+/,oe=/(^|[^\u0000-\u0020])[\u0000-\u0020]+$/,ie=/[\t\n\r]/g,se=function(e){var t,r,n,o;if("number"==typeof e){for(t=[],r=0;r<4;r++)G(t,e%256),e=A(e/256);return L(t,".")}if("object"==typeof e){for(t="",n=function(e){for(var t=null,r=1,n=null,o=0,i=0;i<8;i++)0!==e[i]?(o>r&&(t=n,r=o),n=null,o=0):(null===n&&(n=i),++o);return o>r?n:t}(e),r=0;r<8;r++)o&&0===e[r]||(o&&(o=!1),n===r?(t+=r?":":"::",o=!0):(t+=_(e[r],16),r<7&&(t+=":")));return"["+t+"]"}return e},ae={},ce=p({},ae,{" ":1,'"':1,"<":1,">":1,"`":1}),ue=p({},ce,{"#":1,"?":1,"{":1,"}":1}),le=p({},ue,{"/":1,":":1,";":1,"=":1,"@":1,"[":1,"\\":1,"]":1,"^":1,"|":1}),de=function(e,t){var r=g(e,0);return r>32&&r<127&&!h(t,e)?e:encodeURIComponent(e)},fe={ftp:21,file:null,http:80,https:443,ws:80,wss:443},he=function(e,t){var r;return 2===e.length&&N(K,M(e,0))&&(":"===(r=M(e,1))||!t&&"|"===r)},pe=function(e){var t;return e.length>1&&he(z(e,0,2))&&(2===e.length||"/"===(t=M(e,2))||"\\"===t||"?"===t||"#"===t)},ve=function(e){return"."===e||"%2e"===V(e)},ye=function(e){return".."===(e=V(e))||"%2e."===e||".%2e"===e||"%2e%2e"===e},ge={},me={},be={},we={},Se={},Oe={},Ee={},Pe={},xe={},Te={},ke={},Ie={},Ce={},Re={},Ae={},je={},Me={},Ne={},Le={},_e={},De={},Be=function(e,t,r){var n,o,i,s=b(e);if(t){if(o=this.parse(s))throw new C(o);this.searchParams=null}else{if(void 0!==r&&(n=new Be(r,!0)),o=this.parse(s,null,n))throw new C(o);(i=k(new T)).bindURL(this),this.searchParams=i}};Be.prototype={type:"URL",parse:function(e,t,r){var o,i,s,a,c=this,u=t||ge,l=0,d="",f=!1,p=!1,g=!1;for(e=b(e),t||(c.scheme="",c.username="",c.password="",c.host=null,c.port=null,c.path=[],c.query=null,c.fragment=null,c.cannotBeABaseURL=!1,e=F(e,ne,""),e=F(e,oe,"$1")),e=F(e,ie,""),o=v(e);l<=o.length;){switch(i=o[l],u){case ge:if(!i||!N(K,i)){if(t)return q;u=be;continue}d+=V(i),u=me;break;case me:if(i&&(N(J,i)||"+"===i||"-"===i||"."===i))d+=V(i);else{if(":"!==i){if(t)return q;d="",u=be,l=0;continue}if(t&&(c.isSpecial()!==h(fe,d)||"file"===d&&(c.includesCredentials()||null!==c.port)||"file"===c.scheme&&!c.host))return;if(c.scheme=d,t)return void(c.isSpecial()&&fe[c.scheme]===c.port&&(c.port=null));d="","file"===c.scheme?u=Re:c.isSpecial()&&r&&r.scheme===c.scheme?u=we:c.isSpecial()?u=Pe:"/"===o[l+1]?(u=Se,l++):(c.cannotBeABaseURL=!0,B(c.path,""),u=Le)}break;case be:if(!r||r.cannotBeABaseURL&&"#"!==i)return q;if(r.cannotBeABaseURL&&"#"===i){c.scheme=r.scheme,c.path=y(r.path),c.query=r.query,c.fragment="",c.cannotBeABaseURL=!0,u=De;break}u="file"===r.scheme?Re:Oe;continue;case we:if("/"!==i||"/"!==o[l+1]){u=Oe;continue}u=xe,l++;break;case Se:if("/"===i){u=Te;break}u=Ne;continue;case Oe:if(c.scheme=r.scheme,i===n)c.username=r.username,c.password=r.password,c.host=r.host,c.port=r.port,c.path=y(r.path),c.query=r.query;else if("/"===i||"\\"===i&&c.isSpecial())u=Ee;else if("?"===i)c.username=r.username,c.password=r.password,c.host=r.host,c.port=r.port,c.path=y(r.path),c.query="",u=_e;else{if("#"!==i){c.username=r.username,c.password=r.password,c.host=r.host,c.port=r.port,c.path=y(r.path),c.path.length--,u=Ne;continue}c.username=r.username,c.password=r.password,c.host=r.host,c.port=r.port,c.path=y(r.path),c.query=r.query,c.fragment="",u=De}break;case Ee:if(!c.isSpecial()||"/"!==i&&"\\"!==i){if("/"!==i){c.username=r.username,c.password=r.password,c.host=r.host,c.port=r.port,u=Ne;continue}u=Te}else u=xe;break;case Pe:if(u=xe,"/"!==i||"/"!==M(d,l+1))continue;l++;break;case xe:if("/"!==i&&"\\"!==i){u=Te;continue}break;case Te:if("@"===i){f&&(d="%40"+d),f=!0,s=v(d);for(var m=0;m<s.length;m++){var w=s[m];if(":"!==w||g){var S=de(w,le);g?c.password+=S:c.username+=S}else g=!0}d=""}else if(i===n||"/"===i||"?"===i||"#"===i||"\\"===i&&c.isSpecial()){if(f&&""===d)return"Invalid authority";l-=v(d).length+1,d="",u=ke}else d+=i;break;case ke:case Ie:if(t&&"file"===c.scheme){u=je;continue}if(":"!==i||p){if(i===n||"/"===i||"?"===i||"#"===i||"\\"===i&&c.isSpecial()){if(c.isSpecial()&&""===d)return H;if(t&&""===d&&(c.includesCredentials()||null!==c.port))return;if(a=c.parseHost(d))return a;if(d="",u=Me,t)return;continue}"["===i?p=!0:"]"===i&&(p=!1),d+=i}else{if(""===d)return H;if(a=c.parseHost(d))return a;if(d="",u=Ce,t===Ie)return}break;case Ce:if(!N(Q,i)){if(i===n||"/"===i||"?"===i||"#"===i||"\\"===i&&c.isSpecial()||t){if(""!==d){var O=R(d,10);if(O>65535)return $;c.port=c.isSpecial()&&O===fe[c.scheme]?null:O,d=""}if(t)return;u=Me;continue}return $}d+=i;break;case Re:if(c.scheme="file","/"===i||"\\"===i)u=Ae;else{if(!r||"file"!==r.scheme){u=Ne;continue}switch(i){case n:c.host=r.host,c.path=y(r.path),c.query=r.query;break;case"?":c.host=r.host,c.path=y(r.path),c.query="",u=_e;break;case"#":c.host=r.host,c.path=y(r.path),c.query=r.query,c.fragment="",u=De;break;default:pe(L(y(o,l),""))||(c.host=r.host,c.path=y(r.path),c.shortenPath()),u=Ne;continue}}break;case Ae:if("/"===i||"\\"===i){u=je;break}r&&"file"===r.scheme&&!pe(L(y(o,l),""))&&(he(r.path[0],!0)?B(c.path,r.path[0]):c.host=r.host),u=Ne;continue;case je:if(i===n||"/"===i||"\\"===i||"?"===i||"#"===i){if(!t&&he(d))u=Ne;else if(""===d){if(c.host="",t)return;u=Me}else{if(a=c.parseHost(d))return a;if("localhost"===c.host&&(c.host=""),t)return;d="",u=Me}continue}d+=i;break;case Me:if(c.isSpecial()){if(u=Ne,"/"!==i&&"\\"!==i)continue}else if(t||"?"!==i)if(t||"#"!==i){if(i!==n&&(u=Ne,"/"!==i))continue}else c.fragment="",u=De;else c.query="",u=_e;break;case Ne:if(i===n||"/"===i||"\\"===i&&c.isSpecial()||!t&&("?"===i||"#"===i)){if(ye(d)?(c.shortenPath(),"/"===i||"\\"===i&&c.isSpecial()||B(c.path,"")):ve(d)?"/"===i||"\\"===i&&c.isSpecial()||B(c.path,""):("file"===c.scheme&&!c.path.length&&he(d)&&(c.host&&(c.host=""),d=M(d,0)+":"),B(c.path,d)),d="","file"===c.scheme&&(i===n||"?"===i||"#"===i))for(;c.path.length>1&&""===c.path[0];)U(c.path);"?"===i?(c.query="",u=_e):"#"===i&&(c.fragment="",u=De)}else d+=de(i,ue);break;case Le:"?"===i?(c.query="",u=_e):"#"===i?(c.fragment="",u=De):i!==n&&(c.path[0]+=de(i,ae));break;case _e:t||"#"!==i?i!==n&&("'"===i&&c.isSpecial()?c.query+="%27":c.query+="#"===i?"%23":de(i,ae)):(c.fragment="",u=De);break;case De:i!==n&&(c.fragment+=de(i,ce))}l++}},parseHost:function(e){var t,r,n;if("["===M(e,0)){if("]"!==M(e,e.length-1))return H;if(t=function(e){var t,r,n,o,i,s,a,c=[0,0,0,0,0,0,0,0],u=0,l=null,d=0,f=function(){return M(e,d)};if(":"===f()){if(":"!==M(e,1))return;d+=2,l=++u}for(;f();){if(8===u)return;if(":"!==f()){for(t=r=0;r<4&&N(ee,f());)t=16*t+R(f(),16),d++,r++;if("."===f()){if(0===r)return;if(d-=r,u>6)return;for(n=0;f();){if(o=null,n>0){if(!("."===f()&&n<4))return;d++}if(!N(Q,f()))return;for(;N(Q,f());){if(i=R(f(),10),null===o)o=i;else{if(0===o)return;o=10*o+i}if(o>255)return;d++}c[u]=256*c[u]+o,2!==++n&&4!==n||u++}if(4!==n)return;break}if(":"===f()){if(d++,!f())return}else if(f())return;c[u++]=t}else{if(null!==l)return;d++,l=++u}}if(null!==l)for(s=u-l,u=7;0!==u&&s>0;)a=c[u],c[u--]=c[l+s-1],c[l+--s]=a;else if(8!==u)return;return c}(z(e,1,-1)),!t)return H;this.host=t}else if(this.isSpecial()){if(e=m(e),N(te,e))return H;if(t=function(e){var t,r,n,o,i,s,a,c=W(e,".");if(c.length&&""===c[c.length-1]&&c.length--,(t=c.length)>4)return e;for(r=[],n=0;n<t;n++){if(""===(o=c[n]))return e;if(i=10,o.length>1&&"0"===M(o,0)&&(i=N(Y,o)?16:8,o=z(o,8===i?1:2)),""===o)s=0;else{if(!N(10===i?Z:8===i?X:ee,o))return e;s=R(o,i)}B(r,s)}for(n=0;n<t;n++)if(s=r[n],n===t-1){if(s>=j(256,5-t))return null}else if(s>255)return null;for(a=D(r),n=0;n<r.length;n++)a+=r[n]*j(256,3-n);return a}(e),null===t)return H;this.host=t}else{if(N(re,e))return H;for(t="",r=v(e),n=0;n<r.length;n++)t+=de(r[n],ae);this.host=t}},cannotHaveUsernamePasswordPort:function(){return!this.host||this.cannotBeABaseURL||"file"===this.scheme},includesCredentials:function(){return""!==this.username||""!==this.password},isSpecial:function(){return h(fe,this.scheme)},shortenPath:function(){var e=this.path,t=e.length;!t||"file"===this.scheme&&1===t&&he(e[0],!0)||e.length--},serialize:function(){var e=this,t=e.scheme,r=e.username,n=e.password,o=e.host,i=e.port,s=e.path,a=e.query,c=e.fragment,u=t+":";return null!==o?(u+="//",e.includesCredentials()&&(u+=r+(n?":"+n:"")+"@"),u+=se(o),null!==i&&(u+=":"+i)):"file"===t&&(u+="//"),u+=e.cannotBeABaseURL?s[0]:s.length?"/"+L(s,"/"):"",null!==a&&(u+="?"+a),null!==c&&(u+="#"+c),u},setHref:function(e){var t=this.parse(e);if(t)throw new C(t);this.searchParams.update()},getOrigin:function(){var e=this.scheme,t=this.port;if("blob"===e)try{return new Fe(e.path[0]).origin}catch(e){return"null"}return"file"!==e&&this.isSpecial()?e+"://"+se(this.host)+(null!==t?":"+t:""):"null"},getProtocol:function(){return this.scheme+":"},setProtocol:function(e){this.parse(b(e)+":",ge)},getUsername:function(){return this.username},setUsername:function(e){var t=v(b(e));if(!this.cannotHaveUsernamePasswordPort()){this.username="";for(var r=0;r<t.length;r++)this.username+=de(t[r],le)}},getPassword:function(){return this.password},setPassword:function(e){var t=v(b(e));if(!this.cannotHaveUsernamePasswordPort()){this.password="";for(var r=0;r<t.length;r++)this.password+=de(t[r],le)}},getHost:function(){var e=this.host,t=this.port;return null===e?"":null===t?se(e):se(e)+":"+t},setHost:function(e){this.cannotBeABaseURL||this.parse(e,ke)},getHostname:function(){var e=this.host;return null===e?"":se(e)},setHostname:function(e){this.cannotBeABaseURL||this.parse(e,Ie)},getPort:function(){var e=this.port;return null===e?"":b(e)},setPort:function(e){this.cannotHaveUsernamePasswordPort()||(""===(e=b(e))?this.port=null:this.parse(e,Ce))},getPathname:function(){var e=this.path;return this.cannotBeABaseURL?e[0]:e.length?"/"+L(e,"/"):""},setPathname:function(e){this.cannotBeABaseURL||(this.path=[],this.parse(e,Me))},getSearch:function(){var e=this.query;return e?"?"+e:""},setSearch:function(e){""===(e=b(e))?this.query=null:("?"===M(e,0)&&(e=z(e,1)),this.query="",this.parse(e,_e)),this.searchParams.update()},getSearchParams:function(){return this.searchParams.facade},getHash:function(){var e=this.fragment;return e?"#"+e:""},setHash:function(e){""!==(e=b(e))?("#"===M(e,0)&&(e=z(e,1)),this.fragment="",this.parse(e,De)):this.fragment=null},update:function(){this.query=this.searchParams.serialize()||null}};var Fe=function(e){var t=f(this,Ue),r=S(arguments.length,1)>1?arguments[1]:void 0,n=P(t,new Be(e,!1,r));i||(t.href=n.serialize(),t.origin=n.getOrigin(),t.protocol=n.getProtocol(),t.username=n.getUsername(),t.password=n.getPassword(),t.host=n.getHost(),t.hostname=n.getHostname(),t.port=n.getPort(),t.pathname=n.getPathname(),t.search=n.getSearch(),t.searchParams=n.getSearchParams(),t.hash=n.getHash())},Ue=Fe.prototype,We=function(e,t){return{get:function(){return x(this)[e]()},set:t&&function(e){return x(this)[t](e)},configurable:!0,enumerable:!0}};if(i&&(d(Ue,"href",We("serialize","setHref")),d(Ue,"origin",We("getOrigin")),d(Ue,"protocol",We("getProtocol","setProtocol")),d(Ue,"username",We("getUsername","setUsername")),d(Ue,"password",We("getPassword","setPassword")),d(Ue,"host",We("getHost","setHost")),d(Ue,"hostname",We("getHostname","setHostname")),d(Ue,"port",We("getPort","setPort")),d(Ue,"pathname",We("getPathname","setPathname")),d(Ue,"search",We("getSearch","setSearch")),d(Ue,"searchParams",We("getSearchParams")),d(Ue,"hash",We("getHash","setHash"))),l(Ue,"toJSON",function(){return x(this).serialize()},{enumerable:!0}),l(Ue,"toString",function(){return x(this).serialize()},{enumerable:!0}),I){var ze=I.createObjectURL,Ve=I.revokeObjectURL;ze&&l(Fe,"createObjectURL",c(ze,I)),Ve&&l(Fe,"revokeObjectURL",c(Ve,I))}w(Fe,"URL"),o({global:!0,constructor:!0,forced:!s,sham:!i},{URL:Fe})},5686:function(e,t,r){var n=r(7132),o=r(8985),i=r(8381),s=r(8856),a=r(5510).CONSTRUCTOR,c=r(1428),u=o("Promise"),l=i&&!a;n({target:"Promise",stat:!0,forced:i||a},{resolve:function(e){return c(l&&this===u?s:this,e)}})},5699:function(e,t,r){var n=r(2218),o=Function.prototype,i=o.apply,s=o.call;e.exports="object"==typeof Reflect&&Reflect.apply||(n?s.bind(i):function(){return s.apply(i,arguments)})},5702:function(e,t,r){var n=r(2013);e.exports=/web0s(?!.*chrome)/i.test(n)},5735:function(e,t,r){var n,o,i,s,a=r(4178),c=r(5699),u=r(298),l=r(3939),d=r(6883),f=r(8049),h=r(3459),p=r(5098),v=r(8145),y=r(4122),g=r(5066),m=r(9375),b=a.setImmediate,w=a.clearImmediate,S=a.process,O=a.Dispatch,E=a.Function,P=a.MessageChannel,x=a.String,T=0,k={},I="onreadystatechange";f(function(){n=a.location});var C=function(e){if(d(k,e)){var t=k[e];delete k[e],t()}},R=function(e){return function(){C(e)}},A=function(e){C(e.data)},j=function(e){a.postMessage(x(e),n.protocol+"//"+n.host)};b&&w||(b=function(e){y(arguments.length,1);var t=l(e)?e:E(e),r=p(arguments,1);return k[++T]=function(){c(t,void 0,r)},o(T),T},w=function(e){delete k[e]},m?o=function(e){S.nextTick(R(e))}:O&&O.now?o=function(e){O.now(R(e))}:P&&!g?(s=(i=new P).port2,i.port1.onmessage=A,o=u(s.postMessage,s)):a.addEventListener&&l(a.postMessage)&&!a.importScripts&&n&&"file:"!==n.protocol&&!f(j)?(o=j,a.addEventListener("message",A,!1)):o=I in v("script")?function(e){h.appendChild(v("script"))[I]=function(){h.removeChild(this),C(e)}}:function(e){setTimeout(R(e),0)}),e.exports={set:b,clear:w}},5773:function(e,t,r){var n=r(4201),o=String;e.exports=function(e){if("Symbol"===n(e))throw new TypeError("Cannot convert a Symbol value to a string");return o(e)}},5927:function(e,t,r){var n=r(8038),o=r(7266),i=r(9207),s=r(8049),a=r(3682),c=r(5235),u=r(8419),l=r(1107),d=r(449),f=Object.assign,h=Object.defineProperty,p=o([].concat);e.exports=!f||s(function(){if(n&&1!==f({b:1},f(h({},"a",{enumerable:!0,get:function(){h(this,"b",{value:3,enumerable:!1})}}),{b:2})).b)return!0;var e={},t={},r=Symbol("assign detection"),o="abcdefghijklmnopqrst";return e[r]=7,o.split("").forEach(function(e){t[e]=e}),7!==f({},e)[r]||a(f({},t)).join("")!==o})?function(e,t){for(var r=l(e),o=arguments.length,s=1,f=c.f,h=u.f;o>s;)for(var v,y=d(arguments[s++]),g=f?p(a(y),f(y)):a(y),m=g.length,b=0;m>b;)v=g[b++],n&&!i(h,y,v)||(r[v]=y[v]);return r}:f},5985:function(e,t,r){var n=r(8990),o=r(7176).has,i=r(268),s=r(3795),a=r(7657),c=r(25);e.exports=function(e){var t=n(this),r=s(e);if(i(t)<r.size)return!1;var u=r.getIterator();return!1!==a(u,function(e){if(!o(t,e))return c(u,"normal",!1)})}},6031:function(e,t,r){var n=r(1497),o=r(2562),i=r(6275).f,s=n("unscopables"),a=Array.prototype;void 0===a[s]&&i(a,s,{configurable:!0,value:o(null)}),e.exports=function(e){a[s][e]=!0}},6183:function(e,t,r){var n=r(8985),o=r(6883),i=r(85),s=r(887),a=r(7225),c=r(7486),u=r(7030),l=r(8261),d=r(5001),f=r(1706),h=r(5161),p=r(8038),v=r(8381);e.exports=function(e,t,r,y){var g="stackTraceLimit",m=y?2:1,b=e.split("."),w=b[b.length-1],S=n.apply(null,b);if(S){var O=S.prototype;if(!v&&o(O,"cause")&&delete O.cause,!r)return S;var E=n("Error"),P=t(function(e,t){var r=d(y?t:e,void 0),n=y?new S(e):new S;return void 0!==r&&i(n,"message",r),h(n,P,n.stack,2),this&&s(O,this)&&l(n,this,P),arguments.length>m&&f(n,arguments[m]),n});if(P.prototype=O,"Error"!==w?a?a(P,E):c(P,E,{name:!0}):p&&g in S&&(u(P,S,g),u(P,S,"prepareStackTrace")),c(P,S),!v)try{O.name!==w&&i(O,"name",w),O.constructor=P}catch(e){}return P}}},6208:function(e,t,r){var n=r(7176),o=r(831),i=n.Set,s=n.add;e.exports=function(e){var t=new i;return o(e,function(e){s(t,e)}),t}},6264:function(e,t,r){var n=r(8990),o=r(268),i=r(831),s=r(3795);e.exports=function(e){var t=n(this),r=s(e);return!(o(t)>r.size)&&!1!==i(t,function(e){if(!r.includes(e))return!1},!0)}},6275:function(e,t,r){var n=r(8038),o=r(7903),i=r(6480),s=r(6781),a=r(7391),c=TypeError,u=Object.defineProperty,l=Object.getOwnPropertyDescriptor,d="enumerable",f="configurable",h="writable";t.f=n?i?function(e,t,r){if(s(e),t=a(t),s(r),"function"==typeof e&&"prototype"===t&&"value"in r&&h in r&&!r[h]){var n=l(e,t);n&&n[h]&&(e[t]=r.value,r={configurable:f in r?r[f]:n[f],enumerable:d in r?r[d]:n[d],writable:!1})}return u(e,t,r)}:u:function(e,t,r){if(s(e),t=a(t),s(r),o)try{return u(e,t,r)}catch(e){}if("get"in r||"set"in r)throw new c("Accessors not supported");return"value"in r&&(e[t]=r.value),e}},6316:function(e,t,r){var n=r(4178),o=r(3939),i=n.WeakMap;e.exports=o(i)&&/native code/.test(String(i))},6325:function(e,t,r){var n=r(5509),o=r(8049),i=r(4178).String;e.exports=!!Object.getOwnPropertySymbols&&!o(function(){var e=Symbol("symbol detection");return!i(e)||!(Object(e)instanceof Symbol)||!Symbol.sham&&n&&n<41})},6466:function(e,t,r){r(5668)},6480:function(e,t,r){var n=r(8038),o=r(8049);e.exports=n&&o(function(){return 42!==Object.defineProperty(function(){},"prototype",{value:42,writable:!1}).prototype})},6498:function(e,t,r){var n=r(1961).charAt,o=r(5773),i=r(8235),s=r(2838),a=r(2727),c="String Iterator",u=i.set,l=i.getterFor(c);s(String,"String",function(e){u(this,{type:c,string:o(e),index:0})},function(){var e,t=l(this),r=t.string,o=t.index;return o>=r.length?a(void 0,!0):(e=n(r,o),t.index+=e.length,a(e,!1))})},6553:function(e){e.exports=function(e){try{return{error:!1,value:e()}}catch(e){return{error:!0,value:e}}}},6570:function(e,t,r){var n,o,i,s,a=r(7132),c=r(8381),u=r(9375),l=r(4178),d=r(9701),f=r(9207),h=r(1746),p=r(7225),v=r(3101),y=r(3883),g=r(2192),m=r(3939),b=r(8928),w=r(909),S=r(1275),O=r(5735).set,E=r(7873),P=r(7411),x=r(6553),T=r(2715),k=r(8235),I=r(8856),C=r(5510),R=r(7853),A="Promise",j=C.CONSTRUCTOR,M=C.REJECTION_EVENT,N=C.SUBCLASSING,L=k.getterFor(A),_=k.set,D=I&&I.prototype,B=I,F=D,U=l.TypeError,W=l.document,z=l.process,V=R.f,G=V,q=!!(W&&W.createEvent&&l.dispatchEvent),H="unhandledrejection",$=function(e){var t;return!(!b(e)||!m(t=e.then))&&t},K=function(e,t){var r,n,o,i=t.value,s=1===t.state,a=s?e.ok:e.fail,c=e.resolve,u=e.reject,l=e.domain;try{a?(s||(2===t.rejection&&Z(t),t.rejection=1),!0===a?r=i:(l&&l.enter(),r=a(i),l&&(l.exit(),o=!0)),r===e.promise?u(new U("Promise-chain cycle")):(n=$(r))?f(n,r,c,u):c(r)):u(i)}catch(e){l&&!o&&l.exit(),u(e)}},J=function(e,t){e.notified||(e.notified=!0,E(function(){for(var r,n=e.reactions;r=n.get();)K(r,e);e.notified=!1,t&&!e.rejection&&Y(e)}))},Q=function(e,t,r){var n,o;q?((n=W.createEvent("Event")).promise=t,n.reason=r,n.initEvent(e,!1,!0),l.dispatchEvent(n)):n={promise:t,reason:r},!M&&(o=l["on"+e])?o(n):e===H&&P("Unhandled promise rejection",r)},Y=function(e){f(O,l,function(){var t,r=e.facade,n=e.value;if(X(e)&&(t=x(function(){u?z.emit("unhandledRejection",n,r):Q(H,r,n)}),e.rejection=u||X(e)?2:1,t.error))throw t.value})},X=function(e){return 1!==e.rejection&&!e.parent},Z=function(e){f(O,l,function(){var t=e.facade;u?z.emit("rejectionHandled",t):Q("rejectionhandled",t,e.value)})},ee=function(e,t,r){return function(n){e(t,n,r)}},te=function(e,t,r){e.done||(e.done=!0,r&&(e=r),e.value=t,e.state=2,J(e,!0))},re=function(e,t,r){if(!e.done){e.done=!0,r&&(e=r);try{if(e.facade===t)throw new U("Promise can't be resolved itself");var n=$(t);n?E(function(){var r={done:!1};try{f(n,t,ee(re,r,e),ee(te,r,e))}catch(t){te(r,t,e)}}):(e.value=t,e.state=1,J(e,!1))}catch(t){te({done:!1},t,e)}}};if(j&&(F=(B=function(e){w(this,F),g(e),f(n,this);var t=L(this);try{e(ee(re,t),ee(te,t))}catch(e){te(t,e)}}).prototype,(n=function(e){_(this,{type:A,done:!1,notified:!1,parent:!1,reactions:new T,rejection:!1,state:0,value:null})}).prototype=h(F,"then",function(e,t){var r=L(this),n=V(S(this,B));return r.parent=!0,n.ok=!m(e)||e,n.fail=m(t)&&t,n.domain=u?z.domain:void 0,0===r.state?r.reactions.add(n):E(function(){K(n,r)}),n.promise}),o=function(){var e=new n,t=L(e);this.promise=e,this.resolve=ee(re,t),this.reject=ee(te,t)},R.f=V=function(e){return e===B||e===i?new o(e):G(e)},!c&&m(I)&&D!==Object.prototype)){s=D.then,N||h(D,"then",function(e,t){var r=this;return new B(function(e,t){f(s,r,e,t)}).then(e,t)},{unsafe:!0});try{delete D.constructor}catch(e){}p&&p(D,F)}a({global:!0,constructor:!0,wrap:!0,forced:j},{Promise:B}),i=d.Promise,v(B,A,!1,!0),y(A)},6626:function(e,t,r){var n=r(8049),o=r(3939),i=/#|\.prototype\./,s=function(e,t){var r=c[a(e)];return r===l||r!==u&&(o(t)?n(t):!!t)},a=s.normalize=function(e){return String(e).replace(i,".").toLowerCase()},c=s.data={},u=s.NATIVE="N",l=s.POLYFILL="P";e.exports=s},6641:function(e,t,r){var n=r(4178),o=r(2013),i=r(2038),s=function(e){return o.slice(0,e.length)===e};e.exports=s("Bun/")?"BUN":s("Cloudflare-Workers")?"CLOUDFLARE":s("Deno/")?"DENO":s("Node.js/")?"NODE":n.Bun&&"string"==typeof Bun.version?"BUN":n.Deno&&"object"==typeof Deno.version?"DENO":"process"===i(n.process)?"NODE":n.window&&n.document?"BROWSER":"REST"},6644:function(e,t,r){var n=r(8038),o=r(7266),i=r(8224),s=URLSearchParams.prototype,a=o(s.forEach);n&&!("size"in s)&&i(s,"size",{get:function(){var e=0;return a(this,function(){e++}),e},configurable:!0,enumerable:!0})},6654:function(e,t,r){var n=r(8814),o=r(4061).concat("length","prototype");t.f=Object.getOwnPropertyNames||function(e){return n(e,o)}},6727:function(e,t,r){var n=r(8928);e.exports=function(e){return n(e)||null===e}},6754:function(e,t,r){var n=r(8049),o=r(1497),i=r(8038),s=r(8381),a=o("iterator");e.exports=!n(function(){var e=new URL("b?a=1&b=2&c=3","https://a"),t=e.searchParams,r=new URLSearchParams("a=1&a=2&b=3"),n="";return e.pathname="c%20d",t.forEach(function(e,r){t.delete("b"),n+=r+e}),r.delete("a",2),r.delete("b",void 0),s&&(!e.toJSON||!r.has("a",1)||r.has("a",2)||!r.has("a",void 0)||r.has("b"))||!t.size&&(s||!i)||!t.sort||"https://a/c%20d?a=1&c=3"!==e.href||"3"!==t.get("c")||"a=1"!==String(new URLSearchParams("?a=1"))||!t[a]||"a"!==new URL("https://a@b").username||"b"!==new URLSearchParams(new URLSearchParams("a=b")).get("a")||"xn--e1aybc"!==new URL("https://ÑÐµÑÑ").host||"#%D0%B1"!==new URL("https://a#Ð±").hash||"a1c3"!==n||"x"!==new URL("https://x",void 0).host})},6773:function(e,t,r){var n=r(6883),o=r(3939),i=r(1107),s=r(3721),a=r(233),c=s("IE_PROTO"),u=Object,l=u.prototype;e.exports=a?u.getPrototypeOf:function(e){var t=i(e);if(n(t,c))return t[c];var r=t.constructor;return o(r)&&t instanceof r?r.prototype:t instanceof u?l:null}},6781:function(e,t,r){var n=r(8928),o=String,i=TypeError;e.exports=function(e){if(n(e))return e;throw new i(o(e)+" is not an object")}},6883:function(e,t,r){var n=r(7266),o=r(1107),i=n({}.hasOwnProperty);e.exports=Object.hasOwn||function(e,t){return i(o(e),t)}},6932:function(e,t,r){var n=r(8990),o=r(7176),i=r(6208),s=r(3795),a=r(7657),c=o.add,u=o.has,l=o.remove;e.exports=function(e){var t=n(this),r=s(e).getIterator(),o=i(t);return a(r,function(e){u(t,e)?l(o,e):c(o,e)}),o}},7030:function(e,t,r){var n=r(6275).f;e.exports=function(e,t,r){r in e||n(e,r,{configurable:!0,get:function(){return t[r]},set:function(e){t[r]=e}})}},7060:function(e,t,r){r(6570),r(737),r(4209),r(185),r(7143),r(5686)},7069:function(e,t,r){var n=r(6781),o=r(25);e.exports=function(e,t,r,i){try{return i?t(n(r)[0],r[1]):t(r)}catch(t){o(e,"throw",t)}}},7095:function(e,t,r){var n=r(2013);e.exports=/ipad|iphone|ipod/i.test(n)&&"undefined"!=typeof Pebble},7120:function(e,t,r){var n=r(7266),o=r(2192);e.exports=function(e,t,r){try{return n(o(Object.getOwnPropertyDescriptor(e,t)[r]))}catch(e){}}},7132:function(e,t,r){var n=r(4178),o=r(4153).f,i=r(85),s=r(1746),a=r(3719),c=r(7486),u=r(6626);e.exports=function(e,t){var r,l,d,f,h,p=e.target,v=e.global,y=e.stat;if(r=v?n:y?n[p]||a(p,{}):n[p]&&n[p].prototype)for(l in t){if(f=t[l],d=e.dontCallGetSet?(h=o(r,l))&&h.value:r[l],!u(v?l:p+(y?".":"#")+l,e.forced)&&void 0!==d){if(typeof f==typeof d)continue;c(f,d)}(e.sham||d&&d.sham)&&i(f,"sham",!0),s(r,l,f,e)}}},7143:function(e,t,r){var n=r(7132),o=r(7853);n({target:"Promise",stat:!0,forced:r(5510).CONSTRUCTOR},{reject:function(e){var t=o.f(this);return(0,t.reject)(e),t.promise}})},7159:function(e,t,r){var n=r(449),o=r(3528);e.exports=function(e){return n(o(e))}},7176:function(e,t,r){var n=r(7266),o=Set.prototype;e.exports={Set,add:n(o.add),has:n(o.has),remove:n(o.delete),proto:o}},7217:function(e){e.exports=function(e){return{iterator:e,next:e.next,done:!1}}},7225:function(e,t,r){var n=r(7120),o=r(8928),i=r(3528),s=r(3700);e.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var e,t=!1,r={};try{(e=n(Object.prototype,"__proto__","set"))(r,[]),t=r instanceof Array}catch(e){}return function(r,n){return i(r),s(n),o(r)?(t?e(r,n):r.__proto__=n,r):r}}():void 0)},7266:function(e,t,r){var n=r(2218),o=Function.prototype,i=o.call,s=n&&o.bind.bind(i,i);e.exports=n?s:function(e){return function(){return i.apply(e,arguments)}}},7317:function(e,t,r){var n=r(8049),o=r(7570);e.exports=!n(function(){var e=new Error("a");return!("stack"in e)||(Object.defineProperty(e,"stack",o(1,7)),7!==e.stack)})},7331:function(e,t,r){var n=r(7266),o=2147483647,i=/[^\0-\u007E]/,s=/[.\u3002\uFF0E\uFF61]/g,a="Overflow: input needs wider integers to process",c=RangeError,u=n(s.exec),l=Math.floor,d=String.fromCharCode,f=n("".charCodeAt),h=n([].join),p=n([].push),v=n("".replace),y=n("".split),g=n("".toLowerCase),m=function(e){return e+22+75*(e<26)},b=function(e,t,r){var n=0;for(e=r?l(e/700):e>>1,e+=l(e/t);e>455;)e=l(e/35),n+=36;return l(n+36*e/(e+38))},w=function(e){var t=[];e=function(e){for(var t=[],r=0,n=e.length;r<n;){var o=f(e,r++);if(o>=55296&&o<=56319&&r<n){var i=f(e,r++);56320==(64512&i)?p(t,((1023&o)<<10)+(1023&i)+65536):(p(t,o),r--)}else p(t,o)}return t}(e);var r,n,i=e.length,s=128,u=0,v=72;for(r=0;r<e.length;r++)(n=e[r])<128&&p(t,d(n));var y=t.length,g=y;for(y&&p(t,"-");g<i;){var w=o;for(r=0;r<e.length;r++)(n=e[r])>=s&&n<w&&(w=n);var S=g+1;if(w-s>l((o-u)/S))throw new c(a);for(u+=(w-s)*S,s=w,r=0;r<e.length;r++){if((n=e[r])<s&&++u>o)throw new c(a);if(n===s){for(var O=u,E=36;;){var P=E<=v?1:E>=v+26?26:E-v;if(O<P)break;var x=O-P,T=36-P;p(t,d(m(P+x%T))),O=l(x/T),E+=36}p(t,d(m(O))),v=b(u,S,g===y),u=0,g++}}u++,s++}return h(t,"")};e.exports=function(e){var t,r,n=[],o=y(v(g(e),s,"."),".");for(t=0;t<o.length;t++)r=o[t],p(n,u(i,r)?"xn--"+w(r):r);return h(n,".")}},7391:function(e,t,r){var n=r(2555),o=r(135);e.exports=function(e){var t=n(e,"string");return o(t)?t:t+""}},7411:function(e){e.exports=function(e,t){try{1===arguments.length?console.error(e):console.error(e,t)}catch(e){}}},7486:function(e,t,r){var n=r(6883),o=r(8993),i=r(4153),s=r(6275);e.exports=function(e,t,r){for(var a=o(t),c=s.f,u=i.f,l=0;l<a.length;l++){var d=a[l];n(e,d)||r&&n(r,d)||c(e,d,u(t,d))}}},7570:function(e){e.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},7657:function(e,t,r){var n=r(9207);e.exports=function(e,t,r){for(var o,i,s=r?e:e.iterator,a=e.next;!(o=n(a,s)).done;)if(void 0!==(i=t(o.value)))return i}},7676:function(e,t,r){var n=r(2192),o=r(8375);e.exports=function(e,t){var r=e[t];return o(r)?void 0:n(r)}},7745:function(e,t,r){var n=r(1746),o=r(7266),i=r(5773),s=r(4122),a=URLSearchParams,c=a.prototype,u=o(c.append),l=o(c.delete),d=o(c.forEach),f=o([].push),h=new a("a=1&a=2&b=3");h.delete("a",1),h.delete("b",void 0),h+""!="a=2"&&n(c,"delete",function(e){var t=arguments.length,r=t<2?void 0:arguments[1];if(t&&void 0===r)return l(this,e);var n=[];d(this,function(e,t){f(n,{key:t,value:e})}),s(t,1);for(var o,a=i(e),c=i(r),h=0,p=0,v=!1,y=n.length;h<y;)o=n[h++],v||o.key===a?(v=!0,l(this,o.key)):p++;for(;p<y;)(o=n[p++]).key===a&&o.value===c||u(this,o.key,o.value)},{enumerable:!0,unsafe:!0})},7853:function(e,t,r){var n=r(2192),o=TypeError,i=function(e){var t,r;this.promise=new e(function(e,n){if(void 0!==t||void 0!==r)throw new o("Bad Promise constructor");t=e,r=n}),this.resolve=n(t),this.reject=n(r)};e.exports.f=function(e){return new i(e)}},7873:function(e,t,r){var n,o,i,s,a,c=r(4178),u=r(3379),l=r(298),d=r(5735).set,f=r(2715),h=r(5066),p=r(7095),v=r(5702),y=r(9375),g=c.MutationObserver||c.WebKitMutationObserver,m=c.document,b=c.process,w=c.Promise,S=u("queueMicrotask");if(!S){var O=new f,E=function(){var e,t;for(y&&(e=b.domain)&&e.exit();t=O.get();)try{t()}catch(e){throw O.head&&n(),e}e&&e.enter()};h||y||v||!g||!m?!p&&w&&w.resolve?((s=w.resolve(void 0)).constructor=w,a=l(s.then,s),n=function(){a(E)}):y?n=function(){b.nextTick(E)}:(d=l(d,c),n=function(){d(E)}):(o=!0,i=m.createTextNode(""),new g(E).observe(i,{characterData:!0}),n=function(){i.data=o=!o}),S=function(e){O.head||n(),O.add(e)}}e.exports=S},7903:function(e,t,r){var n=r(8038),o=r(8049),i=r(8145);e.exports=!n&&!o(function(){return 7!==Object.defineProperty(i("div"),"a",{get:function(){return 7}}).a})},8038:function(e,t,r){var n=r(8049);e.exports=!n(function(){return 7!==Object.defineProperty({},1,{get:function(){return 7}})[1]})},8049:function(e){e.exports=function(e){try{return!!e()}catch(e){return!0}}},8081:function(e){var t=String;e.exports=function(e){try{return t(e)}catch(e){return"Object"}}},8145:function(e,t,r){var n=r(4178),o=r(8928),i=n.document,s=o(i)&&o(i.createElement);e.exports=function(e){return s?i.createElement(e):{}}},8162:function(e){e.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}},8224:function(e,t,r){var n=r(433),o=r(6275);e.exports=function(e,t,r){return r.get&&n(r.get,t,{getter:!0}),r.set&&n(r.set,t,{setter:!0}),o.f(e,t,r)}},8235:function(e,t,r){var n,o,i,s=r(6316),a=r(4178),c=r(8928),u=r(85),l=r(6883),d=r(1487),f=r(3721),h=r(2651),p="Object already initialized",v=a.TypeError,y=a.WeakMap;if(s||d.state){var g=d.state||(d.state=new y);g.get=g.get,g.has=g.has,g.set=g.set,n=function(e,t){if(g.has(e))throw new v(p);return t.facade=e,g.set(e,t),t},o=function(e){return g.get(e)||{}},i=function(e){return g.has(e)}}else{var m=f("state");h[m]=!0,n=function(e,t){if(l(e,m))throw new v(p);return t.facade=e,u(e,m,t),t},o=function(e){return l(e,m)?e[m]:{}},i=function(e){return l(e,m)}}e.exports={set:n,get:o,has:i,enforce:function(e){return i(e)?o(e):n(e,{})},getterFor:function(e){return function(t){var r;if(!c(t)||(r=o(t)).type!==e)throw new v("Incompatible receiver, "+e+" required");return r}}}},8261:function(e,t,r){var n=r(3939),o=r(8928),i=r(7225);e.exports=function(e,t,r){var s,a;return i&&n(s=t.constructor)&&s!==r&&o(a=s.prototype)&&a!==r.prototype&&i(e,a),e}},8328:function(e,t,r){var n=r(8990),o=r(7176),i=r(268),s=r(3795),a=r(831),c=r(7657),u=o.Set,l=o.add,d=o.has;e.exports=function(e){var t=n(this),r=s(e),o=new u;return i(t)>r.size?c(r.getIterator(),function(e){d(t,e)&&l(o,e)}):a(t,function(e){r.includes(e)&&l(o,e)}),o}},8370:function(e,t,r){var n=r(8985),o=function(e){return{size:e,has:function(){return!1},keys:function(){return{next:function(){return{done:!0}}}}}},i=function(e){return{size:e,has:function(){return!0},keys:function(){throw new Error("e")}}};e.exports=function(e,t){var r=n("Set");try{(new r)[e](o(0));try{return(new r)[e](o(-1)),!1}catch(n){if(!t)return!0;try{return(new r)[e](i(-1/0)),!1}catch(n){var s=new r;return s.add(1),s.add(2),t(s[e](i(1/0)))}}}catch(e){return!1}}},8375:function(e){e.exports=function(e){return null==e}},8381:function(e){e.exports=!1},8419:function(e,t){var r={}.propertyIsEnumerable,n=Object.getOwnPropertyDescriptor,o=n&&!r.call({1:2},1);t.f=o?function(e){var t=n(this,e);return!!t&&t.enumerable}:r},8657:function(e,t,r){var n=r(4201),o=r(7676),i=r(8375),s=r(9695),a=r(1497)("iterator");e.exports=function(e){if(!i(e))return o(e,a)||o(e,"@@iterator")||s[n(e)]}},8723:function(e,t,r){var n=r(8990),o=r(7176).has,i=r(268),s=r(3795),a=r(831),c=r(7657),u=r(25);e.exports=function(e){var t=n(this),r=s(e);if(i(t)<=r.size)return!1!==a(t,function(e){if(r.includes(e))return!1},!0);var l=r.getIterator();return!1!==c(l,function(e){if(o(t,e))return u(l,"normal",!1)})}},8814:function(e,t,r){var n=r(7266),o=r(6883),i=r(7159),s=r(307).indexOf,a=r(2651),c=n([].push);e.exports=function(e,t){var r,n=i(e),u=0,l=[];for(r in n)!o(a,r)&&o(n,r)&&c(l,r);for(;t.length>u;)o(n,r=t[u++])&&(~s(l,r)||c(l,r));return l}},8856:function(e,t,r){var n=r(4178);e.exports=n.Promise},8904:function(e,t,r){var n=r(9315).IteratorPrototype,o=r(2562),i=r(7570),s=r(3101),a=r(9695),c=function(){return this};e.exports=function(e,t,r,u){var l=t+" Iterator";return e.prototype=o(n,{next:i(+!u,r)}),s(e,l,!1,!0),a[l]=c,e}},8928:function(e,t,r){var n=r(3939);e.exports=function(e){return"object"==typeof e?null!==e:n(e)}},8943:function(e){var t=Math.ceil,r=Math.floor;e.exports=Math.trunc||function(e){var n=+e;return(n>0?r:t)(n)}},8985:function(e,t,r){var n=r(4178),o=r(3939);e.exports=function(e,t){return arguments.length<2?(r=n[e],o(r)?r:void 0):n[e]&&n[e][t];var r}},8990:function(e,t,r){var n=r(7176).has;e.exports=function(e){return n(e),e}},8993:function(e,t,r){var n=r(8985),o=r(7266),i=r(6654),s=r(5235),a=r(6781),c=o([].concat);e.exports=n("Reflect","ownKeys")||function(e){var t=i.f(a(e)),r=s.f;return r?c(t,r(e)):t}},9095:function(e,t,r){var n=r(4178),o=r(8162),i=r(3462),s=r(730),a=r(85),c=r(3101),u=r(1497)("iterator"),l=s.values,d=function(e,t){if(e){if(e[u]!==l)try{a(e,u,l)}catch(t){e[u]=l}if(c(e,t,!0),o[t])for(var r in s)if(e[r]!==s[r])try{a(e,r,s[r])}catch(t){e[r]=s[r]}}};for(var f in o)d(n[f]&&n[f].prototype,f);d(i,"DOMTokenList")},9207:function(e,t,r){var n=r(2218),o=Function.prototype.call;e.exports=n?o.bind(o):function(){return o.apply(o,arguments)}},9215:function(e,t,r){var n=r(9207),o=r(2192),i=r(6781),s=r(8081),a=r(8657),c=TypeError;e.exports=function(e,t){var r=arguments.length<2?a(e):t;if(o(r))return i(n(r,e));throw new c(s(e)+" is not iterable")}},9315:function(e,t,r){var n,o,i,s=r(8049),a=r(3939),c=r(8928),u=r(2562),l=r(6773),d=r(1746),f=r(1497),h=r(8381),p=f("iterator"),v=!1;[].keys&&("next"in(i=[].keys())?(o=l(l(i)))!==Object.prototype&&(n=o):v=!0),!c(n)||s(function(){var e={};return n[p].call(e)!==e})?n={}:h&&(n=u(n)),a(n[p])||d(n,p,function(){return this}),e.exports={IteratorPrototype:n,BUGGY_SAFARI_ITERATORS:v}},9361:function(e,t,r){var n=r(8038),o=r(9962),i=TypeError,s=Object.getOwnPropertyDescriptor,a=n&&!function(){if(void 0!==this)return!0;try{Object.defineProperty([],"length",{writable:!1}).length=1}catch(e){return e instanceof TypeError}}();e.exports=a?function(e,t){if(o(e)&&!s(e,"length").writable)throw new i("Cannot set read only .length");return e.length=t}:function(e,t){return e.length=t}},9368:function(e,t,r){var n=r(8049),o=r(4178).RegExp;e.exports=n(function(){var e=o("(?<a>b)","g");return"b"!==e.exec("b").groups.a||"bc"!=="b".replace(e,"$<a>c")})},9375:function(e,t,r){var n=r(6641);e.exports="NODE"===n},9695:function(e){e.exports={}},9701:function(e,t,r){var n=r(4178);e.exports=n},9717:function(e,t,r){var n=r(7132),o=r(2889);n({target:"RegExp",proto:!0,forced:/./.exec!==o},{exec:o})},9807:function(e,t,r){var n=r(1487);e.exports=function(e,t){return n[e]||(n[e]=t||{})}},9860:function(e,t,r){var n=r(7132),o=r(4649),i=r(1733);n({target:"Set",proto:!0,real:!0,forced:!r(8370)("union")||!i("union")},{union:o})},9962:function(e,t,r){var n=r(2038);e.exports=Array.isArray||function(e){return"Array"===n(e)}}},t={};function r(n){var o=t[n];if(void 0!==o)return o.exports;var i=t[n]={exports:{}};return e[n].call(i.exports,i,i.exports,r),i.exports}r.d=function(e,t){for(var n in t)r.o(t,n)&&!r.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},r.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)};var n={};r.d(n,{default:function(){return lo}});r(466),r(1904),r(7060),r(5048),r(9095);var o="object"==typeof globalThis?globalThis:"object"==typeof self?self:"object"==typeof window?window:"object"==typeof r.g?r.g:{},i="1.9.0",s=/^(\d+)\.(\d+)\.(\d+)(-(.+))?$/;var a=function(e){var t=new Set([e]),r=new Set,n=e.match(s);if(!n)return function(){return!1};var o=+n[1],i=+n[2],a=+n[3];if(null!=n[4])return function(t){return t===e};function c(e){return r.add(e),!1}function u(e){return t.add(e),!0}return function(e){if(t.has(e))return!0;if(r.has(e))return!1;var n=e.match(s);if(!n)return c(e);var l=+n[1],d=+n[2],f=+n[3];return null!=n[4]||o!==l?c(e):0===o?i===d&&a<=f?u(e):c(e):i<=d?u(e):c(e)}}(i),c=i.split(".")[0],u=Symbol.for("opentelemetry.js.api."+c),l=o;function d(e,t,r,n){var o;void 0===n&&(n=!1);var s=l[u]=null!==(o=l[u])&&void 0!==o?o:{version:i};if(!n&&s[e]){var a=new Error("@opentelemetry/api: Attempted duplicate registration of API: "+e);return r.error(a.stack||a.message),!1}if(s.version!==i){a=new Error("@opentelemetry/api: Registration of version v"+s.version+" for "+e+" does not match previously registered API v"+i);return r.error(a.stack||a.message),!1}return s[e]=t,r.debug("@opentelemetry/api: Registered a global for "+e+" v"+i+"."),!0}function f(e){var t,r,n=null===(t=l[u])||void 0===t?void 0:t.version;if(n&&a(n))return null===(r=l[u])||void 0===r?void 0:r[e]}function h(e,t){t.debug("@opentelemetry/api: Unregistering a global for "+e+" v"+i+".");var r=l[u];r&&delete r[e]}function p(e){return Symbol.for(e)}var v,y=function e(t){var r=this;r._currentContext=t?new Map(t):new Map,r.getValue=function(e){return r._currentContext.get(e)},r.setValue=function(t,n){var o=new e(r._currentContext);return o._currentContext.set(t,n),o},r.deleteValue=function(t){var n=new e(r._currentContext);return n._currentContext.delete(t),n}},g=new y,m=function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,o,i=r.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(n=i.next()).done;)s.push(n.value)}catch(e){o={error:e}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return s},b=function(e,t,r){if(r||2===arguments.length)for(var n,o=0,i=t.length;o<i;o++)!n&&o in t||(n||(n=Array.prototype.slice.call(t,0,o)),n[o]=t[o]);return e.concat(n||Array.prototype.slice.call(t))},w=function(){function e(){}return e.prototype.active=function(){return g},e.prototype.with=function(e,t,r){for(var n=[],o=3;o<arguments.length;o++)n[o-3]=arguments[o];return t.call.apply(t,b([r],m(n),!1))},e.prototype.bind=function(e,t){return t},e.prototype.enable=function(){return this},e.prototype.disable=function(){return this},e}(),S=function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,o,i=r.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(n=i.next()).done;)s.push(n.value)}catch(e){o={error:e}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return s},O=function(e,t,r){if(r||2===arguments.length)for(var n,o=0,i=t.length;o<i;o++)!n&&o in t||(n||(n=Array.prototype.slice.call(t,0,o)),n[o]=t[o]);return e.concat(n||Array.prototype.slice.call(t))},E=function(){function e(e){this._namespace=e.namespace||"DiagComponentLogger"}return e.prototype.debug=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return P("debug",this._namespace,e)},e.prototype.error=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return P("error",this._namespace,e)},e.prototype.info=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return P("info",this._namespace,e)},e.prototype.warn=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return P("warn",this._namespace,e)},e.prototype.verbose=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return P("verbose",this._namespace,e)},e}();function P(e,t,r){var n=f("diag");if(n)return r.unshift(t),n[e].apply(n,O([],S(r),!1))}!function(e){e[e.NONE=0]="NONE",e[e.ERROR=30]="ERROR",e[e.WARN=50]="WARN",e[e.INFO=60]="INFO",e[e.DEBUG=70]="DEBUG",e[e.VERBOSE=80]="VERBOSE",e[e.ALL=9999]="ALL"}(v||(v={}));var x,T=function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,o,i=r.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(n=i.next()).done;)s.push(n.value)}catch(e){o={error:e}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return s},k=function(e,t,r){if(r||2===arguments.length)for(var n,o=0,i=t.length;o<i;o++)!n&&o in t||(n||(n=Array.prototype.slice.call(t,0,o)),n[o]=t[o]);return e.concat(n||Array.prototype.slice.call(t))},I=function(){function e(){function e(e){return function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];var n=f("diag");if(n)return n[e].apply(n,k([],T(t),!1))}}var t=this;t.setLogger=function(e,r){var n,o,i;if(void 0===r&&(r={logLevel:v.INFO}),e===t){var s=new Error("Cannot use diag as the logger for itself. Please use a DiagLogger implementation like ConsoleDiagLogger or a custom implementation");return t.error(null!==(n=s.stack)&&void 0!==n?n:s.message),!1}"number"==typeof r&&(r={logLevel:r});var a=f("diag"),c=function(e,t){function r(r,n){var o=t[r];return"function"==typeof o&&e>=n?o.bind(t):function(){}}return e<v.NONE?e=v.NONE:e>v.ALL&&(e=v.ALL),t=t||{},{error:r("error",v.ERROR),warn:r("warn",v.WARN),info:r("info",v.INFO),debug:r("debug",v.DEBUG),verbose:r("verbose",v.VERBOSE)}}(null!==(o=r.logLevel)&&void 0!==o?o:v.INFO,e);if(a&&!r.suppressOverrideMessage){var u=null!==(i=(new Error).stack)&&void 0!==i?i:"<failed to generate stacktrace>";a.warn("Current logger will be overwritten from "+u),c.warn("Current logger will overwrite one already registered from "+u)}return d("diag",c,t,!0)},t.disable=function(){h("diag",t)},t.createComponentLogger=function(e){return new E(e)},t.verbose=e("verbose"),t.debug=e("debug"),t.info=e("info"),t.warn=e("warn"),t.error=e("error")}return e.instance=function(){return this._instance||(this._instance=new e),this._instance},e}(),C=function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,o,i=r.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(n=i.next()).done;)s.push(n.value)}catch(e){o={error:e}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return s},R=function(e,t,r){if(r||2===arguments.length)for(var n,o=0,i=t.length;o<i;o++)!n&&o in t||(n||(n=Array.prototype.slice.call(t,0,o)),n[o]=t[o]);return e.concat(n||Array.prototype.slice.call(t))},A="context",j=new w,M=function(){function e(){}return e.getInstance=function(){return this._instance||(this._instance=new e),this._instance},e.prototype.setGlobalContextManager=function(e){return d(A,e,I.instance())},e.prototype.active=function(){return this._getContextManager().active()},e.prototype.with=function(e,t,r){for(var n,o=[],i=3;i<arguments.length;i++)o[i-3]=arguments[i];return(n=this._getContextManager()).with.apply(n,R([e,t,r],C(o),!1))},e.prototype.bind=function(e,t){return this._getContextManager().bind(e,t)},e.prototype._getContextManager=function(){return f(A)||j},e.prototype.disable=function(){this._getContextManager().disable(),h(A,I.instance())},e}();!function(e){e[e.NONE=0]="NONE",e[e.SAMPLED=1]="SAMPLED"}(x||(x={}));var N="0000000000000000",L="00000000000000000000000000000000",_={traceId:L,spanId:N,traceFlags:x.NONE},D=function(){function e(e){void 0===e&&(e=_),this._spanContext=e}return e.prototype.spanContext=function(){return this._spanContext},e.prototype.setAttribute=function(e,t){return this},e.prototype.setAttributes=function(e){return this},e.prototype.addEvent=function(e,t){return this},e.prototype.addLink=function(e){return this},e.prototype.addLinks=function(e){return this},e.prototype.setStatus=function(e){return this},e.prototype.updateName=function(e){return this},e.prototype.end=function(e){},e.prototype.isRecording=function(){return!1},e.prototype.recordException=function(e,t){},e}(),B=p("OpenTelemetry Context Key SPAN");function F(e){return e.getValue(B)||void 0}function U(){return F(M.getInstance().active())}function W(e,t){return e.setValue(B,t)}function z(e){return e.deleteValue(B)}function V(e,t){return W(e,new D(t))}function G(e){var t;return null===(t=F(e))||void 0===t?void 0:t.spanContext()}var q=/^([0-9a-f]{32})$/i,H=/^[0-9a-f]{16}$/i;function $(e){return r=e.traceId,q.test(r)&&r!==L&&(t=e.spanId,H.test(t)&&t!==N);var t,r}function K(e){return new D(e)}var J=M.getInstance(),Q=function(){function e(){}return e.prototype.startSpan=function(e,t,r){if(void 0===r&&(r=J.active()),Boolean(null==t?void 0:t.root))return new D;var n,o=r&&G(r);return"object"==typeof(n=o)&&"string"==typeof n.spanId&&"string"==typeof n.traceId&&"number"==typeof n.traceFlags&&$(o)?new D(o):new D},e.prototype.startActiveSpan=function(e,t,r,n){var o,i,s;if(!(arguments.length<2)){2===arguments.length?s=t:3===arguments.length?(o=t,s=r):(o=t,i=r,s=n);var a=null!=i?i:J.active(),c=this.startSpan(e,o,a),u=W(a,c);return J.with(u,s,void 0,c)}},e}();var Y=new Q,X=function(){function e(e,t,r,n){this._provider=e,this.name=t,this.version=r,this.options=n}return e.prototype.startSpan=function(e,t,r){return this._getTracer().startSpan(e,t,r)},e.prototype.startActiveSpan=function(e,t,r,n){var o=this._getTracer();return Reflect.apply(o.startActiveSpan,o,arguments)},e.prototype._getTracer=function(){if(this._delegate)return this._delegate;var e=this._provider.getDelegateTracer(this.name,this.version,this.options);return e?(this._delegate=e,this._delegate):Y},e}(),Z=new(function(){function e(){}return e.prototype.getTracer=function(e,t,r){return new Q},e}()),ee=function(){function e(){}return e.prototype.getTracer=function(e,t,r){var n;return null!==(n=this.getDelegateTracer(e,t,r))&&void 0!==n?n:new X(this,e,t,r)},e.prototype.getDelegate=function(){var e;return null!==(e=this._delegate)&&void 0!==e?e:Z},e.prototype.setDelegate=function(e){this._delegate=e},e.prototype.getDelegateTracer=function(e,t,r){var n;return null===(n=this._delegate)||void 0===n?void 0:n.getTracer(e,t,r)},e}(),te="trace",re=function(){function e(){this._proxyTracerProvider=new ee,this.wrapSpanContext=K,this.isSpanContextValid=$,this.deleteSpan=z,this.getSpan=F,this.getActiveSpan=U,this.getSpanContext=G,this.setSpan=W,this.setSpanContext=V}return e.getInstance=function(){return this._instance||(this._instance=new e),this._instance},e.prototype.setGlobalTracerProvider=function(e){var t=d(te,this._proxyTracerProvider,I.instance());return t&&this._proxyTracerProvider.setDelegate(e),t},e.prototype.getTracerProvider=function(){return f(te)||this._proxyTracerProvider},e.prototype.getTracer=function(e,t){return this.getTracerProvider().getTracer(e,t)},e.prototype.disable=function(){h(te,I.instance()),this._proxyTracerProvider=new ee},e}().getInstance(),ne=M.getInstance(),oe=p("OpenTelemetry SDK Context Key SUPPRESS_TRACING");function ie(e){return e.setValue(oe,!0)}function se(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var ae={},ce=Uint8Array,ue=Uint16Array,le=Int32Array,de=new ce([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),fe=new ce([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),he=new ce([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),pe=function(e,t){for(var r=new ue(31),n=0;n<31;++n)r[n]=t+=1<<e[n-1];var o=new le(r[30]);for(n=1;n<30;++n)for(var i=r[n];i<r[n+1];++i)o[i]=i-r[n]<<5|n;return{b:r,r:o}},ve=pe(de,2),ye=ve.b,ge=ve.r;ye[28]=258,ge[258]=28;for(var me=pe(fe,0),be=(me.b,me.r),we=new ue(32768),Se=0;Se<32768;++Se){var Oe=(43690&Se)>>1|(21845&Se)<<1;Oe=(61680&(Oe=(52428&Oe)>>2|(13107&Oe)<<2))>>4|(3855&Oe)<<4,we[Se]=((65280&Oe)>>8|(255&Oe)<<8)>>1}var Ee=function(e,t,r){for(var n=e.length,o=0,i=new ue(t);o<n;++o)e[o]&&++i[e[o]-1];var s,a=new ue(t);for(o=1;o<t;++o)a[o]=a[o-1]+i[o-1]<<1;if(r){s=new ue(1<<t);var c=15-t;for(o=0;o<n;++o)if(e[o])for(var u=o<<4|e[o],l=t-e[o],d=a[e[o]-1]++<<l,f=d|(1<<l)-1;d<=f;++d)s[we[d]>>c]=u}else for(s=new ue(n),o=0;o<n;++o)e[o]&&(s[o]=we[a[e[o]-1]++]>>15-e[o]);return s},Pe=new ce(288);for(Se=0;Se<144;++Se)Pe[Se]=8;for(Se=144;Se<256;++Se)Pe[Se]=9;for(Se=256;Se<280;++Se)Pe[Se]=7;for(Se=280;Se<288;++Se)Pe[Se]=8;var xe=new ce(32);for(Se=0;Se<32;++Se)xe[Se]=5;var Te=Ee(Pe,9,0),ke=Ee(xe,5,0),Ie=function(e){return(e+7)/8|0},Ce=function(e,t,r){return(null==t||t<0)&&(t=0),(null==r||r>e.length)&&(r=e.length),new ce(e.subarray(t,r))},Re=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],Ae=function(e,t,r){var n=new Error(t||Re[e]);if(n.code=e,Error.captureStackTrace&&Error.captureStackTrace(n,Ae),!r)throw n;return n},je=function(e,t,r){r<<=7&t;var n=t/8|0;e[n]|=r,e[n+1]|=r>>8},Me=function(e,t,r){r<<=7&t;var n=t/8|0;e[n]|=r,e[n+1]|=r>>8,e[n+2]|=r>>16},Ne=function(e,t){for(var r=[],n=0;n<e.length;++n)e[n]&&r.push({s:n,f:e[n]});var o=r.length,i=r.slice();if(!o)return{t:We,l:0};if(1==o){var s=new ce(r[0].s+1);return s[r[0].s]=1,{t:s,l:1}}r.sort(function(e,t){return e.f-t.f}),r.push({s:-1,f:25001});var a=r[0],c=r[1],u=0,l=1,d=2;for(r[0]={s:-1,f:a.f+c.f,l:a,r:c};l!=o-1;)a=r[r[u].f<r[d].f?u++:d++],c=r[u!=l&&r[u].f<r[d].f?u++:d++],r[l++]={s:-1,f:a.f+c.f,l:a,r:c};var f=i[0].s;for(n=1;n<o;++n)i[n].s>f&&(f=i[n].s);var h=new ue(f+1),p=Le(r[l-1],h,0);if(p>t){n=0;var v=0,y=p-t,g=1<<y;for(i.sort(function(e,t){return h[t.s]-h[e.s]||e.f-t.f});n<o;++n){var m=i[n].s;if(!(h[m]>t))break;v+=g-(1<<p-h[m]),h[m]=t}for(v>>=y;v>0;){var b=i[n].s;h[b]<t?v-=1<<t-h[b]++-1:++n}for(;n>=0&&v;--n){var w=i[n].s;h[w]==t&&(--h[w],++v)}p=t}return{t:new ce(h),l:p}},Le=function(e,t,r){return-1==e.s?Math.max(Le(e.l,t,r+1),Le(e.r,t,r+1)):t[e.s]=r},_e=function(e){for(var t=e.length;t&&!e[--t];);for(var r=new ue(++t),n=0,o=e[0],i=1,s=function(e){r[n++]=e},a=1;a<=t;++a)if(e[a]==o&&a!=t)++i;else{if(!o&&i>2){for(;i>138;i-=138)s(32754);i>2&&(s(i>10?i-11<<5|28690:i-3<<5|12305),i=0)}else if(i>3){for(s(o),--i;i>6;i-=6)s(8304);i>2&&(s(i-3<<5|8208),i=0)}for(;i--;)s(o);i=1,o=e[a]}return{c:r.subarray(0,n),n:t}},De=function(e,t){for(var r=0,n=0;n<t.length;++n)r+=e[n]*t[n];return r},Be=function(e,t,r){var n=r.length,o=Ie(t+2);e[o]=255&n,e[o+1]=n>>8,e[o+2]=255^e[o],e[o+3]=255^e[o+1];for(var i=0;i<n;++i)e[o+i+4]=r[i];return 8*(o+4+n)},Fe=function(e,t,r,n,o,i,s,a,c,u,l){je(t,l++,r),++o[256];for(var d=Ne(o,15),f=d.t,h=d.l,p=Ne(i,15),v=p.t,y=p.l,g=_e(f),m=g.c,b=g.n,w=_e(v),S=w.c,O=w.n,E=new ue(19),P=0;P<m.length;++P)++E[31&m[P]];for(P=0;P<S.length;++P)++E[31&S[P]];for(var x=Ne(E,7),T=x.t,k=x.l,I=19;I>4&&!T[he[I-1]];--I);var C,R,A,j,M=u+5<<3,N=De(o,Pe)+De(i,xe)+s,L=De(o,f)+De(i,v)+s+14+3*I+De(E,T)+2*E[16]+3*E[17]+7*E[18];if(c>=0&&M<=N&&M<=L)return Be(t,l,e.subarray(c,c+u));if(je(t,l,1+(L<N)),l+=2,L<N){C=Ee(f,h,0),R=f,A=Ee(v,y,0),j=v;var _=Ee(T,k,0);je(t,l,b-257),je(t,l+5,O-1),je(t,l+10,I-4),l+=14;for(P=0;P<I;++P)je(t,l+3*P,T[he[P]]);l+=3*I;for(var D=[m,S],B=0;B<2;++B){var F=D[B];for(P=0;P<F.length;++P){var U=31&F[P];je(t,l,_[U]),l+=T[U],U>15&&(je(t,l,F[P]>>5&127),l+=F[P]>>12)}}}else C=Te,R=Pe,A=ke,j=xe;for(P=0;P<a;++P){var W=n[P];if(W>255){Me(t,l,C[(U=W>>18&31)+257]),l+=R[U+257],U>7&&(je(t,l,W>>23&31),l+=de[U]);var z=31&W;Me(t,l,A[z]),l+=j[z],z>3&&(Me(t,l,W>>5&8191),l+=fe[z])}else Me(t,l,C[W]),l+=R[W]}return Me(t,l,C[256]),l+R[256]},Ue=new le([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),We=new ce(0),ze=function(e,t,r,n,o,i){var s=i.z||e.length,a=new ce(n+s+5*(1+Math.ceil(s/7e3))+o),c=a.subarray(n,a.length-o),u=i.l,l=7&(i.r||0);if(t){l&&(c[0]=i.r>>3);for(var d=Ue[t-1],f=d>>13,h=8191&d,p=(1<<r)-1,v=i.p||new ue(32768),y=i.h||new ue(p+1),g=Math.ceil(r/3),m=2*g,b=function(t){return(e[t]^e[t+1]<<g^e[t+2]<<m)&p},w=new le(25e3),S=new ue(288),O=new ue(32),E=0,P=0,x=i.i||0,T=0,k=i.w||0,I=0;x+2<s;++x){var C=b(x),R=32767&x,A=y[C];if(v[R]=A,y[C]=R,k<=x){var j=s-x;if((E>7e3||T>24576)&&(j>423||!u)){l=Fe(e,c,0,w,S,O,P,T,I,x-I,l),T=E=P=0,I=x;for(var M=0;M<286;++M)S[M]=0;for(M=0;M<30;++M)O[M]=0}var N=2,L=0,_=h,D=R-A&32767;if(j>2&&C==b(x-D))for(var B=Math.min(f,j)-1,F=Math.min(32767,x),U=Math.min(258,j);D<=F&&--_&&R!=A;){if(e[x+N]==e[x+N-D]){for(var W=0;W<U&&e[x+W]==e[x+W-D];++W);if(W>N){if(N=W,L=D,W>B)break;var z=Math.min(D,W-2),V=0;for(M=0;M<z;++M){var G=x-D+M&32767,q=G-v[G]&32767;q>V&&(V=q,A=G)}}}D+=(R=A)-(A=v[R])&32767}if(L){w[T++]=268435456|ge[N]<<18|be[L];var H=31&ge[N],$=31&be[L];P+=de[H]+fe[$],++S[257+H],++O[$],k=x+N,++E}else w[T++]=e[x],++S[e[x]]}}for(x=Math.max(x,k);x<s;++x)w[T++]=e[x],++S[e[x]];l=Fe(e,c,u,w,S,O,P,T,I,x-I,l),u||(i.r=7&l|c[l/8|0]<<3,l-=7,i.h=y,i.p=v,i.i=x,i.w=k)}else{for(x=i.w||0;x<s+u;x+=65535){var K=x+65535;K>=s&&(c[l/8|0]=u,K=s),l=Be(c,l+1,e.subarray(x,K))}i.i=s}return Ce(a,0,n+Ie(l)+o)},Ve=function(){for(var e=new Int32Array(256),t=0;t<256;++t){for(var r=t,n=9;--n;)r=(1&r&&-306674912)^r>>>1;e[t]=r}return e}(),Ge=function(){var e=-1;return{p:function(t){for(var r=e,n=0;n<t.length;++n)r=Ve[255&r^t[n]]^r>>>8;e=r},d:function(){return~e}}},qe=function(e,t,r,n,o){if(!o&&(o={l:1},t.dictionary)){var i=t.dictionary.subarray(-32768),s=new ce(i.length+e.length);s.set(i),s.set(e,i.length),e=s,o.w=i.length}return ze(e,null==t.level?6:t.level,null==t.mem?o.l?Math.ceil(1.5*Math.max(8,Math.min(13,Math.log(e.length)))):20:12+t.mem,r,n,o)},He=function(e,t){var r={};for(var n in e)r[n]=e[n];for(var n in t)r[n]=t[n];return r},$e=function(e,t,r){for(var n=e(),o=e.toString(),i=o.slice(o.indexOf("[")+1,o.lastIndexOf("]")).replace(/\s+/g,"").split(","),s=0;s<n.length;++s){var a=n[s],c=i[s];if("function"==typeof a){t+=";"+c+"=";var u=a.toString();if(a.prototype)if(-1!=u.indexOf("[native code]")){var l=u.indexOf(" ",8)+1;t+=u.slice(l,u.indexOf("(",l))}else for(var d in t+=u,a.prototype)t+=";"+c+".prototype."+d+"="+a.prototype[d].toString();else t+=u}else r[c]=a}return t},Ke=[],Je=function(e,t,r,n){if(!Ke[r]){for(var o="",i={},s=e.length-1,a=0;a<s;++a)o=$e(e[a],o,i);Ke[r]={c:$e(e[s],o,i),e:i}}var c=He({},Ke[r].e);return function(e,t,r,n,o){var i=new Worker(ae[t]||(ae[t]=URL.createObjectURL(new Blob([e+';addEventListener("error",function(e){e=e.error;postMessage({$e$:[e.message,e.code,e.stack]})})'],{type:"text/javascript"}))));return i.onmessage=function(e){var t=e.data,r=t.$e$;if(r){var n=new Error(r[0]);n.code=r[1],n.stack=r[2],o(n,null)}else o(null,t)},i.postMessage(r,n),i}(Ke[r].c+";onmessage=function(e){for(var k in e.data)self[k]=e.data[k];onmessage="+t.toString()+"}",r,c,function(e){var t=[];for(var r in e)e[r].buffer&&t.push((e[r]=new e[r].constructor(e[r])).buffer);return t}(c),n)},Qe=function(){return[ce,ue,le,de,fe,he,ge,be,Te,Pe,ke,xe,we,Ue,We,Ee,je,Me,Ne,Le,_e,De,Be,Fe,Ie,Ce,ze,qe,nt,Xe]},Ye=function(){return[tt,rt,et,Ge,Ve]},Xe=function(e){return postMessage(e,[e.buffer])},Ze=function(e,t,r,n,o,i){var s=Je(r,n,o,function(e,t){s.terminate(),i(e,t)});return s.postMessage([e,t],t.consume?[e.buffer]:[]),function(){s.terminate()}},et=function(e,t,r){for(;r;++t)e[t]=r,r>>>=8},tt=function(e,t){var r=t.filename;if(e[0]=31,e[1]=139,e[2]=8,e[8]=t.level<2?4:9==t.level?2:0,e[9]=3,0!=t.mtime&&et(e,4,Math.floor(new Date(t.mtime||Date.now())/1e3)),r){e[3]=8;for(var n=0;n<=r.length;++n)e[n+10]=r.charCodeAt(n)}},rt=function(e){return 10+(e.filename?e.filename.length+1:0)};function nt(e,t){return qe(e,t||{},0,0)}function ot(e,t){t||(t={});var r=Ge(),n=e.length;r.p(e);var o=qe(e,t,rt(t),8),i=o.length;return tt(o,t),et(o,i-8,r.d()),et(o,i-4,n),o}var it="undefined"!=typeof TextEncoder&&new TextEncoder,st="undefined"!=typeof TextDecoder&&new TextDecoder;try{st.decode(We,{stream:!0})}catch(ut){}function at(e,t){if(t){for(var r=new ce(e.length),n=0;n<e.length;++n)r[n]=e.charCodeAt(n);return r}if(it)return it.encode(e);var o=e.length,i=new ce(e.length+(e.length>>1)),s=0,a=function(e){i[s++]=e};for(n=0;n<o;++n){if(s+5>i.length){var c=new ce(s+8+(o-n<<1));c.set(i),i=c}var u=e.charCodeAt(n);u<128||t?a(u):u<2048?(a(192|u>>6),a(128|63&u)):u>55295&&u<57344?(a(240|(u=65536+(1047552&u)|1023&e.charCodeAt(++n))>>18),a(128|u>>12&63),a(128|u>>6&63),a(128|63&u)):(a(224|u>>12),a(128|u>>6&63),a(128|63&u))}return Ce(i,0,s)}"function"==typeof queueMicrotask?queueMicrotask:"function"==typeof setTimeout&&setTimeout;const ct="0.23.1";var ut={3460:function(){"arrayBuffer"in Blob.prototype||Object.defineProperty(Blob.prototype,"arrayBuffer",{value:function(){return new Response(this).arrayBuffer()}})},8396:function(){Element.prototype.append||(Element.prototype.append=Element.prototype.appendChild)},804:function(){Event.prototype.composedPath||(Event.prototype.composedPath=function(){let e=this.target,t=[];for(;e;)t.push(e),e=e.parentNode;return t.push(window),t})},5965:function(){Object.hasOwn||Object.defineProperty(Object,"hasOwn",{configurable:!0,enumerable:!1,value:function(e,t){if(null==e)throw TypeError("Cannot convert undefined or null to object");return Object.prototype.hasOwnProperty.call(Object(e),t)},writable:!0}),Object.assign||(Object.assign=function(...e){let t=e[0];if(null==t)throw TypeError("Cannot convert undefined or null to object");let r=Object(t);for(let t=1;t<e.length;t++){let n=e[t];if(null!=n)for(let e in n)Object.hasOwn(n,e)&&(r[e]=n[e])}return r}),Object.fromEntries||(Object.fromEntries=e=>[...e].reduce((e,[t,r])=>(e[t]=r,e),{})),Object.entries||(Object.entries=e=>Object.keys(e).map(t=>[t,e[t]])),Object.values||(Object.values=e=>Object.keys(e).map(t=>e[t]))},533:function(){function e(e,t,r,n,o,i,s){try{var a=e[i](s),c=a.value}catch(e){return void r(e)}a.done?t(c):Promise.resolve(c).then(n,o)}Promise.any||(Promise.any=t=>{var r;return(r=function*(){return Promise.all([...t].map(e=>new Promise((t,r)=>Promise.resolve(e).then(r,t)))).then(e=>Promise.reject(e),e=>Promise.resolve(e))},function(){var t=this,n=arguments;return new Promise(function(o,i){var s=r.apply(t,n);function a(t){e(s,o,i,a,c,"next",t)}function c(t){e(s,o,i,a,c,"throw",t)}a(void 0)})})()})},8013:function(){"function"!=typeof window.queueMicrotask&&(window.queueMicrotask=function(e){Promise.resolve().then(e).catch(e=>setTimeout(()=>{throw e}))})},8553:function(){window.Reflect||(window.Reflect={}),"function"!=typeof window.Reflect.apply&&Object.defineProperty(Reflect,"apply",{configurable:!0,enumerable:!1,value:function(e,t,r){return Function.prototype.apply.call(e,t,r)},writable:!0})},2124:function(){let e=(e,{timeout:t})=>{let r=requestAnimationFrame(t=>{clearTimeout(n),e(t)}),n=setTimeout(()=>{cancelAnimationFrame(r),e(performance.now())},t)},t=1/120*1e3,r=1,n=new Set,o=new Set;void 0===window.requestIdleCallback&&(window.requestIdleCallback=(i,s)=>{var a;let c=r;r+=1,n.add(c);let u=performance.now(),l=new MessageChannel,d=l.port1;return l.port2.onmessage=r=>{let a=Math.max(0,t-(performance.now()-r.data));if(o.has(c))return o.delete(c),void n.delete(c);let l=performance.now(),f=l-u;if(0===a&&(void 0===(null==s?void 0:s.timeout)||f<s.timeout)){var h;e(()=>{d.postMessage(l)},{timeout:null!=(h=null==s?void 0:s.timeout)?h:500})}else{let e=void 0!==(null==s?void 0:s.timeout)&&f>s.timeout;i({didTimeout:e,timeRemaining:()=>{let t=performance.now()-l;return e?0:Math.max(0,a-t)}}),n.delete(c)}},e(()=>{d.postMessage(u)},{timeout:null!=(a=null==s?void 0:s.timeout)?a:500}),c},window.cancelIdleCallback=e=>{n.has(e)&&o.add(e)},setInterval(()=>{new Promise(e=>{let t=performance.now(),r=0,n=o=>{r+=1,o-t>=1e3?e(r):requestAnimationFrame(n)};requestAnimationFrame(n)}).then(e=>{t=1/Math.min(Math.max(30,e),120)*1e3})},5e3))},3489:function(){String.prototype.includes||(String.prototype.includes=function(e,t){return"number"!=typeof t&&(t=0),!(t+e.length>this.length)&&-1!==this.indexOf(e,t)}),String.prototype.endsWith||(String.prototype.endsWith=function(e){return-1!==this.indexOf(e,this.length-e.length)}),String.prototype.startsWith||(String.prototype.startsWith=function(e,t){return void 0===t?0===this.indexOf(e):this.indexOf(e)===t})},6115:function(){"undefined"!=typeof Symbol&&Symbol.asyncIterator||(Symbol.asyncIterator=Symbol.for("Symbol.asyncIterator"))},1463:function(e,t,r){var n;n=function(){function e(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function t(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,function(e){var t=function(e){if("object"!=typeof e||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=typeof r)return r;throw TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:t+""}(n.key),n)}}function o(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function i(t,r){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t){if(t){if("string"==typeof t)return e(t,void 0);var r={}.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?e(t,void 0):void 0}}(t))||r&&t&&"number"==typeof t.length){n&&(t=n);var o=0,i=function(){};return{s:i,n:function(){return o>=t.length?{done:!0}:{done:!1,value:t[o++]}},e:function(e){throw e},f:i}}throw TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var s,a=!0,c=!1;return{s:function(){n=n.call(t)},n:function(){var e=n.next();return a=e.done,e},e:function(e){c=!0,s=e},f:function(){try{a||null==n.return||n.return()}finally{if(c)throw s}}}}function s(){return(s="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!{}.hasOwnProperty.call(e,t)&&null!==(e=a(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}}).apply(null,arguments)}function a(e){return(a=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function c(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(c=function(){return!!e})()}function u(e,t){return(u=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}(l="undefined"!=typeof self?self:r.g).AbortSignal,l.AbortController;var l,d=o(function e(){t(this,e),Object.defineProperty(this,"listeners",{value:{},writable:!0,configurable:!0})},[{key:"addEventListener",value:function(e,t,r){e in this.listeners||(this.listeners[e]=[]),this.listeners[e].push({callback:t,options:r})}},{key:"removeEventListener",value:function(e,t){if(e in this.listeners)for(var r=this.listeners[e],n=0,o=r.length;n<o;n++)if(r[n].callback===t)return void r.splice(n,1)}},{key:"dispatchEvent",value:function(e){var t=this;if(e.type in this.listeners){for(var r=this.listeners[e.type].slice(),n=0,o=r.length;n<o;n++)!function(){var o=r[n];try{o.callback.call(t,e)}catch(e){Promise.resolve().then(function(){throw e})}o.options&&o.options.once&&t.removeEventListener(e.type,o.callback)}();return!e.defaultPrevented}}}]),f=function(e){function r(){var e,n;return t(this,r),n=a(n=r),(e=function(e,t){if(t&&("object"==typeof t||"function"==typeof t))return t;if(void 0!==t)throw TypeError("Derived constructors may only return object or undefined");if(void 0===e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(this,c()?Reflect.construct(n,[],a(this).constructor):n.apply(this,undefined))).listeners||d.call(e),Object.defineProperty(e,"aborted",{value:!1,writable:!0,configurable:!0}),Object.defineProperty(e,"onabort",{value:null,writable:!0,configurable:!0}),Object.defineProperty(e,"reason",{value:void 0,writable:!0,configurable:!0}),e}if("function"!=typeof e&&null!==e)throw TypeError("Super expression must either be null or a function");return r.prototype=Object.create(e&&e.prototype,{constructor:{value:r,writable:!0,configurable:!0}}),Object.defineProperty(r,"prototype",{writable:!1}),e&&u(r,e),o(r,[{key:"toString",value:function(){return"[object AbortSignal]"}},{key:"dispatchEvent",value:function(e){var t,n;"abort"===e.type&&(this.aborted=!0,"function"==typeof this.onabort&&this.onabort.call(this,e)),(t=this,"function"==typeof(n=s(a(r.prototype),"dispatchEvent",t))?function(e){return n.apply(t,e)}:n)([e])}},{key:"throwIfAborted",value:function(){var e=this.aborted,t=this.reason;if(e)throw void 0===t?"Aborted":t}}],[{key:"timeout",value:function(e){var t=new h;return setTimeout(function(){return t.abort(new DOMException("This signal is timeout in ".concat(e,"ms"),"TimeoutError"))},e),t.signal}},{key:"any",value:function(e){var t=new h;function r(){t.abort(this.reason),function(){var t,n=i(e);try{for(n.s();!(t=n.n()).done;)t.value.removeEventListener("abort",r)}catch(e){n.e(e)}finally{n.f()}}()}var n,o=i(e);try{for(o.s();!(n=o.n()).done;){var s=n.value;if(s.aborted){t.abort(s.reason);break}s.addEventListener("abort",r)}}catch(e){o.e(e)}finally{o.f()}return t.signal}}])}(d),h=o(function e(){t(this,e),Object.defineProperty(this,"signal",{value:new f,writable:!0,configurable:!0})},[{key:"abort",value:function(e){var t=function(e){if(void 0===e)if("undefined"==typeof document)(e=Error("This operation was aborted")).name="AbortError";else try{e=new DOMException("signal is aborted without reason"),Object.defineProperty(e,"name",{value:"AbortError"})}catch(t){(e=Error("This operation was aborted")).name="AbortError"}return e}(e),r=function(e){var t;try{t=new Event("abort")}catch(e){"undefined"!=typeof document?document.createEvent?(t=document.createEvent("Event")).initEvent("abort",!1,!1):(t=document.createEventObject()).type="abort":t={type:"abort",bubbles:!1,cancelable:!1}}return t.reason=e,t}(t);this.signal.reason=t,this.signal.dispatchEvent(r)}},{key:"toString",value:function(){return"[object AbortController]"}}]);function p(e){return e.__FORCE_INSTALL_ABORTCONTROLLER_POLYFILL?(console.log("__FORCE_INSTALL_ABORTCONTROLLER_POLYFILL=true is set, will force install polyfill"),!0):"function"==typeof e.Request&&!e.Request.prototype.hasOwnProperty("signal")||!e.AbortController}"undefined"!=typeof Symbol&&Symbol.toStringTag&&(h.prototype[Symbol.toStringTag]="AbortController",f.prototype[Symbol.toStringTag]="AbortSignal"),function(e){if(p(e)){if(!e.fetch)return console.warn("fetch() is not available, cannot install abortcontroller-polyfill");var t=function(e){"function"==typeof e&&(e={fetch:e});var t=e,r=t.fetch,n=t.Request,o=void 0===n?r.Request:n,i=t.AbortController,s=t.__FORCE_INSTALL_ABORTCONTROLLER_POLYFILL,a=void 0!==s&&s;if(!p({fetch:r,Request:o,AbortController:i,__FORCE_INSTALL_ABORTCONTROLLER_POLYFILL:a}))return{fetch:r,Request:c};var c=o;return(c&&!c.prototype.hasOwnProperty("signal")||a)&&((c=function(e,t){t&&t.signal&&(r=t.signal,delete t.signal);var r,n=new o(e,t);return r&&Object.defineProperty(n,"signal",{writable:!1,enumerable:!1,configurable:!0,value:r}),n}).prototype=o.prototype),{fetch:function(e,t){var n=c&&c.prototype.isPrototypeOf(e)?e.signal:t?t.signal:void 0;if(n){try{o=new DOMException("Aborted","AbortError")}catch(e){(o=Error("Aborted")).name="AbortError"}if(n.aborted)return Promise.reject(o);var o,i=new Promise(function(e,t){n.addEventListener("abort",function(){return t(o)},{once:!0})});return t&&t.signal&&delete t.signal,Promise.race([i,r(e,t)])}return r(e,t)},Request:c}}(e),r=t.fetch,n=t.Request;e.fetch=r,e.Request=n,Object.defineProperty(e,"AbortController",{writable:!0,enumerable:!1,configurable:!0,value:h}),Object.defineProperty(e,"AbortSignal",{writable:!0,enumerable:!1,configurable:!0,value:f})}}("undefined"!=typeof self?self:r.g)},"function"==typeof define&&define.amd?define(n):n()},8230:function(e,t,r){e.exports=r(5108)},4576:function(e,t,r){r(2781)},5036:function(e,t,r){var n=r(8932),o=r(6253),i=TypeError;e.exports=function(e){if(n(e))return e;throw new i(o(e)+" is not a function")}},3284:function(e,t,r){var n=r(6369),o=String,i=TypeError;e.exports=function(e){if(n(e))return e;throw new i("Can't set "+o(e)+" as a prototype")}},4259:function(e,t,r){var n=r(2818),o=String,i=TypeError;e.exports=function(e){if(n(e))return e;throw new i(o(e)+" is not an object")}},1598:function(e){e.exports="undefined"!=typeof ArrayBuffer&&"undefined"!=typeof DataView},4291:function(e,t,r){var n,o,i,s=r(1598),a=r(367),c=r(6426),u=r(8932),l=r(2818),d=r(4485),f=r(5224),h=r(6253),p=r(9669),v=r(6103),y=r(5069),g=r(1763),m=r(3312),b=r(7853),w=r(7472),S=r(8729),O=r(5631),E=O.enforce,P=O.get,x=c.Int8Array,T=x&&x.prototype,k=c.Uint8ClampedArray,I=k&&k.prototype,C=x&&m(x),R=T&&m(T),A=Object.prototype,j=c.TypeError,M=w("toStringTag"),N=S("TYPED_ARRAY_TAG"),L="TypedArrayConstructor",_=s&&!!b&&"Opera"!==f(c.opera),D=!1,B={Int8Array:1,Uint8Array:1,Uint8ClampedArray:1,Int16Array:2,Uint16Array:2,Int32Array:4,Uint32Array:4,Float32Array:4,Float64Array:8},F={BigInt64Array:8,BigUint64Array:8},U=function(e){var t=m(e);if(l(t)){var r=P(t);return r&&d(r,L)?r[L]:U(t)}},W=function(e){if(!l(e))return!1;var t=f(e);return d(B,t)||d(F,t)};for(n in B)(i=(o=c[n])&&o.prototype)?E(i)[L]=o:_=!1;for(n in F)(i=(o=c[n])&&o.prototype)&&(E(i)[L]=o);if((!_||!u(C)||C===Function.prototype)&&(C=function(){throw new j("Incorrect invocation")},_))for(n in B)c[n]&&b(c[n],C);if((!_||!R||R===A)&&(R=C.prototype,_))for(n in B)c[n]&&b(c[n].prototype,R);if(_&&m(I)!==R&&b(I,R),a&&!d(R,M))for(n in D=!0,y(R,M,{configurable:!0,get:function(){return l(this)?this[N]:void 0}}),B)c[n]&&p(c[n],N,n);e.exports={NATIVE_ARRAY_BUFFER_VIEWS:_,TYPED_ARRAY_TAG:D&&N,aTypedArray:function(e){if(W(e))return e;throw new j("Target is not a typed array")},aTypedArrayConstructor:function(e){if(u(e)&&(!b||g(C,e)))return e;throw new j(h(e)+" is not a typed array constructor")},exportTypedArrayMethod:function(e,t,r,n){if(a){if(r)for(var o in B){var i=c[o];if(i&&d(i.prototype,e))try{delete i.prototype[e]}catch(r){try{i.prototype[e]=t}catch(e){}}}(!R[e]||r)&&v(R,e,r?t:_&&T[e]||t,n)}},exportTypedArrayStaticMethod:function(e,t,r){var n,o;if(a){if(b){if(r)for(n in B)if((o=c[n])&&d(o,e))try{delete o[e]}catch(e){}if(C[e]&&!r)return;try{return v(C,e,r?t:_&&C[e]||t)}catch(e){}}for(n in B)(o=c[n])&&(!o[e]||r)&&v(o,e,t)}},getTypedArrayConstructor:U,isView:function(e){if(!l(e))return!1;var t=f(e);return"DataView"===t||d(B,t)||d(F,t)},isTypedArray:W,TypedArray:C,TypedArrayPrototype:R}},1411:function(e,t,r){var n=r(7098),o=r(6046),i=r(240),s=function(e){return function(t,r,s){var a,c=n(t),u=i(c);if(0===u)return!e&&-1;var l=o(s,u);if(e&&r!=r){for(;u>l;)if((a=c[l++])!=a)return!0}else for(;u>l;l++)if((e||l in c)&&c[l]===r)return e||l||0;return!e&&-1}};e.exports={includes:s(!0),indexOf:s(!1)}},6437:function(e,t,r){var n=r(5036),o=r(937),i=r(8267),s=r(240),a=TypeError,c="Reduce of empty array with no initial value",u=function(e){return function(t,r,u,l){var d=o(t),f=i(d),h=s(d);if(n(r),0===h&&u<2)throw new a(c);var p=e?h-1:0,v=e?-1:1;if(u<2)for(;;){if(p in f){l=f[p],p+=v;break}if(p+=v,e?p<0:h<=p)throw new a(c)}for(;e?p>=0:h>p;p+=v)p in f&&(l=r(l,f[p],p,d));return l}};e.exports={left:u(!1),right:u(!0)}},2870:function(e,t,r){var n=r(7472)("iterator"),o=!1;try{var i=0,s={next:function(){return{done:!!i++}},return:function(){o=!0}};s[n]=function(){return this},Array.from(s,function(){throw 2})}catch(e){}e.exports=function(e,t){try{if(!t&&!o)return!1}catch(e){return!1}var r=!1;try{var i={};i[n]=function(){return{next:function(){return{done:r=!0}}}},e(i)}catch(e){}return r}},1654:function(e,t,r){var n=r(6533),o=n({}.toString),i=n("".slice);e.exports=function(e){return i(o(e),8,-1)}},5224:function(e,t,r){var n=r(539),o=r(8932),i=r(1654),s=r(7472)("toStringTag"),a=Object,c="Arguments"===i(function(){return arguments}());e.exports=n?i:function(e){var t,r,n;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(r=function(e,t){try{return e[t]}catch(e){}}(t=a(e),s))?r:c?i(t):"Object"===(n=i(t))&&o(t.callee)?"Arguments":n}},9208:function(e,t,r){var n=r(4485),o=r(9877),i=r(926),s=r(3675);e.exports=function(e,t,r){for(var a=o(t),c=s.f,u=i.f,l=0;l<a.length;l++){var d=a[l];n(e,d)||r&&n(r,d)||c(e,d,u(t,d))}}},6020:function(e,t,r){e.exports=!r(2405)(function(){function e(){}return e.prototype.constructor=null,Object.getPrototypeOf(new e)!==e.prototype})},9669:function(e,t,r){var n=r(367),o=r(3675),i=r(3260);e.exports=n?function(e,t,r){return o.f(e,t,i(1,r))}:function(e,t,r){return e[t]=r,e}},3260:function(e){e.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},5069:function(e,t,r){var n=r(2812),o=r(3675);e.exports=function(e,t,r){return r.get&&n(r.get,t,{getter:!0}),r.set&&n(r.set,t,{setter:!0}),o.f(e,t,r)}},6103:function(e,t,r){var n=r(8932),o=r(3675),i=r(2812),s=r(9999);e.exports=function(e,t,r,a){a||(a={});var c=a.enumerable,u=void 0!==a.name?a.name:t;if(n(r)&&i(r,u,a),a.global)c?e[t]=r:s(t,r);else{try{a.unsafe?e[t]&&(c=!0):delete e[t]}catch(e){}c?e[t]=r:o.f(e,t,{value:r,enumerable:!1,configurable:!a.nonConfigurable,writable:!a.nonWritable})}return e}},9999:function(e,t,r){var n=r(6426),o=Object.defineProperty;e.exports=function(e,t){try{o(n,e,{value:t,configurable:!0,writable:!0})}catch(r){n[e]=t}return t}},367:function(e,t,r){e.exports=!r(2405)(function(){return 7!==Object.defineProperty({},1,{get:function(){return 7}})[1]})},8274:function(e,t,r){var n=r(6426),o=r(2818),i=n.document,s=o(i)&&o(i.createElement);e.exports=function(e){return s?i.createElement(e):{}}},6846:function(e){e.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},1658:function(e,t,r){var n=r(6426).navigator,o=n&&n.userAgent;e.exports=o?String(o):""},7511:function(e,t,r){var n,o,i=r(6426),s=r(1658),a=i.process,c=i.Deno,u=a&&a.versions||c&&c.version,l=u&&u.v8;l&&(o=(n=l.split("."))[0]>0&&n[0]<4?1:+(n[0]+n[1])),!o&&s&&(!(n=s.match(/Edge\/(\d+)/))||n[1]>=74)&&(n=s.match(/Chrome\/(\d+)/))&&(o=+n[1]),e.exports=o},4313:function(e,t,r){var n=r(6426),o=r(1658),i=r(1654),s=function(e){return o.slice(0,e.length)===e};e.exports=s("Bun/")?"BUN":s("Cloudflare-Workers")?"CLOUDFLARE":s("Deno/")?"DENO":s("Node.js/")?"NODE":n.Bun&&"string"==typeof Bun.version?"BUN":n.Deno&&"object"==typeof Deno.version?"DENO":"process"===i(n.process)?"NODE":n.window&&n.document?"BROWSER":"REST"},3045:function(e,t,r){var n=r(6426),o=r(926).f,i=r(9669),s=r(6103),a=r(9999),c=r(9208),u=r(3380);e.exports=function(e,t){var r,l,d,f,h,p=e.target,v=e.global,y=e.stat;if(r=v?n:y?n[p]||a(p,{}):n[p]&&n[p].prototype)for(l in t){if(f=t[l],d=e.dontCallGetSet?(h=o(r,l))&&h.value:r[l],!u(v?l:p+(y?".":"#")+l,e.forced)&&void 0!==d){if(typeof f==typeof d)continue;c(f,d)}(e.sham||d&&d.sham)&&i(f,"sham",!0),s(r,l,f,e)}}},2405:function(e){e.exports=function(e){try{return!!e()}catch(e){return!0}}},4345:function(e,t,r){var n=r(7162),o=r(5036),i=r(6023),s=n(n.bind);e.exports=function(e,t){return o(e),void 0===t?e:i?s(e,t):function(){return e.apply(t,arguments)}}},6023:function(e,t,r){e.exports=!r(2405)(function(){var e=function(){}.bind();return"function"!=typeof e||e.hasOwnProperty("prototype")})},3130:function(e,t,r){var n=r(6023),o=Function.prototype.call;e.exports=n?o.bind(o):function(){return o.apply(o,arguments)}},3161:function(e,t,r){var n=r(367),o=r(4485),i=Function.prototype,s=n&&Object.getOwnPropertyDescriptor,a=o(i,"name"),c=a&&(!n||n&&s(i,"name").configurable);e.exports={EXISTS:a,PROPER:a&&"something"===function(){}.name,CONFIGURABLE:c}},4205:function(e,t,r){var n=r(6533),o=r(5036);e.exports=function(e,t,r){try{return n(o(Object.getOwnPropertyDescriptor(e,t)[r]))}catch(e){}}},7162:function(e,t,r){var n=r(1654),o=r(6533);e.exports=function(e){if("Function"===n(e))return o(e)}},6533:function(e,t,r){var n=r(6023),o=Function.prototype,i=o.call,s=n&&o.bind.bind(i,i);e.exports=n?s:function(e){return function(){return i.apply(e,arguments)}}},3388:function(e,t,r){var n=r(6426),o=r(8932);e.exports=function(e,t){var r;return arguments.length<2?o(r=n[e])?r:void 0:n[e]&&n[e][t]}},4780:function(e,t,r){var n=r(5224),o=r(3110),i=r(5871),s=r(4892),a=r(7472)("iterator");e.exports=function(e){if(!i(e))return o(e,a)||o(e,"@@iterator")||s[n(e)]}},8240:function(e,t,r){var n=r(3130),o=r(5036),i=r(4259),s=r(6253),a=r(4780),c=TypeError;e.exports=function(e,t){var r=arguments.length<2?a(e):t;if(o(r))return i(n(r,e));throw new c(s(e)+" is not iterable")}},3110:function(e,t,r){var n=r(5036),o=r(5871);e.exports=function(e,t){var r=e[t];return o(r)?void 0:n(r)}},1418:function(e,t,r){var n=r(6533),o=r(937),i=Math.floor,s=n("".charAt),a=n("".replace),c=n("".slice),u=/\$([$&'`]|\d{1,2}|<[^>]*>)/g,l=/\$([$&'`]|\d{1,2})/g;e.exports=function(e,t,r,n,d,f){var h=r+e.length,p=n.length,v=l;return void 0!==d&&(d=o(d),v=u),a(f,v,function(o,a){var u;switch(s(a,0)){case"$":return"$";case"&":return e;case"`":return c(t,0,r);case"'":return c(t,h);case"<":u=d[c(a,1,-1)];break;default:var l=+a;if(0===l)return o;if(l>p){var f=i(l/10);return 0===f?o:f<=p?void 0===n[f-1]?s(a,1):n[f-1]+s(a,1):o}u=n[l-1]}return void 0===u?"":u})}},6426:function(e,t,r){var n=function(e){return e&&e.Math===Math&&e};e.exports=n("object"==typeof globalThis&&globalThis)||n("object"==typeof window&&window)||n("object"==typeof self&&self)||n("object"==typeof r.g&&r.g)||n("object"==typeof this&&this)||function(){return this}()||Function("return this")()},4485:function(e,t,r){var n=r(6533),o=r(937),i=n({}.hasOwnProperty);e.exports=Object.hasOwn||function(e,t){return i(o(e),t)}},1325:function(e){e.exports={}},2321:function(e,t,r){var n=r(367),o=r(2405),i=r(8274);e.exports=!n&&!o(function(){return 7!==Object.defineProperty(i("div"),"a",{get:function(){return 7}}).a})},8267:function(e,t,r){var n=r(6533),o=r(2405),i=r(1654),s=Object,a=n("".split);e.exports=o(function(){return!s("z").propertyIsEnumerable(0)})?function(e){return"String"===i(e)?a(e,""):s(e)}:s},7807:function(e,t,r){var n=r(6533),o=r(8932),i=r(786),s=n(Function.toString);o(i.inspectSource)||(i.inspectSource=function(e){return s(e)}),e.exports=i.inspectSource},5631:function(e,t,r){var n,o,i,s=r(6395),a=r(6426),c=r(2818),u=r(9669),l=r(4485),d=r(786),f=r(1762),h=r(1325),p="Object already initialized",v=a.TypeError,y=a.WeakMap;if(s||d.state){var g=d.state||(d.state=new y);g.get=g.get,g.has=g.has,g.set=g.set,n=function(e,t){if(g.has(e))throw new v(p);return t.facade=e,g.set(e,t),t},o=function(e){return g.get(e)||{}},i=function(e){return g.has(e)}}else{var m=f("state");h[m]=!0,n=function(e,t){if(l(e,m))throw new v(p);return t.facade=e,u(e,m,t),t},o=function(e){return l(e,m)?e[m]:{}},i=function(e){return l(e,m)}}e.exports={set:n,get:o,has:i,enforce:function(e){return i(e)?o(e):n(e,{})},getterFor:function(e){return function(t){var r;if(!c(t)||(r=o(t)).type!==e)throw new v("Incompatible receiver, "+e+" required");return r}}}},7627:function(e,t,r){var n=r(7472),o=r(4892),i=n("iterator"),s=Array.prototype;e.exports=function(e){return void 0!==e&&(o.Array===e||s[i]===e)}},8932:function(e){var t="object"==typeof document&&document.all;e.exports=void 0===t&&void 0!==t?function(e){return"function"==typeof e||e===t}:function(e){return"function"==typeof e}},3380:function(e,t,r){var n=r(2405),o=r(8932),i=/#|\.prototype\./,s=function(e,t){var r=c[a(e)];return r===l||r!==u&&(o(t)?n(t):!!t)},a=s.normalize=function(e){return String(e).replace(i,".").toLowerCase()},c=s.data={},u=s.NATIVE="N",l=s.POLYFILL="P";e.exports=s},5871:function(e){e.exports=function(e){return null==e}},2818:function(e,t,r){var n=r(8932);e.exports=function(e){return"object"==typeof e?null!==e:n(e)}},6369:function(e,t,r){var n=r(2818);e.exports=function(e){return n(e)||null===e}},5900:function(e){e.exports=!1},6466:function(e,t,r){var n=r(2818),o=r(1654),i=r(7472)("match");e.exports=function(e){var t;return n(e)&&(void 0!==(t=e[i])?!!t:"RegExp"===o(e))}},7452:function(e,t,r){var n=r(3388),o=r(8932),i=r(1763),s=r(1184),a=Object;e.exports=s?function(e){return"symbol"==typeof e}:function(e){var t=n("Symbol");return o(t)&&i(t.prototype,a(e))}},3321:function(e,t,r){var n=r(4345),o=r(3130),i=r(4259),s=r(6253),a=r(7627),c=r(240),u=r(1763),l=r(8240),d=r(4780),f=r(5411),h=TypeError,p=function(e,t){this.stopped=e,this.result=t},v=p.prototype;e.exports=function(e,t,r){var y,g,m,b,w,S,O,E=r&&r.that,P=!(!r||!r.AS_ENTRIES),x=!(!r||!r.IS_RECORD),T=!(!r||!r.IS_ITERATOR),k=!(!r||!r.INTERRUPTED),I=n(t,E),C=function(e){return y&&f(y,"normal"),new p(!0,e)},R=function(e){return P?(i(e),k?I(e[0],e[1],C):I(e[0],e[1])):k?I(e,C):I(e)};if(x)y=e.iterator;else if(T)y=e;else{if(!(g=d(e)))throw new h(s(e)+" is not iterable");if(a(g)){for(m=0,b=c(e);b>m;m++)if((w=R(e[m]))&&u(v,w))return w;return new p(!1)}y=l(e,g)}for(S=x?e.next:y.next;!(O=o(S,y)).done;){try{w=R(O.value)}catch(e){f(y,"throw",e)}if("object"==typeof w&&w&&u(v,w))return w}return new p(!1)}},5411:function(e,t,r){var n=r(3130),o=r(4259),i=r(3110);e.exports=function(e,t,r){var s,a;o(e);try{if(!(s=i(e,"return"))){if("throw"===t)throw r;return r}s=n(s,e)}catch(e){a=!0,s=e}if("throw"===t)throw r;if(a)throw s;return o(s),r}},4892:function(e){e.exports={}},240:function(e,t,r){var n=r(3922);e.exports=function(e){return n(e.length)}},2812:function(e,t,r){var n=r(6533),o=r(2405),i=r(8932),s=r(4485),a=r(367),c=r(3161).CONFIGURABLE,u=r(7807),l=r(5631),d=l.enforce,f=l.get,h=String,p=Object.defineProperty,v=n("".slice),y=n("".replace),g=n([].join),m=a&&!o(function(){return 8!==p(function(){},"length",{value:8}).length}),b=String(String).split("String"),w=e.exports=function(e,t,r){"Symbol("===v(h(t),0,7)&&(t="["+y(h(t),/^Symbol\(([^)]*)\).*$/,"$1")+"]"),r&&r.getter&&(t="get "+t),r&&r.setter&&(t="set "+t),(!s(e,"name")||c&&e.name!==t)&&(a?p(e,"name",{value:t,configurable:!0}):e.name=t),m&&r&&s(r,"arity")&&e.length!==r.arity&&p(e,"length",{value:r.arity});try{r&&s(r,"constructor")&&r.constructor?a&&p(e,"prototype",{writable:!1}):e.prototype&&(e.prototype=void 0)}catch(e){}var n=d(e);return s(n,"source")||(n.source=g(b,"string"==typeof t?t:"")),e};Function.prototype.toString=w(function(){return i(this)&&f(this).source||u(this)},"toString")},6239:function(e){var t=Math.ceil,r=Math.floor;e.exports=Math.trunc||function(e){var n=+e;return(n>0?r:t)(n)}},3059:function(e,t,r){var n=r(5036),o=TypeError,i=function(e){var t,r;this.promise=new e(function(e,n){if(void 0!==t||void 0!==r)throw new o("Bad Promise constructor");t=e,r=n}),this.resolve=n(t),this.reject=n(r)};e.exports.f=function(e){return new i(e)}},3675:function(e,t,r){var n=r(367),o=r(2321),i=r(4543),s=r(4259),a=r(1596),c=TypeError,u=Object.defineProperty,l=Object.getOwnPropertyDescriptor,d="enumerable",f="configurable",h="writable";t.f=n?i?function(e,t,r){if(s(e),t=a(t),s(r),"function"==typeof e&&"prototype"===t&&"value"in r&&h in r&&!r[h]){var n=l(e,t);n&&n[h]&&(e[t]=r.value,r={configurable:f in r?r[f]:n[f],enumerable:d in r?r[d]:n[d],writable:!1})}return u(e,t,r)}:u:function(e,t,r){if(s(e),t=a(t),s(r),o)try{return u(e,t,r)}catch(e){}if("get"in r||"set"in r)throw new c("Accessors not supported");return"value"in r&&(e[t]=r.value),e}},926:function(e,t,r){var n=r(367),o=r(3130),i=r(4996),s=r(3260),a=r(7098),c=r(1596),u=r(4485),l=r(2321),d=Object.getOwnPropertyDescriptor;t.f=n?d:function(e,t){if(e=a(e),t=c(t),l)try{return d(e,t)}catch(e){}if(u(e,t))return s(!o(i.f,e,t),e[t])}},4979:function(e,t,r){var n=r(9129),o=r(6846).concat("length","prototype");t.f=Object.getOwnPropertyNames||function(e){return n(e,o)}},8924:function(e,t){t.f=Object.getOwnPropertySymbols},3312:function(e,t,r){var n=r(4485),o=r(8932),i=r(937),s=r(1762),a=r(6020),c=s("IE_PROTO"),u=Object,l=u.prototype;e.exports=a?u.getPrototypeOf:function(e){var t=i(e);if(n(t,c))return t[c];var r=t.constructor;return o(r)&&t instanceof r?r.prototype:t instanceof u?l:null}},1763:function(e,t,r){e.exports=r(6533)({}.isPrototypeOf)},9129:function(e,t,r){var n=r(6533),o=r(4485),i=r(7098),s=r(1411).indexOf,a=r(1325),c=n([].push);e.exports=function(e,t){var r,n=i(e),u=0,l=[];for(r in n)!o(a,r)&&o(n,r)&&c(l,r);for(;t.length>u;)o(n,r=t[u++])&&(~s(l,r)||c(l,r));return l}},4996:function(e,t){var r={}.propertyIsEnumerable,n=Object.getOwnPropertyDescriptor;t.f=n&&!r.call({1:2},1)?function(e){var t=n(this,e);return!!t&&t.enumerable}:r},7853:function(e,t,r){var n=r(4205),o=r(2818),i=r(9131),s=r(3284);e.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var e,t=!1,r={};try{(e=n(Object.prototype,"__proto__","set"))(r,[]),t=r instanceof Array}catch(e){}return function(r,n){return i(r),s(n),o(r)&&(t?e(r,n):r.__proto__=n),r}}():void 0)},9818:function(e,t,r){var n=r(3130),o=r(8932),i=r(2818),s=TypeError;e.exports=function(e,t){var r,a;if("string"===t&&o(r=e.toString)&&!i(a=n(r,e))||o(r=e.valueOf)&&!i(a=n(r,e))||"string"!==t&&o(r=e.toString)&&!i(a=n(r,e)))return a;throw new s("Can't convert object to primitive value")}},9877:function(e,t,r){var n=r(3388),o=r(6533),i=r(4979),s=r(8924),a=r(4259),c=o([].concat);e.exports=n("Reflect","ownKeys")||function(e){var t=i.f(a(e)),r=s.f;return r?c(t,r(e)):t}},4730:function(e){e.exports=function(e){try{return{error:!1,value:e()}}catch(e){return{error:!0,value:e}}}},1730:function(e,t,r){var n=r(6426),o=r(7003),i=r(8932),s=r(3380),a=r(7807),c=r(7472),u=r(4313),l=r(5900),d=r(7511),f=o&&o.prototype,h=c("species"),p=!1,v=i(n.PromiseRejectionEvent);e.exports={CONSTRUCTOR:s("Promise",function(){var e=a(o),t=e!==String(o);if(!t&&66===d||l&&(!f.catch||!f.finally))return!0;if(!d||d<51||!/native code/.test(e)){var r=new o(function(e){e(1)}),n=function(e){e(function(){},function(){})};if((r.constructor={})[h]=n,!(p=r.then(function(){})instanceof n))return!0}return!(t||"BROWSER"!==u&&"DENO"!==u||v)}),REJECTION_EVENT:v,SUBCLASSING:p}},7003:function(e,t,r){e.exports=r(6426).Promise},8075:function(e,t,r){var n=r(7003),o=r(2870);e.exports=r(1730).CONSTRUCTOR||!o(function(e){n.all(e).then(void 0,function(){})})},4304:function(e,t,r){var n=r(6426),o=r(2405),i=n.RegExp;e.exports={correct:!o(function(){var e=!0;try{i(".","d")}catch(t){e=!1}var t={},r="",n=e?"dgimsy":"gimsy",o=function(e,n){Object.defineProperty(t,e,{get:function(){return r+=n,!0}})},s={dotAll:"s",global:"g",ignoreCase:"i",multiline:"m",sticky:"y"};for(var a in e&&(s.hasIndices="d"),s)o(a,s[a]);return Object.getOwnPropertyDescriptor(i.prototype,"flags").get.call(t)!==n||r!==n})}},8805:function(e,t,r){var n=r(4259);e.exports=function(){var e=n(this),t="";return e.hasIndices&&(t+="d"),e.global&&(t+="g"),e.ignoreCase&&(t+="i"),e.multiline&&(t+="m"),e.dotAll&&(t+="s"),e.unicode&&(t+="u"),e.unicodeSets&&(t+="v"),e.sticky&&(t+="y"),t}},2560:function(e,t,r){var n=r(3130),o=r(4485),i=r(1763),s=r(4304),a=r(8805),c=RegExp.prototype;e.exports=s.correct?function(e){return e.flags}:function(e){return s.correct||!i(c,e)||o(e,"flags")?e.flags:n(a,e)}},9131:function(e,t,r){var n=r(5871),o=TypeError;e.exports=function(e){if(n(e))throw new o("Can't call method on "+e);return e}},1762:function(e,t,r){var n=r(8066),o=r(8729),i=n("keys");e.exports=function(e){return i[e]||(i[e]=o(e))}},786:function(e,t,r){var n=r(5900),o=r(6426),i=r(9999),s="__core-js_shared__",a=e.exports=o[s]||i(s,{});(a.versions||(a.versions=[])).push({version:"3.43.0",mode:n?"pure":"global",copyright:"Â© 2014-2025 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.43.0/LICENSE",source:"https://github.com/zloirock/core-js"})},8066:function(e,t,r){var n=r(786);e.exports=function(e,t){return n[e]||(n[e]=t||{})}},6926:function(e,t,r){var n=r(7511),o=r(2405),i=r(6426).String;e.exports=!!Object.getOwnPropertySymbols&&!o(function(){var e=Symbol("symbol detection");return!i(e)||!(Object(e)instanceof Symbol)||!Symbol.sham&&n&&n<41})},6046:function(e,t,r){var n=r(5329),o=Math.max,i=Math.min;e.exports=function(e,t){var r=n(e);return r<0?o(r+t,0):i(r,t)}},7098:function(e,t,r){var n=r(8267),o=r(9131);e.exports=function(e){return n(o(e))}},5329:function(e,t,r){var n=r(6239);e.exports=function(e){var t=+e;return t!=t||0===t?0:n(t)}},3922:function(e,t,r){var n=r(5329),o=Math.min;e.exports=function(e){var t=n(e);return t>0?o(t,0x27777777777776):0}},937:function(e,t,r){var n=r(9131),o=Object;e.exports=function(e){return o(n(e))}},8523:function(e,t,r){var n=r(3130),o=r(2818),i=r(7452),s=r(3110),a=r(9818),c=r(7472),u=TypeError,l=c("toPrimitive");e.exports=function(e,t){if(!o(e)||i(e))return e;var r,c=s(e,l);if(c){if(void 0===t&&(t="default"),!o(r=n(c,e,t))||i(r))return r;throw new u("Can't convert object to primitive value")}return void 0===t&&(t="number"),a(e,t)}},1596:function(e,t,r){var n=r(8523),o=r(7452);e.exports=function(e){var t=n(e,"string");return o(t)?t:t+""}},539:function(e,t,r){var n={};n[r(7472)("toStringTag")]="z",e.exports="[object z]"===String(n)},6951:function(e,t,r){var n=r(5224),o=String;e.exports=function(e){if("Symbol"===n(e))throw TypeError("Cannot convert a Symbol value to a string");return o(e)}},6253:function(e){var t=String;e.exports=function(e){try{return t(e)}catch(e){return"Object"}}},8729:function(e,t,r){var n=r(6533),o=0,i=Math.random(),s=n(1.1.toString);e.exports=function(e){return"Symbol("+(void 0===e?"":e)+")_"+s(++o+i,36)}},1184:function(e,t,r){e.exports=r(6926)&&!Symbol.sham&&"symbol"==typeof Symbol.iterator},4543:function(e,t,r){var n=r(367),o=r(2405);e.exports=n&&o(function(){return 42!==Object.defineProperty(function(){},"prototype",{value:42,writable:!1}).prototype})},6395:function(e,t,r){var n=r(6426),o=r(8932),i=n.WeakMap;e.exports=o(i)&&/native code/.test(String(i))},7472:function(e,t,r){var n=r(6426),o=r(8066),i=r(4485),s=r(8729),a=r(6926),c=r(1184),u=n.Symbol,l=o("wks"),d=c?u.for||u:u&&u.withoutSetter||s;e.exports=function(e){return i(l,e)||(l[e]=a&&i(u,e)?u[e]:d("Symbol."+e)),l[e]}},9237:function(e,t,r){var n=r(3045),o=r(6426);n({global:!0,forced:o.globalThis!==o},{globalThis:o})},3095:function(e,t,r){var n=r(3045),o=r(3130),i=r(5036),s=r(3059),a=r(4730),c=r(3321);n({target:"Promise",stat:!0,forced:r(8075)},{allSettled:function(e){var t=this,r=s.f(t),n=r.resolve,u=r.reject,l=a(function(){var r=i(t.resolve),s=[],a=0,u=1;c(e,function(e){var i=a++,c=!1;u++,o(r,t,e).then(function(e){!c&&(c=!0,s[i]={status:"fulfilled",value:e},--u||n(s))},function(e){!c&&(c=!0,s[i]={status:"rejected",reason:e},--u||n(s))})}),--u||n(s)});return l.error&&u(l.value),r.promise}})},854:function(e,t,r){var n=r(3045),o=r(3130),i=r(6533),s=r(9131),a=r(8932),c=r(2818),u=r(6466),l=r(6951),d=r(3110),f=r(2560),h=r(1418),p=r(7472),v=r(5900),y=p("replace"),g=TypeError,m=i("".indexOf),b=i("".replace),w=i("".slice),S=Math.max;n({target:"String",proto:!0},{replaceAll:function(e,t){var r,n,i,p,O,E,P,x,T,k=s(this),I=0,C="";if(c(e)){if((r=u(e))&&!~m(l(s(f(e))),"g"))throw new g("`.replaceAll` does not allow non-global regexes");if(n=d(e,y))return o(n,e,k,t);if(v&&r)return b(l(k),e,t)}for(i=l(k),p=l(e),(O=a(t))||(t=l(t)),P=S(1,E=p.length),x=m(i,p);-1!==x;)T=O?l(t(p,x,i)):h(p,i,x,[],void 0,t),C+=w(i,I,x)+T,I=x+E,x=x+P>i.length?-1:m(i,p,x+P);return I<i.length&&(C+=w(i,I)),C}})},2781:function(e,t,r){var n=r(4291),o=r(6437).left,i=n.aTypedArray;(0,n.exportTypedArrayMethod)("reduce",function(e){var t=arguments.length;return o(i(this),e,t,t>1?arguments[1]:void 0)})},5108:function(e,t,r){e.exports=r(4576)},8546:function(e,t,r){var n=r(4914),o=r(4129),i=r(4032),s=r(8816),a=r(175);(e.exports=function(e,t){var r,o,c,u,l;return arguments.length<2||"string"!=typeof e?(u=t,t=e,e=null):u=arguments[2],n(e)?(r=a.call(e,"c"),o=a.call(e,"e"),c=a.call(e,"w")):(r=c=!0,o=!1),l={value:t,configurable:r,enumerable:o,writable:c},u?i(s(u),l):l}).gs=function(e,t,r){var c,u,l,d;return"string"!=typeof e?(l=r,r=t,t=e,e=null):l=arguments[3],n(t)?o(t)?n(r)?o(r)||(l=r,r=void 0):r=void 0:(l=t,t=r=void 0):t=void 0,n(e)?(c=a.call(e,"c"),u=a.call(e,"e")):(c=!0,u=!1),d={get:t,set:r,configurable:c,enumerable:u},l?i(s(l),d):d}},2132:function(e){e.exports=function(){}},4032:function(e,t,r){e.exports=r(3300)()?Object.assign:r(2892)},3300:function(e){e.exports=function(){var e,t=Object.assign;return"function"==typeof t&&(t(e={foo:"raz"},{bar:"dwa"},{trzy:"trzy"}),e.foo+e.bar+e.trzy==="razdwatrzy")}},2892:function(e,t,r){var n=r(445),o=r(9301),i=Math.max;e.exports=function(e,t){var r,s,a,c=i(arguments.length,2);for(s=1,e=Object(o(e)),a=function(n){try{e[n]=t[n]}catch(e){r||(r=e)}};s<c;++s)n(t=arguments[s]).forEach(a);if(void 0!==r)throw r;return e}},9419:function(e,t,r){var n=r(2132)();e.exports=function(e){return e!==n&&null!==e}},445:function(e,t,r){e.exports=r(306)()?Object.keys:r(7272)},306:function(e){e.exports=function(){try{return Object.keys("primitive"),!0}catch(e){return!1}}},7272:function(e,t,r){var n=r(9419),o=Object.keys;e.exports=function(e){return o(n(e)?Object(e):e)}},8816:function(e,t,r){var n=r(9419),o=Array.prototype.forEach,i=Object.create;e.exports=function(e){var t=i(null);return o.call(arguments,function(e){n(e)&&function(e,t){var r;for(r in e)t[r]=e[r]}(Object(e),t)}),t}},9301:function(e,t,r){var n=r(9419);e.exports=function(e){if(!n(e))throw TypeError("Cannot use null or undefined");return e}},175:function(e,t,r){e.exports=r(4269)()?String.prototype.contains:r(2962)},4269:function(e){var t="razdwatrzy";e.exports=function(){return"function"==typeof t.contains&&!0===t.contains("dwa")&&!1===t.contains("foo")}},2962:function(e){var t=String.prototype.indexOf;e.exports=function(e){return t.call(this,e,arguments[1])>-1}},2466:function(e,t,r){r(6728)()||Object.defineProperty(r(6090),"Symbol",{value:r(5418),configurable:!0,enumerable:!1,writable:!0})},6728:function(e,t,r){var n=r(6090),o={object:!0,symbol:!0};e.exports=function(){var e,t=n.Symbol;if("function"!=typeof t)return!1;e=t("test symbol");try{String(e)}catch(e){return!1}return!!o[typeof t.iterator]&&!!o[typeof t.toPrimitive]&&!!o[typeof t.toStringTag]}},7278:function(e){e.exports=function(e){return!!e&&("symbol"==typeof e||!!e.constructor&&"Symbol"===e.constructor.name&&"Symbol"===e[e.constructor.toStringTag])}},2562:function(e,t,r){var n=r(8546),o=Object.defineProperty,i=Object.prototype,s=(0,Object.create)(null);e.exports=function(e){for(var t,r,a=0;s[e+(a||"")];)++a;return s[e+=a||""]=!0,o(i,t="@@"+e,n.gs(null,function(e){r||(r=!0,o(this,t,n(e)),r=!1)})),t}},8915:function(e,t,r){var n=r(8546),o=r(6090).Symbol;e.exports=function(e){return Object.defineProperties(e,{hasInstance:n("",o&&o.hasInstance||e("hasInstance")),isConcatSpreadable:n("",o&&o.isConcatSpreadable||e("isConcatSpreadable")),iterator:n("",o&&o.iterator||e("iterator")),match:n("",o&&o.match||e("match")),replace:n("",o&&o.replace||e("replace")),search:n("",o&&o.search||e("search")),species:n("",o&&o.species||e("species")),split:n("",o&&o.split||e("split")),toPrimitive:n("",o&&o.toPrimitive||e("toPrimitive")),toStringTag:n("",o&&o.toStringTag||e("toStringTag")),unscopables:n("",o&&o.unscopables||e("unscopables"))})}},2227:function(e,t,r){var n=r(8546),o=r(2684),i=Object.create(null);e.exports=function(e){return Object.defineProperties(e,{for:n(function(t){return i[t]?i[t]:i[t]=e(String(t))}),keyFor:n(function(e){var t;for(t in o(e),i)if(i[t]===e)return t})})}},5418:function(e,t,r){var n,o,i,s=r(8546),a=r(2684),c=r(6090).Symbol,u=r(2562),l=r(8915),d=r(2227),f=Object.create,h=Object.defineProperties,p=Object.defineProperty;if("function"==typeof c)try{String(c()),i=!0}catch(e){}else c=null;o=function(e){if(this instanceof o)throw TypeError("Symbol is not a constructor");return n(e)},e.exports=n=function e(t){if(this instanceof e)throw TypeError("Symbol is not a constructor");return i?c(t):h(f(o.prototype),{__description__:s("",t=void 0===t?"":String(t)),__name__:s("",u(t))})},l(n),d(n),h(o.prototype,{constructor:s(n),toString:s("",function(){return this.__name__})}),h(n.prototype,{toString:s(function(){return"Symbol ("+a(this).__description__+")"}),valueOf:s(function(){return a(this)})}),p(n.prototype,n.toPrimitive,s("",function(){var e=a(this);return"symbol"==typeof e?e:e.toString()})),p(n.prototype,n.toStringTag,s("c","Symbol")),p(o.prototype,n.toStringTag,s("c",n.prototype[n.toStringTag])),p(o.prototype,n.toPrimitive,s("c",n.prototype[n.toPrimitive]))},2684:function(e,t,r){var n=r(7278);e.exports=function(e){if(!n(e))throw TypeError(e+" is not a symbol");return e}},9123:function(e){var t=function(){if("object"==typeof self&&self)return self;if("object"==typeof window&&window)return window;throw Error("Unable to resolve global `this`")};e.exports=function(){if(this)return this;try{Object.defineProperty(Object.prototype,"__global__",{get:function(){return this},configurable:!0})}catch(e){return t()}try{return __global__||t()}finally{delete Object.prototype.__global__}}()},6090:function(e,t,r){e.exports=r(2698)()?globalThis:r(9123)},2698:function(e){e.exports=function(){return"object"==typeof globalThis&&!!globalThis&&globalThis.Array===Array}},2791:function(e,t,r){var n=r(4155);e.exports=function(e){if("function"!=typeof e||!hasOwnProperty.call(e,"length"))return!1;try{if("number"!=typeof e.length||"function"!=typeof e.call||"function"!=typeof e.apply)return!1}catch(e){return!1}return!n(e)}},2077:function(e,t,r){var n=r(4914),o={object:!0,function:!0,undefined:!0};e.exports=function(e){return!!n(e)&&hasOwnProperty.call(o,typeof e)}},4129:function(e,t,r){var n=r(2791),o=/^\s*class[\s{/}]/,i=Function.prototype.toString;e.exports=function(e){return!(!n(e)||o.test(i.call(e)))}},4155:function(e,t,r){var n=r(2077);e.exports=function(e){if(!n(e))return!1;try{return!!e.constructor&&e.constructor.prototype===e}catch(e){return!1}}},4914:function(e){e.exports=function(e){return null!=e}},9517:function(e,t,r){var n,o;r.d(t,{AF:()=>n,BM:()=>a,C5:()=>m,FL:()=>x,I4:()=>O,JW:()=>u,Q0:()=>b,Re:()=>s,Rx:()=>p,Tl:()=>j,Tm:()=>y,UG:()=>f,Wi:()=>g,YD:()=>k,Zq:()=>h,_V:()=>d,a4:()=>P,cK:()=>T,dI:()=>w,dg:()=>R,e9:()=>c,gB:()=>A,gX:()=>N,iw:()=>C,jI:()=>I,kK:()=>i,nQ:()=>l,pC:()=>S,qp:()=>M,vU:()=>v,xf:()=>E});let i=e=>(null==e?void 0:e.nodeType)===Node.ELEMENT_NODE,s=e=>void 0!==(null==e?void 0:e.dataset),a=e=>e.nodeType===Node.TEXT_NODE,c=e=>"TEXTAREA"===e.nodeName,u=e=>!!e&&(null==e?void 0:e.nodeType)===Node.DOCUMENT_NODE,l=e=>e.nodeType===Node.DOCUMENT_TYPE_NODE,d=e=>e.nodeType===Node.DOCUMENT_FRAGMENT_NODE,f=e=>void 0!==(null==e?void 0:e.nodeName),h=e=>"#document-fragment"===e.nodeName&&"ShadowRoot"===e.constructor.name,p=e=>"#document-fragment"===e.nodeName&&"ShadowRoot"!==e.constructor.name,v=e=>"HEAD"===e.nodeName,y=e=>"OBJECT"===e.nodeName,g=e=>"SELECT"===e.nodeName,m=e=>null!==e&&("STYLE"===e.nodeName||"style"===e.nodeName),b=e=>"SCRIPT"===e.nodeName||"NOSCRIPT"===e.nodeName,w=e=>"#comment"===e.nodeName,S=e=>"IMG"===e.nodeName,O=e=>"image"===e.nodeName,E=e=>"use"===e.nodeName,P=e=>"SOURCE"===e.nodeName,x=e=>"PICTURE"===e.nodeName,T=e=>"INPUT"===e.nodeName,k=e=>T(e)||c(e),I=e=>"LINK"===e.nodeName,C=e=>I(e)&&["stylesheet","alternate stylesheet"].includes(e.rel),R=e=>"META"===e.nodeName,A=e=>"TITLE"===e.nodeName,j=e=>"IFRAME"===e.nodeName,M=e=>"CANVAS"===e.nodeName,N=e=>"VIDEO"===e.nodeName;(o=n||(n={})).XLINK="http://www.w3.org/1999/xlink",o.XHTML="http://www.w3.org/1999/xhtml",o.XML="https://www.w3.org/XML/1998/namespace"},1629:function(){if("function"!=typeof Array.prototype.flat&&Object.defineProperty(Array.prototype,"flat",{configurable:!0,value:function e(t=1){return 0===t?Array.prototype.slice.call(this):Array.prototype.reduce.call(this,(r,n)=>(Array.isArray(n)?r.push(...e.call(n,t-1)):r.push(n),r),[])},writable:!0}),"function"!=typeof Array.prototype.flatMap&&Object.defineProperty(Array.prototype,"flatMap",{configurable:!0,value:function(...e){return Function.prototype.apply.call(Array.prototype.map,this,e).flat()},writable:!0}),"function"!=typeof Array.from&&(Array.from=function(){try{e=null!=(t=Symbol.iterator)?t:"Symbol(Symbol.iterator)"}catch(t){e="Symbol(Symbol.iterator)"}var e,t,r=Object.prototype.toString,n=function(e){return"function"==typeof e||"[object Function]"===r.call(e)};return function(t){var r,o=Object(t),i=n(o[e]);if(null==t&&!i)throw TypeError("Array.from requires an array-like object or iterator - not null or undefined");var s=arguments.length>1?arguments[1]:void 0;if(void 0!==s){if(!n(s))throw TypeError("Array.from: when provided, the second argument must be a function");arguments.length>2&&(r=arguments[2])}var a=Math.min(Math.max(function(e){var t=Number(e);return Number.isNaN(t)?0:0!==t&&Number.isFinite(t)?(t>0?1:-1)*Math.floor(Math.abs(t)):t}(o.length),0),9007199254740991);return function(e,t,r,n,o,i){for(var s=0;s<r||o;){var a=n(s),c=o?a.value:a;if(o&&a.done)return t;t[s]=i?void 0===e?i(c,s):i.call(e,c,s):c,s+=1}if(o)throw TypeError("Array.from: provided arrayLike or iterator has length more then 2 ** 52 - 1");return t.length=r,t}(r,n(this)?Object(new this(a)):Array(a),a,function(t,r){var n=t&&r[e]();return function(e){return t?n.next():r[e]}}(i,o),i,s)}}()),"function"!=typeof Array.prototype.includes){let e=(e,t)=>e===t||"number"==typeof e&&"number"==typeof t&&Number.isNaN(e)&&Number.isNaN(t);Object.defineProperty(Array.prototype,"includes",{value:function(t,r=0){if(null==this)throw TypeError('"this" is null or not defined');var n=Object(this),o=n.length>>>0;if(0===o)return!1;for(var i=Math.max(r>=0?r:o-Math.abs(r),0);i<o;){if(e(n[i],t))return!0;i+=1}return!1}})}"function"!=typeof Array.prototype.find&&(Array.prototype.find=function(e){if(null===this)throw TypeError("Array.prototype.find called on null or undefined");if("function"!=typeof e)throw TypeError("callback must be a function");for(var t=Object(this),r=t.length>>>0,n=arguments[1],o=0;o<r;o++){var i=t[o];if(e.call(n,i,o,t))return i}})},3613:function(){class e{addEventListener(e,t){"message"===e&&("function"!=typeof t||this.onmessageListeners.includes(t)||this.onmessageListeners.push(t))}close(){}dispatchEvent(e){return this.onmessage&&this.onmessage(e),this.onmessageListeners.forEach(t=>t(e)),!0}postMessage(e){this.otherPort&&this.otherPort.dispatchEvent({data:e})}removeEventListener(e,t){if("message"!==e)return;let r=this.onmessageListeners.indexOf(t);-1!==r&&this.onmessageListeners.splice(r,1)}start(){}constructor(){this.onmessage=null,this.onmessageerror=null,this.otherPort=null,this.onmessageListeners=[]}}window.MessagePort&&window.MessageChannel||(window.MessagePort=e,window.MessageChannel=class{constructor(){this.port1=new e,this.port2=new e,this.port1.otherPort=this.port2,this.port2.otherPort=this.port1}})},544:function(){Object.setPrototypeOf||(Object.prototype.setPrototypeOf=function(e,t){if(e.__proto__)return e.__proto__=t,e;var r=function(){for(var t in e)Object.defineProperty(this,t,{value:e[t]})};return r.prototype=t,new r})},8325:function(){function e(e,t){let r=this.event&&this.event.type,n=new XMLHttpRequest;n.open("POST",e,"unload"!==r&&"beforeunload"!==r),n.withCredentials=!0,n.setRequestHeader("Accept","*/*"),"string"==typeof t?(n.setRequestHeader("Content-Type","text/plain;charset=UTF-8"),n.responseType="text/plain"):t instanceof Blob&&t.type&&n.setRequestHeader("Content-Type",t.type);try{n.send(t)}catch(e){return!1}return!0}function t(){return"navigator"in this&&"sendBeacon"in this.navigator}(function(){t.call(this)||("navigator"in this||(this.navigator={}),this.navigator.sendBeacon=e.bind(this))}).call("object"===("undefined"==typeof window?"undefined":("function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(window))?window:void 0)}},lt={};function dt(e){var t=lt[e];if(void 0!==t)return t.exports;var r=lt[e]={exports:{}};return ut[e].call(r.exports,r,r.exports,dt),r.exports}dt.d=(e,t)=>{for(var r in t)dt.o(t,r)&&!dt.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},dt.g=(()=>{if("object"==typeof globalThis)return globalThis;try{return Function("return this")()}catch(e){if("object"==typeof window)return window}})(),dt.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t);var ft={};(()=>{dt(1629),dt(3460),dt(8396),dt(804),dt(3613);var e=dt(9517);function t(e){return null!=e.parentNode?t(e.parentNode):e}"isConnected"in Node.prototype||Object.defineProperty(Node.prototype,"isConnected",{get(){return!(this.ownerDocument&&this.ownerDocument.compareDocumentPosition(this)&this.DOCUMENT_POSITION_DISCONNECTED)}}),"getRootNode"in Node.prototype||Object.defineProperty(Node.prototype,"getRootNode",{configurable:!1,enumerable:!1,value:function(r){return"object"==typeof r&&r.composed?function r(n){let o=t(n);return(0,e.Zq)(o)?r(o.host):o}(this):t(this)}}),dt(544),dt(5965),dt(533),dt(8013),dt(8553),dt(2124);var r=function(){if("undefined"!=typeof Map)return Map;function e(e,t){var r=-1;return e.some(function(e,n){return e[0]===t&&(r=n,!0)}),r}function t(){this.__entries__=[]}return Object.defineProperty(t.prototype,"size",{get:function(){return this.__entries__.length},enumerable:!0,configurable:!0}),t.prototype.get=function(t){var r=e(this.__entries__,t),n=this.__entries__[r];return n&&n[1]},t.prototype.set=function(t,r){var n=e(this.__entries__,t);~n?this.__entries__[n][1]=r:this.__entries__.push([t,r])},t.prototype.delete=function(t){var r=this.__entries__,n=e(r,t);~n&&r.splice(n,1)},t.prototype.has=function(t){return!!~e(this.__entries__,t)},t.prototype.clear=function(){this.__entries__.splice(0)},t.prototype.forEach=function(e,t){void 0===t&&(t=null);for(var r=0,n=this.__entries__;r<n.length;r++){var o=n[r];e.call(t,o[1],o[0])}},t}(),n="undefined"!=typeof window&&"undefined"!=typeof document&&window.document===document,o=void 0!==dt.g&&dt.g.Math===Math?dt.g:"undefined"!=typeof self&&self.Math===Math?self:"undefined"!=typeof window&&window.Math===Math?window:Function("return this")(),i="function"==typeof requestAnimationFrame?requestAnimationFrame.bind(o):function(e){return setTimeout(function(){return e(Date.now())},1e3/60)},s=["top","right","bottom","left","width","height","size","weight"],a="undefined"!=typeof MutationObserver,c=function(){function e(){this.connected_=!1,this.mutationEventsAdded_=!1,this.mutationsObserver_=null,this.observers_=[],this.onTransitionEnd_=this.onTransitionEnd_.bind(this),this.refresh=function(e){var t=!1,r=!1,n=0;function o(){t&&(t=!1,e()),r&&a()}function s(){i(o)}function a(){var e=Date.now();if(t){if(e-n<2)return;r=!0}else t=!0,r=!1,setTimeout(s,20);n=e}return a}(this.refresh.bind(this))}return e.prototype.addObserver=function(e){~this.observers_.indexOf(e)||this.observers_.push(e),this.connected_||this.connect_()},e.prototype.removeObserver=function(e){var t=this.observers_,r=t.indexOf(e);~r&&t.splice(r,1),!t.length&&this.connected_&&this.disconnect_()},e.prototype.refresh=function(){this.updateObservers_()&&this.refresh()},e.prototype.updateObservers_=function(){var e=this.observers_.filter(function(e){return e.gatherActive(),e.hasActive()});return e.forEach(function(e){return e.broadcastActive()}),e.length>0},e.prototype.connect_=function(){n&&!this.connected_&&(document.addEventListener("transitionend",this.onTransitionEnd_),window.addEventListener("resize",this.refresh),a?(this.mutationsObserver_=new MutationObserver(this.refresh),this.mutationsObserver_.observe(document,{attributes:!0,childList:!0,characterData:!0,subtree:!0})):(document.addEventListener("DOMSubtreeModified",this.refresh),this.mutationEventsAdded_=!0),this.connected_=!0)},e.prototype.disconnect_=function(){n&&this.connected_&&(document.removeEventListener("transitionend",this.onTransitionEnd_),window.removeEventListener("resize",this.refresh),this.mutationsObserver_&&this.mutationsObserver_.disconnect(),this.mutationEventsAdded_&&document.removeEventListener("DOMSubtreeModified",this.refresh),this.mutationsObserver_=null,this.mutationEventsAdded_=!1,this.connected_=!1)},e.prototype.onTransitionEnd_=function(e){var t=e.propertyName,r=void 0===t?"":t;s.some(function(e){return!!~r.indexOf(e)})&&this.refresh()},e.getInstance=function(){return this.instance_||(this.instance_=new e),this.instance_},e.instance_=null,e}(),u=function(e,t){for(var r=0,n=Object.keys(t);r<n.length;r++){var o=n[r];Object.defineProperty(e,o,{value:t[o],enumerable:!1,writable:!1,configurable:!0})}return e},l=function(e){return e&&e.ownerDocument&&e.ownerDocument.defaultView||o},d=v(0,0,0,0);function f(e){return parseFloat(e)||0}function h(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];return t.reduce(function(t,r){return t+f(e["border-"+r+"-width"])},0)}var p="undefined"!=typeof SVGGraphicsElement?function(e){return e instanceof l(e).SVGGraphicsElement}:function(e){return e instanceof l(e).SVGElement&&"function"==typeof e.getBBox};function v(e,t,r,n){return{x:e,y:t,width:r,height:n}}var y=function(){function e(e){this.broadcastWidth=0,this.broadcastHeight=0,this.contentRect_=v(0,0,0,0),this.target=e}return e.prototype.isActive=function(){var e=function(e){return n?p(e)?v(0,0,(t=e.getBBox()).width,t.height):function(e){var t,r=e.clientWidth,n=e.clientHeight;if(!r&&!n)return d;var o=l(e).getComputedStyle(e),i=function(e){for(var t={},r=0,n=["top","right","bottom","left"];r<n.length;r++){var o=n[r],i=e["padding-"+o];t[o]=f(i)}return t}(o),s=i.left+i.right,a=i.top+i.bottom,c=f(o.width),u=f(o.height);if("border-box"===o.boxSizing&&(Math.round(c+s)!==r&&(c-=h(o,"left","right")+s),Math.round(u+a)!==n&&(u-=h(o,"top","bottom")+a)),(t=e)!==l(t).document.documentElement){var p=Math.round(c+s)-r,y=Math.round(u+a)-n;1!==Math.abs(p)&&(c-=p),1!==Math.abs(y)&&(u-=y)}return v(i.left,i.top,c,u)}(e):d;var t}(this.target);return this.contentRect_=e,e.width!==this.broadcastWidth||e.height!==this.broadcastHeight},e.prototype.broadcastRect=function(){var e=this.contentRect_;return this.broadcastWidth=e.width,this.broadcastHeight=e.height,e},e}(),g=function(e,t){var r,n,o,i,s,a=(r=t.x,n=t.y,o=t.width,i=t.height,u(s=Object.create(("undefined"!=typeof DOMRectReadOnly?DOMRectReadOnly:Object).prototype),{x:r,y:n,width:o,height:i,top:n,right:r+o,bottom:i+n,left:r}),s);u(this,{target:e,contentRect:a})},m=function(){function e(e,t,n){if(this.activeObservations_=[],this.observations_=new r,"function"!=typeof e)throw TypeError("The callback provided as parameter 1 is not a function.");this.callback_=e,this.controller_=t,this.callbackCtx_=n}return e.prototype.observe=function(e){if(!arguments.length)throw TypeError("1 argument required, but only 0 present.");if("undefined"!=typeof Element&&Element instanceof Object){if(!(e instanceof l(e).Element))throw TypeError('parameter 1 is not of type "Element".');var t=this.observations_;t.has(e)||(t.set(e,new y(e)),this.controller_.addObserver(this),this.controller_.refresh())}},e.prototype.unobserve=function(e){if(!arguments.length)throw TypeError("1 argument required, but only 0 present.");if("undefined"!=typeof Element&&Element instanceof Object){if(!(e instanceof l(e).Element))throw TypeError('parameter 1 is not of type "Element".');var t=this.observations_;t.has(e)&&(t.delete(e),t.size||this.controller_.removeObserver(this))}},e.prototype.disconnect=function(){this.clearActive(),this.observations_.clear(),this.controller_.removeObserver(this)},e.prototype.gatherActive=function(){var e=this;this.clearActive(),this.observations_.forEach(function(t){t.isActive()&&e.activeObservations_.push(t)})},e.prototype.broadcastActive=function(){if(this.hasActive()){var e=this.callbackCtx_,t=this.activeObservations_.map(function(e){return new g(e.target,e.broadcastRect())});this.callback_.call(e,t,e),this.clearActive()}},e.prototype.clearActive=function(){this.activeObservations_.splice(0)},e.prototype.hasActive=function(){return this.activeObservations_.length>0},e}(),b="undefined"!=typeof WeakMap?new WeakMap:new r,w=function e(t){if(!(this instanceof e))throw TypeError("Cannot call a class as a function.");if(!arguments.length)throw TypeError("1 argument required, but only 0 present.");var r=new m(t,c.getInstance(),this);b.set(this,r)};["observe","unobserve","disconnect"].forEach(function(e){w.prototype[e]=function(){var t;return(t=b.get(this))[e].apply(t,arguments)}});var S=void 0!==o.ResizeObserver?o.ResizeObserver:w;window.ResizeObserver||(window.ResizeObserver=S),dt(8325),dt(3489),dt(6115),dt(1463),dt(8230),dt(9237),dt(3095),dt(854),dt(2466);let O=function(e){var t=this.constructor;return this.then(function(r){return t.resolve(e()).then(function(){return r})},function(r){return t.resolve(e()).then(function(){return t.reject(r)})})},E=function(e){return new this(function(t,r){if(!e||void 0===e.length)return r(TypeError(typeof e+" "+e+" is not iterable(cannot read property Symbol(Symbol.iterator))"));var n=Array.prototype.slice.call(e);if(0===n.length)return t([]);for(var o=n.length,i=0;i<n.length;i++)!function e(r,i){if(i&&("object"==typeof i||"function"==typeof i)){var s=i.then;if("function"==typeof s)return void s.call(i,function(t){e(r,t)},function(e){n[r]={status:"rejected",reason:e},0==--o&&t(n)})}n[r]={status:"fulfilled",value:i},0==--o&&t(n)}(i,n[i])})};function P(e,t){this.name="AggregateError",this.errors=e,this.message=t||""}P.prototype=Error.prototype;let x=function(e){var t=this;return new t(function(r,n){if(!e||void 0===e.length)return n(TypeError("Promise.any accepts an array"));var o=Array.prototype.slice.call(e);if(0===o.length)return n();for(var i=[],s=0;s<o.length;s++)try{t.resolve(o[s]).then(r).catch(function(e){i.push(e),i.length===o.length&&n(new P(i,"All promises were rejected"))})}catch(e){n(e)}})};var T=setTimeout;function k(e){return!(!e||void 0===e.length)}function I(){}function C(e){if(!(this instanceof C))throw TypeError("Promises must be constructed via new");if("function"!=typeof e)throw TypeError("not a function");this._state=0,this._handled=!1,this._value=void 0,this._deferreds=[],L(e,this)}function R(e,t){for(;3===e._state;)e=e._value;0!==e._state?(e._handled=!0,C._immediateFn(function(){var r,n=1===e._state?t.onFulfilled:t.onRejected;if(null!==n){try{r=n(e._value)}catch(e){return void j(t.promise,e)}A(t.promise,r)}else(1===e._state?A:j)(t.promise,e._value)})):e._deferreds.push(t)}function A(e,t){try{if(t===e)throw TypeError("A promise cannot be resolved with itself.");if(t&&("object"==typeof t||"function"==typeof t)){var r=t.then;if(t instanceof C)return e._state=3,e._value=t,void M(e);if("function"==typeof r)return void L(function(){r.apply(t,arguments)},e)}e._state=1,e._value=t,M(e)}catch(t){j(e,t)}}function j(e,t){e._state=2,e._value=t,M(e)}function M(e){2===e._state&&0===e._deferreds.length&&C._immediateFn(function(){e._handled||C._unhandledRejectionFn(e._value)});for(var t=0,r=e._deferreds.length;t<r;t++)R(e,e._deferreds[t]);e._deferreds=null}function N(e,t,r){this.onFulfilled="function"==typeof e?e:null,this.onRejected="function"==typeof t?t:null,this.promise=r}function L(e,t){var r=!1;try{e(function(e){r||(r=!0,A(t,e))},function(e){r||(r=!0,j(t,e))})}catch(e){if(r)return;r=!0,j(t,e)}}C.prototype.catch=function(e){return this.then(null,e)},C.prototype.then=function(e,t){var r=new this.constructor(I);return R(this,new N(e,t,r)),r},C.prototype.finally=O,C.all=function(e){return new C(function(t,r){if(!k(e))return r(TypeError("Promise.all accepts an array"));var n=Array.prototype.slice.call(e);if(0===n.length)return t([]);for(var o=n.length,i=0;i<n.length;i++)!function e(i,s){try{if(s&&("object"==typeof s||"function"==typeof s)){var a=s.then;if("function"==typeof a)return void a.call(s,function(t){e(i,t)},r)}n[i]=s,0==--o&&t(n)}catch(e){r(e)}}(i,n[i])})},C.any=x,C.allSettled=E,C.resolve=function(e){return e&&"object"==typeof e&&e.constructor===C?e:new C(function(t){t(e)})},C.reject=function(e){return new C(function(t,r){r(e)})},C.race=function(e){return new C(function(t,r){if(!k(e))return r(TypeError("Promise.race accepts an array"));for(var n=0,o=e.length;n<o;n++)C.resolve(e[n]).then(t,r)})},C._immediateFn="function"==typeof setImmediate&&function(e){setImmediate(e)}||function(e){T(e,0)},C._unhandledRejectionFn=function(e){"undefined"!=typeof console&&console&&console.warn("Possible Unhandled Promise Rejection:",e)};var _=function(){if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if(void 0!==dt.g)return dt.g;throw Error("unable to locate global object")}();"function"!=typeof _.Promise?_.Promise=C:(_.Promise.prototype.finally||(_.Promise.prototype.finally=O),_.Promise.allSettled||(_.Promise.allSettled=E),_.Promise.any||(_.Promise.any=x));var D="undefined"!=typeof globalThis&&globalThis||"undefined"!=typeof self&&self||void 0!==dt.g&&dt.g||{},B="URLSearchParams"in D,F="Symbol"in D&&"iterator"in Symbol,U="FileReader"in D&&"Blob"in D&&function(){try{return new Blob,!0}catch(e){return!1}}(),W="FormData"in D,z="ArrayBuffer"in D;if(z)var V=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],G=ArrayBuffer.isView||function(e){return e&&V.indexOf(Object.prototype.toString.call(e))>-1};function q(e){if("string"!=typeof e&&(e=String(e)),/[^a-z0-9\-#$%&'*+.^_`|~!]/i.test(e)||""===e)throw TypeError('Invalid character in header field name: "'+e+'"');return e.toLowerCase()}function H(e){return"string"!=typeof e&&(e=String(e)),e}function $(e){var t={next:function(){var t=e.shift();return{done:void 0===t,value:t}}};return F&&(t[Symbol.iterator]=function(){return t}),t}function K(e){this.map={},e instanceof K?e.forEach(function(e,t){this.append(t,e)},this):Array.isArray(e)?e.forEach(function(e){if(2!=e.length)throw TypeError("Headers constructor: expected name/value pair to be length 2, found"+e.length);this.append(e[0],e[1])},this):e&&Object.getOwnPropertyNames(e).forEach(function(t){this.append(t,e[t])},this)}function J(e){if(!e._noBody){if(e.bodyUsed)return Promise.reject(TypeError("Already read"));e.bodyUsed=!0}}function Q(e){return new Promise(function(t,r){e.onload=function(){t(e.result)},e.onerror=function(){r(e.error)}})}function Y(e){var t=new FileReader,r=Q(t);return t.readAsArrayBuffer(e),r}function X(e){if(e.slice)return e.slice(0);var t=new Uint8Array(e.byteLength);return t.set(new Uint8Array(e)),t.buffer}function Z(){return this.bodyUsed=!1,this._initBody=function(e){if(this.bodyUsed=this.bodyUsed,this._bodyInit=e,e)if("string"==typeof e)this._bodyText=e;else if(U&&Blob.prototype.isPrototypeOf(e))this._bodyBlob=e;else if(W&&FormData.prototype.isPrototypeOf(e))this._bodyFormData=e;else if(B&&URLSearchParams.prototype.isPrototypeOf(e))this._bodyText=e.toString();else{var t;z&&U&&(t=e)&&DataView.prototype.isPrototypeOf(t)?(this._bodyArrayBuffer=X(e.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):z&&(ArrayBuffer.prototype.isPrototypeOf(e)||G(e))?this._bodyArrayBuffer=X(e):this._bodyText=e=Object.prototype.toString.call(e)}else this._noBody=!0,this._bodyText="";!this.headers.get("content-type")&&("string"==typeof e?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):B&&URLSearchParams.prototype.isPrototypeOf(e)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},U&&(this.blob=function(){var e=J(this);if(e)return e;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(!this._bodyFormData)return Promise.resolve(new Blob([this._bodyText]));throw Error("could not read FormData body as blob")}),this.arrayBuffer=function(){if(this._bodyArrayBuffer)return J(this)||(ArrayBuffer.isView(this._bodyArrayBuffer)?Promise.resolve(this._bodyArrayBuffer.buffer.slice(this._bodyArrayBuffer.byteOffset,this._bodyArrayBuffer.byteOffset+this._bodyArrayBuffer.byteLength)):Promise.resolve(this._bodyArrayBuffer));if(U)return this.blob().then(Y);throw Error("could not read as ArrayBuffer")},this.text=function(){var e,t,r,n,o,i=J(this);if(i)return i;if(this._bodyBlob)return e=this._bodyBlob,r=Q(t=new FileReader),o=(n=/charset=([A-Za-z0-9_-]+)/.exec(e.type))?n[1]:"utf-8",t.readAsText(e,o),r;if(this._bodyArrayBuffer)return Promise.resolve(function(e){for(var t=new Uint8Array(e),r=Array(t.length),n=0;n<t.length;n++)r[n]=String.fromCharCode(t[n]);return r.join("")}(this._bodyArrayBuffer));if(!this._bodyFormData)return Promise.resolve(this._bodyText);throw Error("could not read FormData body as text")},W&&(this.formData=function(){return this.text().then(re)}),this.json=function(){return this.text().then(JSON.parse)},this}K.prototype.append=function(e,t){e=q(e),t=H(t);var r=this.map[e];this.map[e]=r?r+", "+t:t},K.prototype.delete=function(e){delete this.map[q(e)]},K.prototype.get=function(e){return e=q(e),this.has(e)?this.map[e]:null},K.prototype.has=function(e){return this.map.hasOwnProperty(q(e))},K.prototype.set=function(e,t){this.map[q(e)]=H(t)},K.prototype.forEach=function(e,t){for(var r in this.map)this.map.hasOwnProperty(r)&&e.call(t,this.map[r],r,this)},K.prototype.keys=function(){var e=[];return this.forEach(function(t,r){e.push(r)}),$(e)},K.prototype.values=function(){var e=[];return this.forEach(function(t){e.push(t)}),$(e)},K.prototype.entries=function(){var e=[];return this.forEach(function(t,r){e.push([r,t])}),$(e)},F&&(K.prototype[Symbol.iterator]=K.prototype.entries);var ee=["CONNECT","DELETE","GET","HEAD","OPTIONS","PATCH","POST","PUT","TRACE"];function te(e,t){if(!(this instanceof te))throw TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');var r,n,o=(t=t||{}).body;if(e instanceof te){if(e.bodyUsed)throw TypeError("Already read");this.url=e.url,this.credentials=e.credentials,t.headers||(this.headers=new K(e.headers)),this.method=e.method,this.mode=e.mode,this.signal=e.signal,o||null==e._bodyInit||(o=e._bodyInit,e.bodyUsed=!0)}else this.url=String(e);if(this.credentials=t.credentials||this.credentials||"same-origin",(t.headers||!this.headers)&&(this.headers=new K(t.headers)),this.method=(n=(r=t.method||this.method||"GET").toUpperCase(),ee.indexOf(n)>-1?n:r),this.mode=t.mode||this.mode||null,this.signal=t.signal||this.signal||function(){if("AbortController"in D)return(new AbortController).signal}(),this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&o)throw TypeError("Body not allowed for GET or HEAD requests");if(this._initBody(o),!("GET"!==this.method&&"HEAD"!==this.method||"no-store"!==t.cache&&"no-cache"!==t.cache)){var i=/([?&])_=[^&]*/;i.test(this.url)?this.url=this.url.replace(i,"$1_="+(new Date).getTime()):this.url+=(/\?/.test(this.url)?"&":"?")+"_="+(new Date).getTime()}}function re(e){var t=new FormData;return e.trim().split("&").forEach(function(e){if(e){var r=e.split("="),n=r.shift().replace(/\+/g," "),o=r.join("=").replace(/\+/g," ");t.append(decodeURIComponent(n),decodeURIComponent(o))}}),t}function ne(e,t){if(!(this instanceof ne))throw TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');if(t||(t={}),this.type="default",this.status=void 0===t.status?200:t.status,this.status<200||this.status>599)throw RangeError("Failed to construct 'Response': The status provided (0) is outside the range [200, 599].");this.ok=this.status>=200&&this.status<300,this.statusText=void 0===t.statusText?"":""+t.statusText,this.headers=new K(t.headers),this.url=t.url||"",this._initBody(e)}te.prototype.clone=function(){return new te(this,{body:this._bodyInit})},Z.call(te.prototype),Z.call(ne.prototype),ne.prototype.clone=function(){return new ne(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new K(this.headers),url:this.url})},ne.error=function(){var e=new ne(null,{status:200,statusText:""});return e.ok=!1,e.status=0,e.type="error",e};var oe=[301,302,303,307,308];ne.redirect=function(e,t){if(-1===oe.indexOf(t))throw RangeError("Invalid status code");return new ne(null,{status:t,headers:{location:e}})};var ie=D.DOMException;try{new ie}catch(e){(ie=function(e,t){this.message=e,this.name=t;var r=Error(e);this.stack=r.stack}).prototype=Object.create(Error.prototype),ie.prototype.constructor=ie}function se(e,t){return new Promise(function(r,n){var o=new te(e,t);if(o.signal&&o.signal.aborted)return n(new ie("Aborted","AbortError"));var i=new XMLHttpRequest;function s(){i.abort()}if(i.onload=function(){var e,t,n={statusText:i.statusText,headers:(e=i.getAllResponseHeaders()||"",t=new K,e.replace(/\r?\n[\t ]+/g," ").split("\r").map(function(e){return 0===e.indexOf("\n")?e.substr(1,e.length):e}).forEach(function(e){var r=e.split(":"),n=r.shift().trim();if(n){var o=r.join(":").trim();try{t.append(n,o)}catch(e){console.warn("Response "+e.message)}}}),t)};0===o.url.indexOf("file://")&&(i.status<200||i.status>599)?n.status=200:n.status=i.status,n.url="responseURL"in i?i.responseURL:n.headers.get("X-Request-URL");var s="response"in i?i.response:i.responseText;setTimeout(function(){r(new ne(s,n))},0)},i.onerror=function(){setTimeout(function(){n(TypeError("Network request failed"))},0)},i.ontimeout=function(){setTimeout(function(){n(TypeError("Network request timed out"))},0)},i.onabort=function(){setTimeout(function(){n(new ie("Aborted","AbortError"))},0)},i.open(o.method,function(e){try{return""===e&&D.location.href?D.location.href:e}catch(t){return e}}(o.url),!0),"include"===o.credentials?i.withCredentials=!0:"omit"===o.credentials&&(i.withCredentials=!1),"responseType"in i&&(U?i.responseType="blob":z&&(i.responseType="arraybuffer")),t&&"object"==typeof t.headers&&!(t.headers instanceof K||D.Headers&&t.headers instanceof D.Headers)){var a=[];Object.getOwnPropertyNames(t.headers).forEach(function(e){a.push(q(e)),i.setRequestHeader(e,H(t.headers[e]))}),o.headers.forEach(function(e,t){-1===a.indexOf(t)&&i.setRequestHeader(t,e)})}else o.headers.forEach(function(e,t){i.setRequestHeader(t,e)});o.signal&&(o.signal.addEventListener("abort",s),i.onreadystatechange=function(){4===i.readyState&&o.signal.removeEventListener("abort",s)}),i.send(void 0===o._bodyInit?null:o._bodyInit)})}se.polyfill=!0,D.fetch||(D.fetch=se,D.Headers=K,D.Request=te,D.Response=ne)})(),(()=>{let e,t,r,n,o,i,s,a,c,u,l,d,f,h,p,v,y,g;function m(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}dt.d(ft,{H:()=>xs,M:()=>Lo}),(re=oe||(oe={}))[re.DEBUG=0]="DEBUG",re[re.INFO=1]="INFO",re[re.WARN=2]="WARN",re[re.ERROR=3]="ERROR",re[re.CRITICAL=4]="CRITICAL";class b{pushToGroup(e,t,...r){let n=this.groupsByKey.get(t);n||(n=[],this.groupsByKey.set(t,n)),n.push([e,...r])}constructor(){m(this,"groupLoggingIntervalId",null),m(this,"groupsByKey",new Map),m(this,"isGroupLoggingEnabled",!1),m(this,"loggingLevel",null),m(this,"loggingPrefix",""),m(this,"middlewares",[]),m(this,"critical",(e,...t)=>{this.processMiddlewares("console","critical",e,...t),null!==this.loggingLevel&&oe.CRITICAL>=this.loggingLevel&&console.error(`${this.loggingPrefix}${e}`,...t)}),m(this,"debug",(e,...t)=>{this.processMiddlewares("console","debug",e,...t),null!==this.loggingLevel&&oe.DEBUG>=this.loggingLevel&&console.debug(`${this.loggingPrefix}${e}`,...t)}),m(this,"debugGroup",(e,...t)=>{this.isGroupLoggingEnabled?null!==this.loggingLevel&&oe.DEBUG>=this.loggingLevel&&this.pushToGroup("debug",e,...t):this.debug(e,...t)}),m(this,"debugNoConsole",(e,...t)=>{this.processMiddlewares("internal","debug",e,...t)}),m(this,"enableGroupLogging",()=>{this.isGroupLoggingEnabled=!0,null!==this.groupLoggingIntervalId&&(this.groupLoggingIntervalId=setInterval(()=>{let e=this.groupsByKey;for(let[t,r]of(this.groupsByKey=new Map,e.entries())){for(let[e,...n]of(console.groupCollapsed(t),r))"critical"===e?console.error(...n):console[e](...n);console.groupEnd()}},1e3))}),m(this,"error",(e,...t)=>{this.processMiddlewares("console","error",e,...t),null!==this.loggingLevel&&oe.ERROR>=this.loggingLevel&&console.error(`${this.loggingPrefix}${e}`,...t)}),m(this,"errorGroup",(e,...t)=>{this.isGroupLoggingEnabled?null!==this.loggingLevel&&oe.ERROR>=this.loggingLevel&&this.pushToGroup("error",e,...t):this.error(e,...t)}),m(this,"errorNoConsole",(e,...t)=>{this.processMiddlewares("internal","error",e,...t)}),m(this,"info",(e,...t)=>{this.processMiddlewares("console","info",e,...t),null!==this.loggingLevel&&oe.INFO>=this.loggingLevel&&console.log(`${this.loggingPrefix}${e}`,...t)}),m(this,"infoGroup",(e,...t)=>{this.isGroupLoggingEnabled?null!==this.loggingLevel&&oe.INFO>=this.loggingLevel&&this.pushToGroup("info",e,...t):this.info(e,...t)}),m(this,"infoNoConsole",(e,...t)=>{this.processMiddlewares("internal","info",e,...t)}),m(this,"setLoggingLevel",e=>{this.loggingLevel=b.convertLogLevelToNumber(e)}),m(this,"setLoggingPrefix",e=>{this.loggingPrefix=e}),m(this,"setMiddleware",e=>{this.middlewares.push(e)}),m(this,"warn",(e,...t)=>{this.processMiddlewares("console","warn",e,...t),null!==this.loggingLevel&&oe.WARN>=this.loggingLevel&&console.warn(`${this.loggingPrefix}${e}`,...t)}),m(this,"warnGroup",(e,...t)=>{this.isGroupLoggingEnabled?null!==this.loggingLevel&&oe.WARN>=this.loggingLevel&&this.pushToGroup("warn",e,...t):this.warn(e,...t)}),m(this,"warnNoConsole",(e,...t)=>{this.processMiddlewares("internal","warn",e,...t)}),m(this,"processMiddlewares",(e,t,r,...n)=>{this.middlewares.forEach(o=>o(e,t,r,...n))})}}m(b,"convertLogLevelToNumber",e=>{switch(e){case"debug":return oe.DEBUG;case"info":return oe.INFO;case"warn":return oe.WARN;case"error":default:return oe.ERROR;case"critical":return oe.CRITICAL}});let w=new b,S=e=>{var t,r;let n=t=>`${e}: ${t}`;return t=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({},w),r=r={debug:(e,...t)=>{w.debug(n(e),...t)},error:(e,...t)=>{w.error(n(e),...t)},info:(e,...t)=>{w.info(n(e),...t)},warn:(e,...t)=>{w.warn(n(e),...t)}},Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):function(e){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t.push.apply(t,r)}return t}(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}),t},O=e=>{try{return!!e.location.href}catch(e){return!1}},E=()=>window.top!==window;class P{getWindowId(e){let t=this.idByWindow.get(e);if(!t)throw Error("Window ID not found in IframeWindowIdManager");return t}setWindowId(e,t){this.idByWindow.set(e,t)}constructor(){var e,t;e="idByWindow",t=new WeakMap,e in this?Object.defineProperty(this,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):this[e]=t}}let x=()=>((e=21)=>{let t="",r=crypto.getRandomValues(new Uint8Array(e|=0));for(;e--;)t+="useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict"[63&r[e]];return t})(),T=e=>{let t=null;try{t=window.localStorage.getItem(e)}catch(e){}return t},k=(e,t)=>{try{return window.localStorage.setItem(e,t),!0}catch(e){return!1}},I=e=>{try{window.localStorage.removeItem(e)}catch(e){}},C=e=>{let t=null;try{t=window.sessionStorage.getItem(e)}catch(e){}return t},R=(e,t)=>{try{return window.sessionStorage.setItem(e,t),!0}catch(e){return!1}},A=e=>void 0===e.isTrusted||e.isTrusted;function j(e,t,r,n,o,i,s){try{var a=e[i](s),c=a.value}catch(e){return void r(e)}a.done?t(c):Promise.resolve(c).then(n,o)}function M(e){return function(){var t=this,r=arguments;return new Promise(function(n,o){var i=e.apply(t,r);function s(e){j(i,n,o,s,a,"next",e)}function a(e){j(i,n,o,s,a,"throw",e)}s(void 0)})}}function N(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}let L="web_recorder_browser_instance_id",_="web_recorder_browser_instance_id_available",D="web_recorder_browser_instance_id_taken",B=x();class F{static get id(){if(!this.isInitialized)throw Error("Attempt to get id before BrowserInstanceService is initialized.");if(E()){if(!this._id)throw TypeError("ID is not set");return this._id}if(!this.isCommunicationWithOtherTabsFinished)return w.warn("BrowserInstanceService: Communication with other tabs is not finished yet. Treating tab as a new tab and stopping communication."),this._id=x(),this._id;if(!this._id)throw TypeError("ID is not set");return this._id}static initialize(){return M(function*(){this.isInitialized?w.error("BrowserInstanceService: Unexpected - initialize called more than once"):(this.isInitialized=!0,window.addEventListener("storage",this.handleIdAvailableStorageEvent),yield this.assignId())}).call(this)}static initializeInIframe(e){return E()?this.isInitialized?void w.error("BrowserInstanceService: Unexpected - initialize called more than once"):(this.isInitialized=!0,void(this._id=e)):void w.error("BrowserInstanceService: initializeInIframe should not be called outside of an iframe.")}static assignId(){return M(function*(){var e;if(this._id=null!=(e=C(L))?e:void 0,void 0===this._id)this._id=x(),w.debug("BrowserInstanceService: new tab identified",{id:this._id});else{k(_,this._id);let e=performance.now();yield this.waitForIdTakenEvent(),w.debug("BrowserInstanceService: communication with other tabs finished",performance.now()-e),I(_),I(D)}this.isCommunicationWithOtherTabsFinished=!0,R(L,this._id)}).call(this)}static waitForIdTakenEvent(){return new Promise(e=>{let t=window.setTimeout(()=>{w.debug("BrowserInstanceService: TAB_ID_TAKEN event not received in time."),window.removeEventListener("storage",r),e()},100),r=n=>{if(A(n)&&n.key===D&&n.newValue){let o=n.newValue.split(";"),i=o[0],s=o[1];i===this._id&&s!==B&&(this.isCommunicationWithOtherTabsFinished?w.error("BrowserInstanceService: duplicated tab identified but communication is already finished."):(this._id=x(),w.error("BrowserInstanceService: duplicated tab identified generating new ID",this._id),this.isCommunicationWithOtherTabsFinished=!0),window.removeEventListener("storage",r),clearTimeout(t),e())}};window.addEventListener("storage",r)})}}N(F,"isInitialized",!1),N(F,"_id",void 0),N(F,"isCommunicationWithOtherTabsFinished",!1),N(F,"handleIdAvailableStorageEvent",e=>{e.key!==_||e.newValue!==F._id||k(D,`${F._id};${B}`)});let U=(e,t)=>{for(let[r,n]of Object.entries(t))e.style.setProperty(r,n)},W=e=>{let t=null;try{var r,n;t=null!=(n=null==(r=e.defaultView)?void 0:r.frameElement)?n:null}catch(e){}return t},z=e=>null!==e&&"object"==typeof e&&"ArrayBuffer"===e.constructor.name;function V(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class G extends Error{toJSON(){return{name:this.name,additionalData:this.additionalData,message:this.message,originalAdditionalData:this.originalAdditionalData,originalError:this.originalError,originalMessage:this.originalMessage,originalName:this.originalName,originalStack:this.originalStack,shouldReport:this.shouldReport,stack:this.stack}}constructor(e,{additionalData:t={},originalError:r,shouldReport:n=!0}={}){super(e),V(this,"additionalData",void 0),V(this,"originalAdditionalData",void 0),V(this,"originalError",void 0),V(this,"originalMessage",void 0),V(this,"originalName",void 0),V(this,"originalStack",void 0),V(this,"shouldReport",void 0),Object.setPrototypeOf(this,G.prototype),this.name="ReplayError",this.additionalData=t,this.shouldReport=n,r&&(this.originalName=r.name,this.originalStack=r.stack,this.originalMessage=r.message,this.originalError=r),r instanceof G&&(this.originalAdditionalData=r.additionalData)}}let q=e=>{var t,r;return null!==e&&"object"==typeof e&&(e instanceof Error||(null==(t=e.constructor.name)?void 0:t.endsWith("Error"))||(null==(r=e.constructor.name)?void 0:r.endsWith("Exception")))};function H(e,t,r,n,o,i,s){try{var a=e[i](s),c=a.value}catch(e){return void r(e)}a.done?t(c):Promise.resolve(c).then(n,o)}function $(e){return function(){var t=this,r=arguments;return new Promise(function(n,o){var i=e.apply(t,r);function s(e){H(i,n,o,s,a,"next",e)}function a(e){H(i,n,o,s,a,"throw",e)}s(void 0)})}}function K(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class J{initialize(){return $(function*(){"loading"===document.readyState&&(yield new Promise(e=>{document.addEventListener("DOMContentLoaded",()=>{e()})})),this.initializeIframe(),new MutationObserver(()=>{this.iframe&&!this.iframe.isConnected&&(this.initializeIframe(),this.pendingMessages.forEach(e=>{let[t,r]=e;this.sendMessage(t,r).catch(e=>{w.error("Error sending pending message to iframe",e)})}))}).observe(document.body,{childList:!0,subtree:!1})}).call(this)}initializeIframe(){let[e,t]=(({attributes:e,iframeName:t,parentElement:r,style:n,styleAfterLoad:o})=>{let i=document.createElement("iframe");for(let[t,r]of Object.entries(e||{}))void 0!==r&&i.setAttribute(t,r);return U(i,n||{}),[i,e=>new Promise((n,s)=>{let a=()=>{i.removeEventListener("load",a),i.removeEventListener("error",c),U(i,o||{}),n()},c=()=>{i.removeEventListener("load",a),i.removeEventListener("error",c),U(i,o||{}),s(Error(`Player ${t} iframe load failed.`))};i.addEventListener("load",a),i.addEventListener("error",c),null==r||r.append(i),e&&setTimeout(()=>{i.removeEventListener("load",a),i.removeEventListener("error",c),s(Error(`Iframe ${t} load timeout.`))},e)})]})({attributes:{src:this.backgroundServiceSrc},iframeName:"session-replay-background-service",parentElement:document.body,style:{display:"none",height:"0",visibility:"hidden",width:"0"}});this.iframe=e,this.iframePromise=t()}constructor(e){var t;K(this,"config",void 0),K(this,"backgroundServiceSrc",void 0),K(this,"id",void 0),K(this,"iframe",void 0),K(this,"iframePromise",void 0),K(this,"pendingMessages",void 0),K(this,"bitmapToBlob",void 0),K(this,"blobToBase64",void 0),K(this,"compressImageBlob",void 0),K(this,"prepareAndSendMessage",void 0),K(this,"sendMessage",void 0),this.config=e,this.backgroundServiceSrc="",this.id=0,this.pendingMessages=[],this.bitmapToBlob=e=>$(function*(){if(this.iframe)try{let t=yield this.prepareAndSendMessage({type:"bitmapToArrayBuffer",data:{bitmap:e}},[e]);if(!z(t.arrayBuffer))throw new G("'bitmapToBlob' returned type is not ArrayBuffer");return new Blob([t.arrayBuffer])}catch(e){q(e)&&e.message&&(e.message.includes("Non-origin-clean ImageBitmap cannot be transferred.")||e.message.includes("invalid transferable array for structured clone")||e.message.includes("The object can not be cloned"))||w.error("error while sending message to iframe",e)}let t=new OffscreenCanvas(e.width,e.height),r=t.getContext("2d");return null==r||r.drawImage(e,0,0),e.close(),t.convertToBlob()}).call(this),this.blobToBase64=e=>$(function*(){let t=new FileReader;return t.readAsDataURL(e),new Promise((e,r)=>{t.addEventListener("error",()=>r(Error("Error reading file"))),t.addEventListener("loadend",()=>{e(t.result)})})})(),this.compressImageBlob=(e,t)=>$(function*(){if(!this.iframe)return;let r=yield e.arrayBuffer();try{let n=yield this.prepareAndSendMessage({type:"compressImageBlob",data:{type:e.type,arrayBuffer:r,quality:t}},[r]);if(!z(n.arrayBuffer))throw new G("'compressImageBlob' returned type is not ArrayBuffer");return new Blob([n.arrayBuffer],{type:n.type})}catch(e){w.error("error while sending message to iframe",e)}}).call(this),this.prepareAndSendMessage=(e,t)=>$(function*(){let r=this.id;this.id+=1,this.id%=Number.MAX_SAFE_INTEGER;let n=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){K(e,t,r[t])})}return e}({id:r},e);return this.pendingMessages.push([n,t]),this.sendMessage(n,t)}).call(this),this.sendMessage=(e,t)=>$(function*(){var r;if(!this.iframe)throw new G("Iframe is not initialized");yield this.iframePromise;let n=new URL(this.backgroundServiceSrc);return null==(r=this.iframe.contentWindow)||r.postMessage(e,n.origin,t),new Promise(t=>{let r=n=>{var o,i;if(n.source===(null==(o=this.iframe)?void 0:o.contentWindow)){let o;if("object"==typeof(o=i=n.data)&&null!==o&&"type"in o&&"string"==typeof o.type&&"id"in o&&"number"==typeof o.id&&"output"in i&&n.data.id===e.id)return this.pendingMessages=this.pendingMessages.filter(t=>t[0].id!==e.id),self.removeEventListener("message",r),t(n.data.data)}};self.addEventListener("message",r)})}).call(this),(null==(t=this.config.features)?void 0:t.backgroundServiceSrc)&&(this.backgroundServiceSrc=this.config.features.backgroundServiceSrc,this.initialize())}}class Q extends Error{constructor(...e){super(...e),Object.setPrototypeOf(this,Q.prototype)}}let Y="REPLAY_WEB";var X,Z,ee,te,re,ne,oe,ie,se,ae,ce,ue=((ne={})[ne.ACKNOWLEDGED=`${Y}__ACKNOWLEDGED`]="ACKNOWLEDGED",ne[ne.DATA=`${Y}__DATA`]="DATA",ne[ne.DISCOVERY=`${Y}__DISCOVERY`]="DISCOVERY",ne[ne.DISCOVERED=`${Y}__DISCOVERED`]="DISCOVERED",ne[ne.START_RECORDING=`${Y}__START_RECORDING`]="START_RECORDING",ne[ne.STOP_RECORDING=`${Y}__STOP_RECORDING`]="STOP_RECORDING",ne);function le(e,t,r,n,o,i,s){try{var a=e[i](s),c=a.value}catch(e){return void r(e)}a.done?t(c):Promise.resolve(c).then(n,o)}function de(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function fe(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){de(e,t,r[t])})}return e}function he(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t.push.apply(t,r)}return t}(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}),e}let pe=S("post-message-service");class ve{constructor(e){de(this,"config",void 0),de(this,"discoveredIframeWindows",void 0),de(this,"eventListenersByEventType",void 0),de(this,"isClosed",void 0),de(this,"pendingEventsByMessageEventSource",void 0),de(this,"waitingListenersByEventType",void 0),de(this,"waitingListenersByEventTypeByMessageEventSource",void 0),de(this,"addPostMessageEventListener",void 0),de(this,"broadcastEventToAllDiscoveredIframes",void 0),de(this,"clearDiscoveredIframeWindows",void 0),de(this,"close",void 0),de(this,"createPostMessageEvent",void 0),de(this,"isTherePendingEvent",void 0),de(this,"sendEventToSource",void 0),de(this,"waitForEventFromSource",void 0),de(this,"waitForEventFromSourceOrThrowAfterGivenTime",void 0),de(this,"postMessageEventListener",void 0),this.config=e,this.discoveredIframeWindows=new Set,this.eventListenersByEventType=new Map,this.isClosed=!1,this.pendingEventsByMessageEventSource=new Map,this.waitingListenersByEventType=new Map,this.waitingListenersByEventTypeByMessageEventSource=new Map,this.addPostMessageEventListener=(e,t)=>{let r=this.eventListenersByEventType.get(e);r?r.push(t):this.eventListenersByEventType.set(e,[t])},this.broadcastEventToAllDiscoveredIframes=e=>{this.discoveredIframeWindows.forEach(t=>{t.postMessage(e,"*")})},this.clearDiscoveredIframeWindows=()=>{this.discoveredIframeWindows.clear()},this.close=()=>{this.isClosed=!0},this.createPostMessageEvent=()=>({channelId:this.config.channelId}),this.isTherePendingEvent=(e,t)=>{let r=this.pendingEventsByMessageEventSource.get(t);if(r){var n;let t=(null!=(n=r.get(e))?n:[]).filter(t=>t.name===e);if(t.length>0)return t.length>1&&pe.warn("Received multiple events. Taking first received."),!0}return!1},this.sendEventToSource=(e,t)=>{pe.debug(`Sending ${e.name} event to source.`,e),t.postMessage(e,"*")},this.waitForEventFromSource=(e,t)=>{var r;return(r=function*(){let r=this.pendingEventsByMessageEventSource.get(t);if(r){var n;let t=null!=(n=r.get(e))?n:[],o=t.filter(t=>t.name===e);if(o.length>0)return o.length>1&&pe.warn("Received multiple events. Taking first received."),r.set(e,t.filter(t=>t.name!==e)),o[0]}let o=this.waitingListenersByEventTypeByMessageEventSource.get(t);void 0===o&&(o=new Map,this.waitingListenersByEventTypeByMessageEventSource.set(t,o));let i=yield new Promise(t=>{if(void 0===o)throw Error("listenersByWindow is undefined");o.set(e,t)});return o.delete(e),i},function(){var e=this,t=arguments;return new Promise(function(n,o){var i=r.apply(e,t);function s(e){le(i,n,o,s,a,"next",e)}function a(e){le(i,n,o,s,a,"throw",e)}s(void 0)})}).call(this)},this.waitForEventFromSourceOrThrowAfterGivenTime=(e,t,r=1e4)=>Promise.race([this.waitForEventFromSource(e,t),new Promise((t,n)=>{setTimeout(()=>{n(new Q(`Could not retrieve event ${e} in given time (${r}ms).`))},r)})]),this.postMessageEventListener=e=>{if(!A(e))return;let t=e.data;if((e=>{if(e&&"object"==typeof e&&Object.hasOwn(e,"name")){let t=e.name;if("string"==typeof t&&t.startsWith(`${Y}__`))return!0}return!1})(t)&&e.source){let r=e.source;if(t.channelId!==this.config.channelId)return void pe.debug("Received event with different channel ID.",e);t.name!==ue.DISCOVERY||this.isClosed||(pe.debug("Received discovery. Sending discovered response",e),this.sendEventToSource(he(fe({},this.createPostMessageEvent()),{name:ue.DISCOVERED}),r)),t.name!==ue.DISCOVERED||this.isClosed||(pe.debug("Received discovered. Sending acknowledged response",e),this.sendEventToSource(he(fe({},this.createPostMessageEvent()),{name:ue.ACKNOWLEDGED}),r),this.discoveredIframeWindows.add(r));let n=this.eventListenersByEventType.get(t.name);if(n)for(let t of(pe.debug(`Found listeners for event - ${e.data.name}.`,e),n))t(e.data,r);let o=this.waitingListenersByEventTypeByMessageEventSource.get(e.source);if(o){let r=o.get(t.name);r&&(pe.debug(`Found waiting listener for event - ${t.name}.`,e),r(t))}let i=this.waitingListenersByEventType.get(t.name);if(i&&i.length>0&&(pe.debug(`Found waiting listener from any source for event - ${t.name}.`,e),i.forEach(e=>e(t))),o||n||i&&i.length>0)return;pe.debug(`No pending listener found for ${t.name}.`);let s=this.pendingEventsByMessageEventSource.get(e.source);if(s){let e=s.get(t.name);e?(e.push(t),s.set(t.name,e)):s.set(t.name,[t])}else{let r=new Map;r.set(t.name,[t]),this.pendingEventsByMessageEventSource.set(e.source,r)}}},window.addEventListener("message",this.postMessageEventListener)}}function ye(e,t,r,n,o,i,s){try{var a=e[i](s),c=a.value}catch(e){return void r(e)}a.done?t(c):Promise.resolve(c).then(n,o)}function ge(e){return function(){var t=this,r=arguments;return new Promise(function(n,o){var i=e.apply(t,r);function s(e){ye(i,n,o,s,a,"next",e)}function a(e){ye(i,n,o,s,a,"throw",e)}s(void 0)})}}function me(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function be(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){me(e,t,r[t])})}return e}function we(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t.push.apply(t,r)}return t}(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}),e}let Se=S("post-message-iframe-service");class Oe extends ve{constructor(e){var t;super(e),me(t=this,"waitingStartRecordingEvent",void 0),me(t,"sendDataEventToParent",e=>{let r=window.parent;Se.debug("Sending data event to parent.",e),t.sendEventToSource(we(be({},t.createPostMessageEvent()),{name:ue.DATA,data:e}),r)}),me(t,"waitForParentDiscovery",({timeout:e})=>ge(function*(){let r=window.parent;Se.debug("Sending discovered event to parent.",window.location.href),t.sendEventToSource(we(be({},t.createPostMessageEvent()),{name:ue.DISCOVERED}),r);try{let n=e&&e>0;return Se.debug("Waiting for acknowledged event from parent."+(n?` (Timeout: ${e}ms)`:""),window.location.href),yield n?t.waitForEventFromSourceOrThrowAfterGivenTime(ue.ACKNOWLEDGED,r,e):t.waitForEventFromSource(ue.ACKNOWLEDGED,r),!0}catch(e){return e instanceof Q?Se.debug("Could not receive `acknowledged` post message. Timeout exceeded.",window.location.href):Se.warn("Error happened during receiving `acknowledged` post message from parent.",e,window.location.href,document.visibilityState),!1}})()),me(t,"waitForStartRecordingFromParent",()=>ge(function*(){let e=window.parent;try{Se.debug("Waiting for start session event from parent.",window.location.href);let r=t.waitingStartRecordingEvent;return r?(t.waitingStartRecordingEvent=void 0,r):yield t.waitForEventFromSource(ue.START_RECORDING,e)}catch(e){e instanceof Q&&(Se.debug("Could not receive post message in `init`. Timeout exceeded.",window.location.href),t.close()),Se.warn("Error happened during receiving post message from parent in `init`. Continuing normal recording.",e,window.location.href,document.visibilityState)}})())}}var Ee=dt(9517);function Pe(e){return"object"==typeof e&&!Array.isArray(e)&&null!==e}function xe(e){return"boolean"==typeof e}let Te=e=>e.startsWith("blob:"),ke=(e,t)=>{if(e=e.trim(),"string"==typeof t)try{return String(new URL(e,t))}catch(r){throw w.error("Could not parse an url from parts, path:",e,", owner file url:",t),r}if(!t.document)return e;try{let r=t.document.createElement("a");return r.href=e,r.href}catch(t){if(t instanceof TypeError&&"can't access dead object"===t.message)return e;throw t}},Ie=e=>{var t,r,n;let o;return!!((0,Ee.dI)(e)||(0,Ee.Q0)(e)||(0,Ee.BM)(e)&&(null===e.previousSibling||null===e.nextSibling)&&null!==e.textContent&&!/[^\t\n\r ]/.test(e.textContent)||(0,Ee.jI)(e)&&["manifest","preload","prefetch","modulepreload"].includes(null!=(t=e.getAttribute("rel"))?t:"")||(0,Ee.dg)(e)&&(["content-security-policy","refresh"].includes((null!=(r=e.getAttribute("http-equiv"))?r:"").toLowerCase())||["facebook-domain-verification","apple-itunes-app","google-site-verification"].includes((null!=(n=e.getAttribute("name"))?n:"").toLowerCase())))||!!((0,Ee.jI)(e)&&(o=e.href,["chrome-extension://","moz-extension://"].some(e=>o.startsWith(e))||Te(e.href)&&"stylesheet"!==e.rel))},Ce=e=>!(!(0,Ee.C5)(e)&&!(0,Ee.Q0)(e));function Re(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class Ae{nextNode(){let e=this.currentNode,t=NodeFilter.FILTER_ACCEPT;for(;;){for(;t!==NodeFilter.FILTER_REJECT&&(null==e?void 0:e.firstChild);)if(e=e.firstChild,(t=this.filter(e))===NodeFilter.FILTER_ACCEPT)return this.currentNode=e,e;let r=null,n=e;for(;null!==n;){if(n===this.root)return null;if(null!==(r=n.nextSibling)){e=r;break}n=n.parentNode}if((t=this.filter(e))===NodeFilter.FILTER_ACCEPT)return this.currentNode=e,e}}nextSibling(){let e=this.currentNode;if(e===this.root)return null;for(;;){let t=e.nextSibling;for(;null!==t;){e=t;let r=this.filter(e);if(r===NodeFilter.FILTER_ACCEPT)return this.currentNode=e,e;t=e.firstChild,(r===NodeFilter.FILTER_REJECT||null===t)&&(t=e.nextSibling)}if(null===(e=e.parentNode)||e===this.root||this.filter(e)===NodeFilter.FILTER_ACCEPT)return null}}parentNode(){let e=this.currentNode;for(;null!==e&&e!==this.root;)if(null!==(e=e.parentNode)&&this.filter(e)===NodeFilter.FILTER_ACCEPT)return this.currentNode=e,e;return null}filter(e){if(this.active)throw Error("CustomTreeWalker is in an invalid state.");let t=e.nodeType-1;if(!(this.whatToShow&1<<t))return NodeFilter.FILTER_SKIP;if(null===this.nodeFilter)return NodeFilter.FILTER_ACCEPT;this.active=!0;try{return this.nodeFilter.acceptNode(e)}finally{this.active=!1}}constructor(e,t,r){Re(this,"currentNode",void 0),Re(this,"nodeFilter",void 0),Re(this,"root",void 0),Re(this,"whatToShow",void 0),Re(this,"active",!1),this.root=e,this.currentNode=e,this.whatToShow=null!=t?t:NodeFilter.SHOW_ALL,this.nodeFilter=null!=r?r:null}}Re(Ae,"createTreeWalker",(e,t,r)=>new Ae(e,t,r));let je=e=>{let t=[],r=(0,Ee.Zq)(e)||(0,Ee.Rx)(e)?e.host:e.parentNode;for(;r;){t.push(r);let e=r.parentNode;r=null===e&&(0,Ee.Zq)(r)?r.host:e}return t};function*Me(e,t={}){let{recoverOnNotConnectedNodes:r,shouldProcessNode:n,useNativeTreeWalker:o}=t;if(Ie(e)||n&&!n(e))return;let i=new Set,s=(o?document:Ae).createTreeWalker(e,NodeFilter.SHOW_ALL,{acceptNode:e=>i.has(e)||Ie(e)?NodeFilter.FILTER_REJECT:n?n(e)?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_REJECT:NodeFilter.FILTER_ACCEPT}),a=s.currentNode;for(;a;){let e=je(a);if(yield a,(0,Ee.kK)(a)&&a.shadowRoot&&(yield*Me(a.shadowRoot,t)),i.add(a),r)if(a.isConnected){let t=je(a);for(let[r,n]of e.entries())if(t[r]!==n){s.currentNode=n;break}}else{let t=e.find(e=>e.isConnected);if(!t)return;s.currentNode=t}a=Ce(s.currentNode)?s.nextSibling():s.nextNode()}}let Ne=e=>{let t=e.parentNode;return null===t&&((0,Ee.Zq)(e)||(0,Ee.Rx)(e)?t=e.host:(0,Ee.JW)(e)&&(t=W(e))),t},Le=e=>{let t=e.parentElement;return null===t&&((0,Ee.Zq)(e)||(0,Ee.Rx)(e)?t=e.host:e.parentNode&&(0,Ee.JW)(e.parentNode)&&(t=W(e.parentNode))),t},_e=["card","credit","expiry","cvv","cvc"],De=["cc-name","cc-given-name","cc-additional-name","cc-family-name","cc-number","cc-exp","cc-exp-month","cc-exp-year","cc-csc","cc-type"],Be=new Set(["file","password"]),Fe=e=>e.replaceAll(/\S/gi,"*"),Ue=(e,t)=>({isPasswordInput:(0,Ee.cK)(e)&&"password"===e.type,sensitivityRuleType:We(e,t)}),We=(e,t=[])=>{let r=null;for(let n of[...t].reverse())if(ze(n.selector).some(Ve(e))){r=n.rule;break}return r},ze=e=>e.split(",").flatMap(e=>[e,`${e} *`]),Ve=e=>t=>{let r=(0,Ee.kK)(e)?e:Le(e);return null!==r&&r.matches(t)},Ge=(e,t)=>{let r=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({},e);return t.isPasswordInput&&(r.isPasswordInput=!0),"exclude"!==r.sensitivityRuleType&&(r.sensitivityRuleType=t.sensitivityRuleType),r};function qe(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function He(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){qe(e,t,r[t])})}return e}function $e(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t.push.apply(t,r)}return t}(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}),e}class Ke{constructor(e){qe(this,"config",void 0),qe(this,"privacyInfoByNode",void 0),qe(this,"deleteNodePrivacyInfo",void 0),qe(this,"getSensitivityRules",void 0),qe(this,"isCreditCardInput",void 0),qe(this,"isNodeExcluded",void 0),qe(this,"isNodeMasked",void 0),qe(this,"isNodeUnmasked",void 0),qe(this,"isPasswordInput",void 0),qe(this,"isSensitiveInput",void 0),qe(this,"recomputeNodePrivacyInfoForNodeAndItsSubtree",void 0),qe(this,"retrieveAndStoreNodePrivacyInfo",void 0),qe(this,"retrieveNodePrivacyInfo",void 0),qe(this,"setIsPasswordInput",void 0),qe(this,"shouldMaskInputNode",void 0),qe(this,"shouldMaskTextNode",void 0),qe(this,"isMaskAllInputsEnabled",void 0),qe(this,"isMaskAllTextEnabled",void 0),this.config=e,this.privacyInfoByNode=new WeakMap,this.deleteNodePrivacyInfo=e=>{this.privacyInfoByNode.delete(e)},this.getSensitivityRules=()=>this.config.sensitivityRules,this.isCreditCardInput=e=>(e=>{var t;let r=(null!=(t=e.getAttribute("autocomplete"))?t:"").toLowerCase();return!(!r||!De.some(e=>r.includes(e)))||Array.from(e.attributes).filter(e=>"value"!==e.name).flatMap(e=>[e.name,e.value]).some(e=>_e.some(t=>e.toLowerCase().includes(t)))})(e),this.isNodeExcluded=e=>"exclude"===this.retrieveNodePrivacyInfo(e).sensitivityRuleType,this.isNodeMasked=e=>["mask","exclude"].includes(this.retrieveNodePrivacyInfo(e).sensitivityRuleType),this.isNodeUnmasked=e=>"unmask"===this.retrieveNodePrivacyInfo(e).sensitivityRuleType,this.isPasswordInput=e=>this.retrieveNodePrivacyInfo(e).isPasswordInput,this.isSensitiveInput=e=>this.isPasswordInput(e)||(0,Ee.cK)(e)&&this.isCreditCardInput(e)||Be.has(e.type),this.recomputeNodePrivacyInfoForNodeAndItsSubtree=e=>{for(let t of Me(e,{useNativeTreeWalker:this.config.useNativeTreeWalker}))this.retrieveAndStoreNodePrivacyInfo(t)},this.retrieveAndStoreNodePrivacyInfo=e=>{let t,r=Ne(e),n=r?this.privacyInfoByNode.get(r):null,o=Ue(e,this.getSensitivityRules());if(n)t=Ge(n,o);else for(let r of(t=He({},o),function*(e,t=!1){if(t&&(0,Ee.JW)(e))return;let r=(0,Ee.kK)(e)?e:Le(e);for(;r;){if(yield r,t&&r.parentNode&&(0,Ee.JW)(r.parentNode))return;r=Le(r)}}(e)))t=Ge(Ue(r,this.getSensitivityRules()),t);let i=$e(He({},t),{parent:r}),s=this.privacyInfoByNode.get(e);return s&&s.isPasswordInput&&(i.isPasswordInput=!0),this.privacyInfoByNode.set(e,i),i},this.retrieveNodePrivacyInfo=e=>{let t=this.privacyInfoByNode.get(e);return void 0===t||Ne(e)!==t.parent?this.retrieveAndStoreNodePrivacyInfo(e):t},this.setIsPasswordInput=e=>{let t=this.retrieveNodePrivacyInfo(e);this.privacyInfoByNode.set(e,$e(He({},t),{isPasswordInput:!0,parent:Ne(e)}))},this.shouldMaskInputNode=e=>this.isNodeMasked(e)||this.isMaskAllInputsEnabled()&&!this.isNodeUnmasked(e)||(0,Ee.YD)(e)&&this.isSensitiveInput(e),this.shouldMaskTextNode=e=>this.isNodeMasked(e)||this.isMaskAllTextEnabled()&&!this.isNodeUnmasked(e),this.isMaskAllInputsEnabled=()=>this.config.maskAllInputs,this.isMaskAllTextEnabled=()=>this.config.maskAllText}}function Je(e,t,r,n,o,i,s){try{var a=e[i](s),c=a.value}catch(e){return void r(e)}a.done?t(c):Promise.resolve(c).then(n,o)}function Qe(e){return function(){var t=this,r=arguments;return new Promise(function(n,o){var i=e.apply(t,r);function s(e){Je(i,n,o,s,a,"next",e)}function a(e){Je(i,n,o,s,a,"throw",e)}s(void 0)})}}(X=ie||(ie={})).ANIMATION="animation",X.BLUR="blur",X.CLICK="click",X.DOM_SNAPSHOT="dom-snapshot",X.ELEMENT_ANIMATE="element-animate",X.ERROR="error",X.FOCUS="focus",X.FULLSCREEN="fullscreen",X.IMAGE_BITMAP="image-bitmap",X.INPUT="input",X.MOUSE_MOVE="mouse-move",X.POPOVER="popover",X.PULSE="pulse",X.RAGE_CLICK="rage-click",X.RESIZE="resize",X.SCROLL="scroll",X.SELECTION="selection",X.TAB_DESTROYED="tab-destroyed",X.TAB_DISCOVERED="tab-discovered",X.TAB_SWITCHED="tab-switched",X.TITLE="title",X.TOUCH_MOVE="touch-move",X.URL="url",X.NODE_MUTATION="node-mutation",X.VISUAL_VIEWPORT="visual-viewport",X.STYLESHEET_MUTATION="stylesheet-mutation",X.ADOPTED_STYLESHEET="adopted-stylesheet";let Ye=(e,t,r)=>Qe(function*(){let n=performance.now(),o=yield createImageBitmap(e);r({blob:yield t(o),timestamp:n})})();function Xe(e,t,r,n,o,i,s){try{var a=e[i](s),c=a.value}catch(e){return void r(e)}a.done?t(c):Promise.resolve(c).then(n,o)}function Ze(e){return function(){var t=this,r=arguments;return new Promise(function(n,o){var i=e.apply(t,r);function s(e){Xe(i,n,o,s,a,"next",e)}function a(e){Xe(i,n,o,s,a,"throw",e)}s(void 0)})}}function et(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}let tt={capture:!0,passive:!0};class rt{get currentWindow(){if(O(this._currentWindow))return this._currentWindow;throw TypeError("Window origin changed")}get nodeInfoManager(){return this.taskContext.windowScoped.nodeInfoManager}get postMessageMainService(){return this.taskContext.moduleScoped.postMessageMainService}get privacyManager(){return this.taskContext.windowScoped.privacyManager}get taskEmitter(){return this.taskContext.windowScoped.taskEmitter}get scrollManager(){return this.taskContext.windowScoped.scrollManager}get uploadReplayEvent(){return this.taskContext.config.uploadEvent}get windowIdManager(){return this.taskContext.moduleScoped.windowIdManager}get isStarted(){return this._isStarted}set isStarted(e){this._isStarted=e}start(){this.isStarted=!0,this.onStart()}stop(){this.isStarted=!1,this.onStop()}addDocumentEventListener(e,t,r=tt){let n=this.documentEventListenersMap.get(e);void 0===n&&(n=new Map,this.documentEventListenersMap.set(e,n));let{shouldProcessEvent:o}=this,i=function(r){return Ze(function*(){if(o(r))try{yield t.call(this,r)}catch(t){w.error(`Error happened in '${e}' document event listener`,t)}}).call(this)};this.currentWindow.document.addEventListener(e,i,r),n.set(t,i)}addEventListener(e,t,r=tt){let n=this.windowEventListenersMap.get(e);void 0===n&&(n=new Map,this.windowEventListenersMap.set(e,n));let{shouldProcessEvent:o}=this,i=function(r){return Ze(function*(){if(o(r))try{yield t.call(this,r)}catch(t){w.error(`Error happened in '${e}' window event listener`,t)}}).call(this)};this.currentWindow.addEventListener(e,i,r),n.set(t,i)}isTaskRunWithinMainWindow(){return 1===this.windowIdManager.getWindowId(this.currentWindow)}removeDocumentEventListener(e,t,r=tt){let n=this.documentEventListenersMap.get(e);if(n){let i=n.get(t);var o;if(i&&(n.delete(t),O(this.currentWindow)))(null==(o=this.currentWindow.document)?void 0:o.removeEventListener)?this.currentWindow.document.removeEventListener(e,i,r):w.debug("window.document.removeEventListener is undefined")}}removeEventListener(e,t,r=tt){let n=this.windowEventListenersMap.get(e);if(n){let o=n.get(t);o&&(n.delete(t),O(this.currentWindow)&&(this.currentWindow.removeEventListener?this.currentWindow.removeEventListener(e,o,r):w.debug("window.removeEventListener is undefined")))}}constructor(e,t){et(this,"_currentWindow",void 0),et(this,"taskContext",void 0),et(this,"_isStarted",void 0),et(this,"documentEventListenersMap",void 0),et(this,"windowEventListenersMap",void 0),et(this,"createReplayEventEnvelope",void 0),et(this,"shouldProcessEvent",void 0),this._currentWindow=e,this.taskContext=t,this._isStarted=!1,this.documentEventListenersMap=new Map,this.windowEventListenersMap=new Map,this.createReplayEventEnvelope=e=>({id:x(),relativeTime:0,timestamp:null!=e?e:this.taskContext.config.getTimestamp(),windowId:this.windowIdManager.getWindowId(this.currentWindow)}),this.shouldProcessEvent=e=>{if("unhandledrejection"===e.type&&/^((?!chrome|android).)*safari/i.test(navigator.userAgent))return!0;if(!(A(e)||["input","change"].includes(e.type)&&this.taskContext.config.exportForTests))return!1;let t=e.composedPath()[0];return!(void 0!==t&&(0,Ee.kK)(t)&&this.privacyManager.isNodeExcluded(t))}}}function nt(e,t,r,n,o,i,s){try{var a=e[i](s),c=a.value}catch(e){return void r(e)}a.done?t(c):Promise.resolve(c).then(n,o)}function ot(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class it extends rt{onStart(){var e,t;((null==(e=this.taskContext.config.features)?void 0:e.canvas)||(null==(t=this.taskContext.config.features)?void 0:t.video))&&(this.taskEmitter.addEventListener("nodeAdded",this.handleNodeAdded),this.taskEmitter.addEventListener("nodeRemoved",this.handleNodeRemoved))}onStop(){var e,t;((null==(e=this.taskContext.config.features)?void 0:e.canvas)||(null==(t=this.taskContext.config.features)?void 0:t.video))&&(Array.from(this.removeMonitorsByElement.values()).forEach(e=>e()),this.removeMonitorsByElement.clear(),this.taskEmitter.removeEventListener("nodeAdded",this.handleNodeAdded),this.taskEmitter.removeEventListener("nodeRemoved",this.handleNodeRemoved))}constructor(...e){var t;super(...e),ot(t=this,"removeMonitorsByElement",new Map),ot(t,"handleNodeAdded",({node:e})=>{var r,n;if(t.removeMonitorsByElement.has(e))return;let o=(0,Ee.qp)(e),i=(0,Ee.gX)(e);if(!o&&!i||o&&!(null==(r=t.taskContext.config.features)?void 0:r.canvas)||i&&!(null==(n=t.taskContext.config.features)?void 0:n.video))return;let s=t.nodeInfoManager.getIdByNode(e);if(void 0===s)return void w.error("ImageBitmap targetId is undefined",e);let a=((e,t,r,n)=>{let o=new Blob,i=e=>Qe(function*(){try{let t,r;(yield(t=o,r=e.blob,Qe(function*(){let[e,n]=yield Promise.all([t.arrayBuffer(),r.arrayBuffer()]);if(e.byteLength!==n.byteLength)return!1;let o=new Uint8Array(e),i=new Uint8Array(n);for(let[e,t]of o.entries())if(t!==i[e])return!1;return!0})()))||(n(e),o=e.blob)}catch(e){w.error("Error while comparing blobs",e)}})(),s=e=>{q(e)&&"SecurityError"===e.name?(w.debug("Recording has been stopped. Cross-origin data in bitmap.",e),clearInterval(a)):w.error("Error while creating image bitmap",e)};Ye(e,r,i).catch(s);let a=setInterval(()=>{Ye(e,r,i).catch(s)},200);return()=>{clearInterval(a)}})(e,0,t.taskContext.moduleScoped.backgroundService.bitmapToBlob,({blob:e,timestamp:r})=>{var n;return(n=function*(){var n,o;let i=(n=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){ot(e,t,r[t])})}return e}({},t.createReplayEventEnvelope()),o=o={name:ie.IMAGE_BITMAP,data:{targetId:s}},Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(o)):function(e){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t.push.apply(t,r)}return t}(Object(o)).forEach(function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(o,e))}),n);i.timestamp-=performance.now()-r,t.uploadReplayEvent(i),t.taskContext.config.uploadAsset({content:new Uint8Array(yield e.arrayBuffer()),contentBase64:yield t.taskContext.moduleScoped.backgroundService.blobToBase64(e),mimetype:e.type,timestamp:i.timestamp,uri:`blob://${i.id}`})},function(){var e=this,t=arguments;return new Promise(function(r,o){var i=n.apply(e,t);function s(e){nt(i,r,o,s,a,"next",e)}function a(e){nt(i,r,o,s,a,"throw",e)}s(void 0)})})()});t.removeMonitorsByElement.set(e,a)}),ot(t,"handleNodeRemoved",({node:e})=>{var r;((0,Ee.qp)(e)||(0,Ee.gX)(e))&&(null==(r=t.removeMonitorsByElement.get(e))||r())})}}function st(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function at(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){st(e,t,r[t])})}return e}function ct(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t.push.apply(t,r)}return t}(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}),e}class ut extends rt{onStart(){this.addDocumentEventListener("fullscreenchange",this.handleFullscreenChangeEvent),this.currentWindow.document.fullscreenElement&&this.handleFullscreenChangeEvent()}onStop(){this.removeDocumentEventListener("fullscreenchange",this.handleFullscreenChangeEvent)}constructor(...e){super(...e),st(this,"handleFullscreenChangeEvent",()=>{let e=this.currentWindow.document.fullscreenElement;if(null===e)this.uploadReplayEvent(ct(at({},this.createReplayEventEnvelope()),{name:ie.FULLSCREEN,data:{}}));else{let t=this.nodeInfoManager.getIdByNodeOrCreateNewOne(e);void 0!==t&&this.uploadReplayEvent(ct(at({},this.createReplayEventEnvelope()),{name:ie.FULLSCREEN,data:{targetId:t}}))}})}}let lt=e=>{let t=0,r=0,n=(e=>{let t=null;try{var r;t=null!=(r=e.frameElement)?r:null}catch(e){}return t})(e);for(;n;){let e=n.getBoundingClientRect();r+=e.top,t+=e.left,n=n.ownerDocument?W(n.ownerDocument):null}return{clientX:t,clientY:r}};function ht(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function pt(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){ht(e,t,r[t])})}return e}function vt(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t.push.apply(t,r)}return t}(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}),e}class yt extends rt{onStart(){this.addEventListener("click",this.handleClick)}onStop(){this.removeEventListener("click",this.handleClick)}constructor(...e){super(...e),ht(this,"lastClickTimes",[]),ht(this,"rageClickTimeout",void 0),ht(this,"handleClick",e=>{let t=e.composedPath()[0],r=(0,Ee.UG)(t)?this.nodeInfoManager.getIdByNode(t):void 0,{clientX:n,clientY:o}=lt(this.currentWindow),i=vt(pt({},this.createReplayEventEnvelope()),{name:ie.CLICK,data:{clientX:e.clientX+n,clientY:e.clientY+o,elementX:e.offsetX,elementY:e.offsetY,targetId:r}});if(this.uploadReplayEvent(i),this.lastClickTimes.length<4&&this.lastClickTimes.push(performance.now()),this.lastClickTimes.length>=4){if(this.lastClickTimes[3]-this.lastClickTimes[0]<=500&&void 0===this.rageClickTimeout){let t=vt(pt({},this.createReplayEventEnvelope()),{name:ie.RAGE_CLICK,data:{clientX:e.clientX+n,clientY:e.clientY+o,targetId:r}});this.uploadReplayEvent(t),this.rageClickTimeout=setTimeout(()=>{this.rageClickTimeout=void 0},5e3)}this.lastClickTimes=[]}})}}let gt="[appd-truncated]",mt=(e,t)=>{try{return Et(bt(e),t).stringified}catch(e){return JSON.stringify("[non-serializable object]")}},bt=(e,t=new WeakMap)=>Array.isArray(e)?e.map(e=>bt(e,t)):"object"==typeof e&&null!==e?wt(e,t):["function","symbol","bigint","undefined"].includes(typeof e)?typeof e:null===e||"number"==typeof e||"string"==typeof e||"boolean"==typeof e?e:JSON.stringify(e),wt=(e,t)=>{let r,n=Object.keys(e);if(null!==e&&"object"==typeof e&&"FormData"===e.constructor.name){let t={};e.forEach((e,r)=>{t[r]="string"==typeof e?e:`[file:${e.type}][${e.name}]`}),r=t}else if(q(e)&&!Object.hasOwn(e,"toJSON"))r=Ot(e);else if(1===n.length&&"isTrusted"===n[0]){let t=Object.keys(Object.getPrototypeOf(e));r=JSON.parse(JSON.stringify(e,[...n,...t]))}else r=St(t,e);return r},St=(e,t)=>{if(e.has(t))return"[circular]";e.set(t,!0);let r=[];for(let[n,o]of Object.entries(t))r.push([n,bt(o,e)]);return Object.fromEntries(r)},Ot=e=>{let t=JSON.parse(JSON.stringify(e));return t.name||(t.name=e.name),t.stack||(t.stack=e.stack),t.message||(t.message=e.message),t},Et=(e,t=16384)=>{let r=JSON.stringify(e);return r.length<=t?{isTruncated:!1,stringified:r}:(Array.isArray(e)?r=((e,t)=>{let r="";for(let n of e){if(t<=0){r+=JSON.stringify(gt)+",";break}let e=mt(n,t)+",";r+=e,t-=e.length}return"["+r.slice(0,Math.max(0,r.length-1))+"]"})(e,t):"object"==typeof e&&null!==e?r=((e,t)=>{let r="";for(let[n,o]of Object.entries(e)){if(t<=0){r+=JSON.stringify(gt)+":true,";break}let e=`"${n}":${mt(o,t)},`;r+=e,t-=e.length}return"{"+r.slice(0,Math.max(0,r.length-1))+"}"})(e,t):"string"==typeof e?r=JSON.stringify(gt+"[string] "+e.slice(0,Math.max(0,t))):"number"==typeof e&&(r=JSON.stringify(gt+"[number] "+String(e).slice(0,Math.max(0,t)))),{isTruncated:!0,stringified:r})};function Pt(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}let xt=[/^Script error\.?$/,/^Javascript error: Script error\.? on line 0$/];class Tt extends rt{onStart(){this.addEventListener("error",this.processError),this.addEventListener("unhandledrejection",this.processError)}onStop(){this.removeEventListener("error",this.processError),this.removeEventListener("unhandledrejection",this.processError)}static getEventHash(e){let{colno:t,filename:r,lineno:n,message:o}=e.data;return JSON.stringify(["reason"in e,o,r,n,t])}constructor(...e){super(...e),Pt(this,"throttleMap",new Map),Pt(this,"getErrorMessage",e=>{var t,r,n;if("message"in e){if("string"==typeof e.message)return e.message;try{if(e.message)return null!=(t=JSON.stringify(e.message))?t:"non-serializable event.message - type "+typeof e.message}catch(e){}}if("reason"in e){if("string"==typeof e.reason)return e.reason;if("string"==typeof(null==(r=e.reason)?void 0:r.message))return`Unhandled promise error: ${e.reason.message}`;try{if(e.reason){let t=JSON.stringify(e.reason);return t?`Unhandled promise error: ${t}`:"non-serializable event.reason - type "+typeof e.reason}}catch(e){}}if(null==e?void 0:e.target){if((0,Ee.kK)(e.target)){let t=null!=(n=e.target.getAttribute("src"))?n:"";return t=t.startsWith("blob://")?"blob://":t.startsWith("data:")?`${t.slice(0,47)}...`:t.slice(0,1e3),`Failed to load ${e.target.tagName} at "${t}".`}if(!this.currentWindow||this.currentWindow!==e.target)return w.debug("Received non element target.",e.target,typeof e.target,Object.getOwnPropertyNames(e.target)),null}return mt(e)}),Pt(this,"processError",e=>{var t,r,n;let o=this.getErrorMessage(e);if(null===o||xt.some(e=>o.match(e)))return;let i=(r=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){Pt(e,t,r[t])})}return e}({},this.createReplayEventEnvelope()),n=n={name:ie.ERROR,data:{colno:"colno"in e?e.colno:void 0,filename:"filename"in e?e.filename:void 0,lineno:"lineno"in e?e.lineno:void 0,message:o,source:null==(t=this.currentWindow.location)?void 0:t.origin,stack:"error"in e&&e.error&&Object.prototype.hasOwnProperty.call(e.error,"stack")?e.error.stack:void 0}},Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(n)):function(e){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t.push.apply(t,r)}return t}(Object(n)).forEach(function(e){Object.defineProperty(r,e,Object.getOwnPropertyDescriptor(n,e))}),r);void 0!==i.data.stack&&("string"!=typeof i.data.stack||0===i.data.stack.length)&&delete i.data.stack;let s=Tt.getEventHash(i);(!this.throttleMap.has(s)||performance.now()-(this.throttleMap.get(s)||0)>1e3)&&(this.uploadReplayEvent(i),this.throttleMap.set(s,performance.now()))})}}let kt=(e,t,r)=>{if(!(t in e))return;let n=e[t];e[t]=function(...e){return r(n.bind(this)).call(this,...e)}},It=(e,t,r)=>{if(!(t in e))return;let n=Object.getOwnPropertyDescriptor(e,t);n&&Object.defineProperty(e,t,r(n))};function Ct(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Rt(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){Ct(e,t,r[t])})}return e}function At(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t.push.apply(t,r)}return t}(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}),e}class jt extends rt{onStart(){this.processAlreadyExecutedAnimations(),this.attachElementAnimateProxy(),this.attachAnimateProxy()}onStop(){}constructor(...e){super(...e),Ct(this,"idByAnimation",new WeakMap),Ct(this,"attachAnimateProxy",()=>{let e=this;try{kt(this.currentWindow.Animation.prototype,"play",t=>function(){let r=t();return e.processAnimationMethodCalls(this,"play"),r})}catch(e){w.debug("Cannot apply `Animation.prototype.pause` proxy to Element.",e)}try{kt(this.currentWindow.Animation.prototype,"pause",t=>function(){let r=t();return e.processAnimationMethodCalls(this,"pause"),r})}catch(e){w.debug("Cannot apply `Animation.prototype.pause` proxy to Element.",e)}try{kt(this.currentWindow.Animation.prototype,"cancel",t=>function(){let r=t();return e.processAnimationMethodCalls(this,"cancel"),r})}catch(e){w.debug("Cannot apply `Animation.prototype.cancel` proxy to Element.",e)}}),Ct(this,"attachElementAnimateProxy",()=>{if(void 0===this.currentWindow.Element.prototype.animate)return void w.debug("Cannot apply Element.animate proxy. animate function is not defined.");let e=this;try{kt(this.currentWindow.Element.prototype,"animate",t=>function(r,n){let o,i,s=t(r,n),a=x();if(e.idByAnimation.set(s,a),e.isStarted)try{o=JSON.parse(mt(r)),i=JSON.parse(mt(n));let t=e.nodeInfoManager.getIdByNodeOrCreateNewOne(this),s=e.createReplayEventEnvelope(),c=At(Rt({},s),{name:ie.ELEMENT_ANIMATE,data:{animationId:a,keyframes:o,options:i,targetId:t},timestamp:s.timestamp+5});e.uploadReplayEvent(c)}catch(e){w.error("Cannot process animation.",e,o,i)}return s})}catch(e){w.debug("Cannot apply `animate` proxy to Element.",e)}}),Ct(this,"processAlreadyExecutedAnimations",()=>{if(void 0!==this.currentWindow.document.getAnimations)for(let e of this.currentWindow.document.getAnimations().filter(e=>!e.constructor.name.startsWith("CSS")))try{let t=e.effect;if(null===t||!(t instanceof this.currentWindow.KeyframeEffect)||null===t.target)continue;let r=x();this.idByAnimation.set(e,r);let n=this.nodeInfoManager.getIdByNodeOrCreateNewOne(t.target),o=JSON.parse(mt(t.getKeyframes())),i=JSON.parse(mt(t.getTiming())),s=At(Rt({},this.createReplayEventEnvelope()),{name:ie.ELEMENT_ANIMATE,data:{animationId:r,keyframes:o,options:i,targetId:n}});this.uploadReplayEvent(s)}catch(e){w.error("Error happened during processing already executed animations.",e)}else w.debug("Cannot processAlreadyExecutedAnimations. document.getAnimations() function is not defined.")}),Ct(this,"processAnimationMethodCalls",(e,t)=>{if(this.isStarted)try{let r=this.idByAnimation.get(e);if(r){let e=this.createReplayEventEnvelope(),n=At(Rt({},e),{name:ie.ANIMATION,data:{animationId:r,methodName:t},timestamp:e.timestamp+5});this.uploadReplayEvent(n)}else w.debug(`Animation not found in map. Calling Animation.${t}`)}catch(e){w.error(`Cannot process Animation.prototype.${t}.`,e)}})}}function Mt(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Nt(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){Mt(e,t,r[t])})}return e}function Lt(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t.push.apply(t,r)}return t}(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}),e}class _t extends rt{onStart(){this.addEventListener("blur",this.handleBlur),this.addEventListener("focus",this.handleFocus)}onStop(){this.removeEventListener("blur",this.handleBlur),this.removeEventListener("focus",this.handleFocus),this.listenerByShadowRoots.forEach((e,t)=>{t.removeEventListener("focusin",e)}),this.listenerByShadowRoots.clear(),this.blurTimeoutId&&this.blurTimeoutCallback&&(this.blurTimeoutCallback(),this.clearBlurTimeoutIfNeeded())}clearBlurTimeoutIfNeeded(){void 0!==this.blurTimeoutId&&(clearTimeout(this.blurTimeoutId),this.blurTimeoutId=void 0),this.blurTimeoutCallback&&(this.blurTimeoutCallback=void 0)}sendBlurEvent(e){this.uploadReplayEvent(Lt(Nt({},e),{name:ie.BLUR}))}constructor(...e){super(...e),Mt(this,"blurTimeoutCallback",void 0),Mt(this,"blurTimeoutId",void 0),Mt(this,"listenerByShadowRoots",new Map),Mt(this,"handleBlur",()=>{this.clearBlurTimeoutIfNeeded();let e=this.createReplayEventEnvelope();this.blurTimeoutCallback=()=>this.sendBlurEvent(e),this.blurTimeoutId=setTimeout(this.blurTimeoutCallback)}),Mt(this,"handleFocus",e=>{if(!A(e))return;let t=e.composedPath()[0];this.clearBlurTimeoutIfNeeded();try{if(void 0===t||t instanceof this.currentWindow.Window)return}catch(e){return void w.debug("Expected focus error happened",e)}if(!(0,Ee.kK)(t))return void w.warn("Focus target not found",e,t);let r=t.getRootNode();if(((0,Ee.Zq)(r)||(0,Ee.Rx)(r))&&!this.listenerByShadowRoots.has(r))return r.addEventListener("focusin",this.handleFocus,!0),void this.listenerByShadowRoots.set(r,this.handleFocus);let n=this.nodeInfoManager.getIdByNodeOrCreateNewOne(t);this.uploadReplayEvent(Lt(Nt({},this.createReplayEventEnvelope()),{name:ie.FOCUS,data:{targetId:n}}))})}}function Dt(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Bt(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){Dt(e,t,r[t])})}return e}function Ft(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t.push.apply(t,r)}return t}(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}),e}class Ut extends rt{onStart(){this.addDocumentEventListener("blur",this.handleBlur),this.addDocumentEventListener("change",this.handleChange),this.addDocumentEventListener("input",this.handleInput),this.attachInputSetterProxy(this.currentWindow.document.createElement("input"),["value","checked"]),this.attachInputSetterProxy(this.currentWindow.document.createElement("textarea"),["value"])}onStop(){this.removeDocumentEventListener("blur",this.handleBlur),this.removeDocumentEventListener("change",this.handleChange),this.removeDocumentEventListener("input",this.handleInput)}createInputEvent(e){return Ft(Bt({},this.createReplayEventEnvelope()),{name:ie.INPUT,data:e})}processSensitiveInput(e,t){this.currentTypingEvent||this.uploadReplayEvent(this.createInputEvent({isTyping:!0,source:t,targetId:e})),this.currentTypingEvent=this.createInputEvent({isTyping:!1,source:t,targetId:e})}processTarget(e,t){let r=e.value,n=this.nodeInfoManager.getIdByNodeOrCreateNewOne(e);if(this.privacyManager.shouldMaskInputNode(e)||this.privacyManager.isPasswordInput(e))return void this.processSensitiveInput(n,t);["checkbox","radio"].includes(e.type)&&(0,Ee.cK)(e)&&(r=String(e.checked));let o=this.createInputEvent({source:t,targetId:n,value:r});this.uploadReplayEvent(o)}constructor(...e){super(...e),Dt(this,"currentTypingEvent",void 0),Dt(this,"applyDescriptorProxyToInputElement",(e,t)=>{let{handleInputForTarget:r}=this;It(Object.getPrototypeOf(e),t,function(e){return Ft(Bt({},e),{set(n){var o;null==(o=e.set)||o.apply(this,[n]);try{r(this,"proxy")}catch(e){w.error(`Error happened in input proxy setter - ${t}.`,e)}}})})}),Dt(this,"attachInputSetterProxy",(e,t)=>{t.forEach(t=>{try{this.applyDescriptorProxyToInputElement(e,t)}catch(e){w.debug(`Cannot apply HTMLInputElement.prototype.${t} proxy.`,e)}})}),Dt(this,"handleBlur",()=>{this.currentTypingEvent&&(this.uploadReplayEvent(this.currentTypingEvent),this.currentTypingEvent=void 0)}),Dt(this,"handleChange",e=>{this.handleEvent(e,"change")}),Dt(this,"handleEvent",(e,t)=>{let r=e.composedPath()[0];this.handleInputForTarget(r,t)}),Dt(this,"handleInput",e=>{this.handleEvent(e,"input")}),Dt(this,"handleInputForTarget",(e,t)=>{if(this.isStarted){if(!(0,Ee.kK)(e))return w.debug("Target is not an element."),!1;if(!this.isExpectedElement(e))return w.debug("Input target is not input/select/textarea",e),!1;this.shouldProcessTarget(e)&&this.processTarget(e,t)}}),Dt(this,"isExpectedElement",e=>(0,Ee.cK)(e)||(0,Ee.Wi)(e)||(0,Ee.e9)(e)),Dt(this,"shouldProcessTarget",e=>!this.privacyManager.isNodeExcluded(e)&&e.isConnected)}}function Wt(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function zt(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){Wt(e,t,r[t])})}return e}class Vt extends rt{onStart(){this.addDocumentEventListener("mousemove",this.handleMouseMove)}onStop(){this.removeDocumentEventListener("mousemove",this.handleMouseMove)}constructor(...e){super(...e),Wt(this,"handleMouseMove",e=>{var t,r,n;let o=e.composedPath()[0],{clientX:i,clientY:s}=lt(this.currentWindow),a={clientX:e.clientX+i,clientY:e.clientY+s};if((0,Ee.kK)(o)){let t=this.nodeInfoManager.getIdByNode(o),i=(r=zt({},this.createReplayEventEnvelope()),n=n={name:ie.MOUSE_MOVE,data:zt({elementX:e.offsetX,elementY:e.offsetY,targetId:t},a)},Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(n)):function(e){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t.push.apply(t,r)}return t}(Object(n)).forEach(function(e){Object.defineProperty(r,e,Object.getOwnPropertyDescriptor(n,e))}),r);this.uploadReplayEvent(i)}else if("Window"!==(null==o||null==(t=o.constructor)?void 0:t.name))return void w.warn("mousemove target is processed",o)})}}function Gt(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class qt extends rt{onStart(){this.addDocumentEventListener("toggle",this.handleToggle)}onStop(){this.removeDocumentEventListener("toggle",this.handleToggle)}createPopoverEvent(e){var t,r;return t=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){Gt(e,t,r[t])})}return e}({},this.createReplayEventEnvelope()),r=r={name:ie.POPOVER,data:e},Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):function(e){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t.push.apply(t,r)}return t}(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}),t}constructor(...e){super(...e),Gt(this,"handleToggle",({newState:e,target:t})=>{if(!this.isStarted)return;if(!t||!(0,Ee.Re)(t))return void w.debug("Target is not an HTML element.");if(!t.popover)return void w.debug("Target is not popover element, could be `details` element that supports `open` attribute.",t);let r=this.nodeInfoManager.getIdByNodeOrCreateNewOne(t),n=this.createPopoverEvent({newState:e,targetId:r});this.uploadReplayEvent(n)})}}function Ht(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class $t extends rt{onStart(){this.sendPulseEvent("enable"),this.addDocumentEventListener("visibilitychange",this.handleVisibilityChange)}onStop(){this.sendPulseEvent("disable"),this.removeDocumentEventListener("visibilitychange",this.handleVisibilityChange)}constructor(...e){super(...e),Ht(this,"handleVisibilityChange",()=>{this.sendPulseEvent("visibilitychange")}),Ht(this,"sendPulseEvent",e=>{var t,r;let n=(t=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){Ht(e,t,r[t])})}return e}({},this.createReplayEventEnvelope()),r=r={name:ie.PULSE,data:{documentVisibilityState:document.visibilityState,source:e}},Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):function(e){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t.push.apply(t,r)}return t}(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}),t);this.uploadReplayEvent(n)})}}function Kt(e,t,r,n,o,i,s){try{var a=e[i](s),c=a.value}catch(e){return void r(e)}a.done?t(c):Promise.resolve(c).then(n,o)}function Jt(e){return function(){var t=this,r=arguments;return new Promise(function(n,o){var i=e.apply(t,r);function s(e){Kt(i,n,o,s,a,"next",e)}function a(e){Kt(i,n,o,s,a,"throw",e)}s(void 0)})}}function Qt(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class Yt extends rt{onStart(){this.isTaskRunWithinMainWindow()&&(this.uploadResize(),this.addEventListener("resize",this.handleResize))}onStop(){this.isTaskRunWithinMainWindow()&&this.removeEventListener("resize",this.handleResize)}uploadResize(){return Jt(function*(){let e=this.createReplayEventEnvelope(),{height:t,width:r}=yield this.getDimensions();var n,o;this.lastSentDimensions&&this.lastSentDimensions.height===t&&this.lastSentDimensions.width===r||(this.lastSentDimensions={height:t,width:r},this.uploadReplayEvent((n=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){Qt(e,t,r[t])})}return e}({},e),o=o={name:ie.RESIZE,data:{height:t,width:r}},Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(o)):function(e){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t.push.apply(t,r)}return t}(Object(o)).forEach(function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(o,e))}),n)))}).call(this)}constructor(...e){var t;super(...e),Qt(t=this,"lastSentDimensions",void 0),Qt(t,"processResizeTimeoutId",void 0),Qt(t,"getDimensions",()=>Jt(function*(){let e=t.currentWindow.innerHeight,r=t.currentWindow.innerWidth;return[r,e].includes(0)&&(window.top===window?w.debug("Resize dimension 0 on top window.",{height:e,width:r}):(yield new Promise(e=>setTimeout(e)),[r=t.currentWindow.innerWidth,e=t.currentWindow.innerHeight].includes(0)&&w.debug("Resize dimension 0 after setTimeout.",{height:e,width:r}))),{height:e,width:r}})()),Qt(t,"handleResize",()=>{void 0===t.processResizeTimeoutId&&(t.processResizeTimeoutId=setTimeout(()=>{t.processResize(),t.processResizeTimeoutId=void 0},50))}),Qt(t,"processResize",()=>{let{innerHeight:e,innerWidth:r,visualViewport:n}=t.currentWindow;n&&1!==n.scale&&e===n.height&&r===n.width||t.uploadResize()})}}function Xt(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Zt(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){Xt(e,t,r[t])})}return e}function er(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t.push.apply(t,r)}return t}(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}),e}class tr extends rt{onStart(){this.taskEmitter.addEventListener("nodeAdded",this.handleNodeAddedEvent),this.taskEmitter.addEventListener("nodeRemoved",this.handleNodeRemovedEvent),this.addEventListener("scroll",this.handleScrollEvent),(0!==this.currentWindow.scrollX||0!==this.currentWindow.scrollY)&&this.handleScroll(this.currentWindow.document)}onStop(){this.removeEventListener("scroll",this.handleScrollEvent),this.taskEmitter.removeEventListener("nodeAdded",this.handleNodeAddedEvent),this.taskEmitter.removeEventListener("nodeRemoved",this.handleNodeRemovedEvent),this.removeShadowRootScrollListeners()}addShadowRootScrollListener(e){this.recordedShadowRoots.includes(e)||(e.addEventListener("scroll",this.handleScrollEvent,{capture:!0,passive:!0}),this.recordedShadowRoots.push(e))}handleScroll(e){let t;if((0,Ee.kK)(e))t={x:e.scrollLeft,y:e.scrollTop},this.scrollManager.setPosition(e,t);else{let r;if(!e.defaultView)return;t={x:(r=e.defaultView).scrollX,y:r.scrollY}}let r=this.nodeInfoManager.getIdByNodeOrCreateNewOne(e),n=er(Zt({},this.createReplayEventEnvelope()),{name:ie.SCROLL,data:er(Zt({},t),{targetId:r})});this.uploadReplayEvent(n)}removeShadowRootScrollListener(e){w.debug("Removing scroll on shadow root.",e),e.removeEventListener("scroll",this.handleScrollEvent,{capture:!0,passive:!0}),this.recordedShadowRoots=this.recordedShadowRoots.filter(t=>t!==e)}removeShadowRootScrollListeners(){for(let e of this.recordedShadowRoots)this.removeShadowRootScrollListener(e);this.recordedShadowRoots=[]}constructor(...e){super(...e),Xt(this,"recordedShadowRoots",[]),Xt(this,"handleNodeAddedEvent",({node:e})=>{((0,Ee.Zq)(e)||(0,Ee.Rx)(e))&&this.addShadowRootScrollListener(e),(0,Ee.kK)(e)&&this.scrollManager.getPosition(e)&&this.handleScroll(e)}),Xt(this,"handleNodeRemovedEvent",({node:e})=>{((0,Ee.Zq)(e)||(0,Ee.Rx)(e))&&this.removeShadowRootScrollListener(e)}),Xt(this,"handleScrollEvent",e=>{if(!this.shouldProcessEvent(e))return;let{target:t}=e,r=t&&(0,Ee.kK)(t),n=t&&(0,Ee.JW)(t)&&t.defaultView;r||n?this.handleScroll(t):w.debug("scroll event target is not element or document node")})}}function rr(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function nr(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){rr(e,t,r[t])})}return e}function or(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t.push.apply(t,r)}return t}(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}),e}class ir extends rt{onStart(){this.addDocumentEventListener("selectionchange",this.handleSelection),this.handleSelection()}onStop(){this.removeDocumentEventListener("selectionchange",this.handleSelection)}constructor(...e){super(...e),rr(this,"lastEventType","None"),rr(this,"handleSelection",()=>{let e=null;try{e=this.currentWindow.getSelection()}catch(e){let t;if(t=this.currentWindow.getSelection,!/\[native code]/.test(t.toString()))return void this.stop();throw e}if(e){if(void 0!==e.type){switch(e.type){case"Range":{if(!e.anchorNode||!e.focusNode)return void w.error("anchorNode or focusNode not defined",e);let t=or(nr({},this.createReplayEventEnvelope()),{name:ie.SELECTION,data:{end:{offset:e.focusOffset,targetId:this.nodeInfoManager.getIdByNodeOrCreateNewOne(e.focusNode)},start:{offset:e.anchorOffset,targetId:this.nodeInfoManager.getIdByNodeOrCreateNewOne(e.anchorNode)}}});this.uploadReplayEvent(t);break}case"None":case"Caret":if("Range"===this.lastEventType){let e=or(nr({},this.createReplayEventEnvelope()),{name:ie.SELECTION,data:{targetId:this.nodeInfoManager.getIdByNode(this.currentWindow.document)}});this.uploadReplayEvent(e)}break;default:w.error("Unexpected selectionchange selection type",e.type)}this.lastEventType=e.type}}else w.warn("window.getSelection() returned undefined")})}}function sr(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class ar extends rt{onStart(){this.handleTitleChange(),this.taskEmitter.addEventListener("nodeAdded",this.handleNodeAddedEvent)}onStop(){this.taskEmitter.removeEventListener("nodeAdded",this.handleNodeAddedEvent)}constructor(...e){super(...e),sr(this,"lastTitle",void 0),sr(this,"handleNodeAddedEvent",({node:e})=>{((0,Ee.gB)(e)||e.parentNode&&(0,Ee.gB)(e.parentNode))&&this.handleTitleChange()}),sr(this,"handleTitleChange",()=>{var e,t;this.lastTitle!==document.title&&(this.lastTitle=document.title,this.uploadReplayEvent((e=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){sr(e,t,r[t])})}return e}({},this.createReplayEventEnvelope()),t=t={name:ie.TITLE,data:{title:this.currentWindow.document.title}},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t.push.apply(t,r)}return t}(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}),e)))})}}function cr(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ur(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){cr(e,t,r[t])})}return e}class lr extends rt{onStart(){this.addEventListener("touchend",this.handleTouchEnd),this.addEventListener("touchmove",this.handleTouchMove),this.addEventListener("touchstart",this.handleTouchStart)}onStop(){this.removeEventListener("touchend",this.handleTouchEnd),this.removeEventListener("touchmove",this.handleTouchMove),this.removeEventListener("touchstart",this.handleTouchStart)}getAbsoluteTouchPosition({clientX:e,clientY:t}){let{clientX:r,clientY:n}=lt(this.currentWindow);return{clientX:e+r,clientY:t+n}}constructor(...e){super(...e),cr(this,"currentTouchMoveEvent",void 0),cr(this,"prevStepById",{}),cr(this,"handleTouch",e=>{let t=this.currentTouchMoveEvent;if(t){var r;let n=this.createReplayEventEnvelope().timestamp-t.timestamp,{clientX:o,clientY:i,timeElapsedSinceFirstTouch:s}=null!=(r=this.prevStepById[e.identifier])?r:{clientX:t.data.clientX,clientY:t.data.clientY,timeElapsedSinceFirstTouch:n},a=Math.round(n-s),c=this.getAbsoluteTouchPosition(e),u=c.clientX-o,l=c.clientY-i;void 0===t.data.steps[e.identifier]&&(t.data.steps[e.identifier]=[]),t.data.steps[e.identifier].push({deltaX:u,deltaY:l,timeDelta:a}),t.duration=n,this.prevStepById[e.identifier]={clientX:c.clientX,clientY:c.clientY,timeElapsedSinceFirstTouch:n}}else w.error("touch currentTouchMoveEvent is not yet created")}),cr(this,"handleTouchEnd",()=>{this.currentTouchMoveEvent&&(this.uploadReplayEvent(this.currentTouchMoveEvent),this.currentTouchMoveEvent=void 0,this.prevStepById={})}),cr(this,"handleTouchMove",e=>{if(this.currentTouchMoveEvent)for(let t of Array.from(e.changedTouches))this.handleTouch(t);else this.handleTouchStart(e)}),cr(this,"handleTouchStart",e=>{var t,r,n;let{target:o}=e;if(o&&(0,Ee.UG)(o)&&!(0,Ee.kK)(o)&&(o=o.parentNode),o&&(0,Ee.kK)(o)){let n=e.touches[0],i=this.getAbsoluteTouchPosition(n),s=(0,Ee.UG)(o)?this.nodeInfoManager.getIdByNode(o):void 0,a=o.getBoundingClientRect();for(let o of(this.currentTouchMoveEvent=(t=ur({},this.createReplayEventEnvelope()),r=r={name:ie.TOUCH_MOVE,data:ur({elementX:n.clientX-a.left,elementY:n.clientY-a.top,steps:{},targetId:s},i),duration:0},Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):function(e){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t.push.apply(t,r)}return t}(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}),t),Array.from(e.touches)))this.handleTouch(o)}else{if(void 0===Node.ELEMENT_NODE)return;w.error("touchstart target is not Element",o,typeof o,null==o||null==(n=o.constructor)?void 0:n.name)}})}}function dr(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function fr(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){dr(e,t,r[t])})}return e}function hr(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t.push.apply(t,r)}return t}(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}),e}class pr extends rt{onStart(){this.isTaskRunWithinMainWindow()&&(this.proxyHistory(),this.addEventListener("popstate",this.handlePopStateEvent),this.handleURLChange({isFirstEvent:!0}))}onStop(){this.isTaskRunWithinMainWindow()&&this.removeEventListener("popstate",this.handlePopStateEvent)}proxyHistory(){let e=this,t=this.currentWindow.history.pushState;this.currentWindow.history.pushState=function(r,n,o){let i=Reflect.apply(t,this,[r,n,o]);return e.isStarted&&e.handleURLChange({isInternalNavigation:!0}),i};let r=this.currentWindow.history.replaceState;this.currentWindow.history.replaceState=function(t,n,o){let i=Reflect.apply(r,this,[t,n,o]);return e.isStarted&&e.handleURLChange({isInternalNavigation:!0}),i}}constructor(...e){super(...e),dr(this,"lastUrl",void 0),dr(this,"handlePopStateEvent",()=>{this.handleURLChange({isInternalNavigation:!0})}),dr(this,"handleURLChange",({isInternalNavigation:e=!1,url:t}={})=>{let r;try{var n,o;r=t?new URL(t,null==(n=this.currentWindow.location)?void 0:n.origin).href:null==(o=this.currentWindow.location)?void 0:o.href}catch(e){return void w.error("Invalid url provided")}if(this.lastUrl!==r){this.lastUrl=r;let t=hr(fr({},this.createReplayEventEnvelope()),{name:ie.URL,data:{pageUrl:r}});if(e&&(t.data=hr(fr({},t.data),{isInternalNavigation:e})),"about:blank"===t.data.pageUrl||"about:srcdoc"===t.data.pageUrl)return;this.uploadReplayEvent(t)}})}}function vr(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class yr extends rt{onStart(){this.isTaskRunWithinMainWindow()&&this.currentWindow.visualViewport&&((1!==this.currentWindow.visualViewport.scale||0!==this.currentWindow.visualViewport.offsetLeft||0!==this.currentWindow.visualViewport.offsetTop)&&this.processViewportChange(),this.currentWindow.visualViewport.addEventListener("resize",this.handleViewportChange,{passive:!0}),this.currentWindow.visualViewport.addEventListener("scroll",this.handleViewportChange,{passive:!0}))}onStop(){this.isTaskRunWithinMainWindow()&&this.currentWindow.visualViewport&&(this.currentWindow.visualViewport.removeEventListener("resize",this.handleViewportChange),this.currentWindow.visualViewport.removeEventListener("scroll",this.handleViewportChange))}processViewportChange(){var e,t;if(!this.currentWindow.visualViewport)return;let{offsetLeft:r,offsetTop:n}=this.currentWindow.visualViewport,{innerWidth:o,outerWidth:i}=this.currentWindow,s=this.currentWindow.visualViewport.scale;this.isMobileDevice&&(1===s&&o>i||(s*=o/i));let a={offsetLeft:this.lastVisualViewport.offsetLeft===r?void 0:r,offsetTop:this.lastVisualViewport.offsetTop===n?void 0:n,scale:this.lastVisualViewport.scale===s?void 0:s};if(this.lastVisualViewport={offsetLeft:r,offsetTop:n,scale:s},Object.values(a).every(e=>void 0===e))return;let c=(e=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){vr(e,t,r[t])})}return e}({},this.createReplayEventEnvelope()),t=t={name:ie.VISUAL_VIEWPORT,data:a},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t.push.apply(t,r)}return t}(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}),e);this.uploadReplayEvent(c)}constructor(...e){super(...e),vr(this,"isMobileDevice",/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(navigator.userAgent||navigator.vendor||window.opera)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw-(n|u)|c55\/|capi|ccwa|cdm-|cell|chtm|cldc|cmd-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc-s|devi|dica|dmob|do(c|p)o|ds(12|-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(-|_)|g1 u|g560|gene|gf-5|g-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd-(m|p|t)|hei-|hi(pt|ta)|hp( i|ip)|hs-c|ht(c(-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i-(20|go|ma)|i230|iac( |-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|-[a-w])|libw|lynx|m1-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[23]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|-([1-8]|c))|phil|pire|pl(ay|uc)|pn-2|po(ck|rt|se)|prox|psio|pt-g|qa-a|qc(07|12|21|32|60|-[2-7]|i-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h-|oo|p-)|sdk\/|se(c(-|0|1)|47|mc|nd|ri)|sgh-|shar|sie(-|m)|sk-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h-|v-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl-|tdg-|tel(i|m)|tim-|t-mo|to(pl|sh)|ts(70|m-|m3|m5)|tx-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas-|your|zeto|zte-/i.test((navigator.userAgent||navigator.vendor||window.opera).slice(0,4))),vr(this,"lastVisualViewport",{offsetLeft:0,offsetTop:0,scale:1}),vr(this,"timeoutId",void 0),vr(this,"handleViewportChange",e=>{A(e)&&void 0===this.timeoutId&&(this.timeoutId=setTimeout(()=>{this.processViewportChange(),this.timeoutId=void 0},50))})}}function gr(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class mr{getTasksByWindow(e){return this.recordTasksByWindow.get(e)}initTasksByWindow(e,t){let r=[...this.createRecordTasks(e,t)];return this.recordTasksByWindow.set(e,r),this.addedTasks.clear(),this}startTasksByWindow(e){let t=this.getTasksByWindow(e);null==t||t.forEach(e=>e.start())}stopAllTasks(){for(let e of this.recordTasksByWindow.keys())this.stopTasksByWindow(e)}stopTasksByWindow(e){let t=this.getTasksByWindow(e);t&&(t.forEach(e=>e.isStarted&&e.stop()),this.recordTasksByWindow.delete(e))}constructor(e){gr(this,"customTasks",void 0),gr(this,"addedTasks",void 0),gr(this,"recordTasksByWindow",void 0),gr(this,"addTask",void 0),gr(this,"createRecordTaskInstance",void 0),gr(this,"createRecordTasks",void 0),gr(this,"initializeCustomRecordTasks",void 0),this.customTasks=e,this.addedTasks=new Set,this.recordTasksByWindow=new Map,this.addTask=e=>(this.addedTasks.add(e),this),this.createRecordTaskInstance=(e,...t)=>new e(...t),this.createRecordTasks=(e,t)=>[...this.addedTasks,new it(e,t),new ut(e,t),new yt(e,t),new Tt(e,t),new jt(e,t),new _t(e,t),new Ut(e,t),new Vt(e,t),new qt(e,t),new $t(e,t),new Yt(e,t),new tr(e,t),new ir(e,t),new ar(e,t),new lr(e,t),new pr(e,t),new yr(e,t),...this.initializeCustomRecordTasks(e,t)],this.initializeCustomRecordTasks=(e,t)=>{let r=[];for(let n of this.customTasks){let o=this.createRecordTaskInstance(n,e,t);r.push(o)}return r}}}let br=new Set(["http:","https:","blob:"]),wr=e=>!e.startsWith("#")&&Sr(e),Sr=e=>{if("undefined"==typeof window)return!0;try{let{protocol:t}=new URL(e,window.location.href);return br.has(t)}catch(e){return!1}};function Or(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class Er extends Error{constructor(e,t,r,n){super(e),Or(this,"sourceStart",void 0),Or(this,"sourceEnd",void 0),Or(this,"parserState",void 0),this.name="ParseError",this.sourceStart=t,this.sourceEnd=r,this.parserState=n}}class Pr extends Er{constructor(e,t,r,n,o){super(e,t,r,n),Or(this,"token",void 0),this.token=o}}let xr="Unexpected newline while consuming a string token.",Tr="Unexpected EOF while consuming a string token.",kr="Unexpected EOF while consuming a comment.",Ir="Unexpected EOF while consuming a url token.",Cr="Unexpected EOF while consuming an escaped code point.",Rr="Unexpected character while consuming a url token.",Ar="Invalid escape sequence while consuming a url token.",jr='Invalid escape sequence after "\\"';function Mr(e){return e>=48&&e<=57}function Nr(e){return e>=48&&e<=57||e>=97&&e<=102||e>=65&&e<=70}function Lr(e){var t;return e>=97&&e<=122||e>=65&&e<=90||183===(t=e)||8204===t||8205===t||8255===t||8256===t||8204===t||192<=t&&t<=214||216<=t&&t<=246||248<=t&&t<=893||895<=t&&t<=8191||8304<=t&&t<=8591||11264<=t&&t<=12271||12289<=t&&t<=55295||63744<=t&&t<=64975||65008<=t&&t<=65533||0===t||!!Fr(t)||t>=65536||95===e}function _r(e){return Lr(e)||Mr(e)||45===e}function Dr(e){return 10===e||13===e||12===e}function Br(e){return 32===e||10===e||9===e||13===e||12===e}function Fr(e){return e>=55296&&e<=57343}function Ur(e){var t;return 92===e.source.codePointAt(e.cursor)&&!Dr(null!=(t=e.source.codePointAt(e.cursor+1))?t:-1)}function Wr(e,t){var r,n,o;return 45===t.source.codePointAt(t.cursor)?45===t.source.codePointAt(t.cursor+1)||!!Lr(null!=(r=t.source.codePointAt(t.cursor+1))?r:-1)||92===t.source.codePointAt(t.cursor+1)&&!Dr(null!=(n=t.source.codePointAt(t.cursor+2))?n:-1):!!Lr(null!=(o=t.source.codePointAt(t.cursor))?o:-1)||Ur(t)}function zr(e){var t,r,n,o;return 43===e.source.codePointAt(e.cursor)||45===e.source.codePointAt(e.cursor)?!!Mr(null!=(t=e.source.codePointAt(e.cursor+1))?t:-1)||46===e.source.codePointAt(e.cursor+1)&&Mr(null!=(r=e.source.codePointAt(e.cursor+2))?r:-1):46===e.source.codePointAt(e.cursor)?Mr(null!=(n=e.source.codePointAt(e.cursor+1))?n:-1):Mr(null!=(o=e.source.codePointAt(e.cursor))?o:-1)}function Vr(e,t){let r=t.readCodePoint();if(void 0===r)return e.onParseError(new Er(Cr,t.representationStart,t.representationEnd,["4.3.7. Consume an escaped code point","Unexpected EOF"])),65533;if(Nr(r)){var n;let e,o=[r];for(;void 0!==(e=t.source.codePointAt(t.cursor))&&Nr(e)&&o.length<6;)o.push(e),t.advanceCodePoint();Br(null!=(n=t.source.codePointAt(t.cursor))?n:-1)&&(13===t.source.codePointAt(t.cursor)&&10===t.source.codePointAt(t.cursor+1)&&t.advanceCodePoint(),t.advanceCodePoint());let i=parseInt(String.fromCodePoint(...o),16);return 0===i||Fr(i)||i>1114111?65533:i}return 0===r||Fr(r)?65533:r}function Gr(e,t){let r=[];for(;;){var n;let o=null!=(n=t.source.codePointAt(t.cursor))?n:-1;if(0===o||Fr(o))r.push(65533),t.advanceCodePoint(+(o>65535)+1);else if(_r(o))r.push(o),t.advanceCodePoint(+(o>65535)+1);else{if(!Ur(t))return r;t.advanceCodePoint(),r.push(Vr(e,t))}}}function qr(e,t){let r;{let e=t.source.codePointAt(t.cursor);45===e?r="-":43===e&&(r="+")}let n=function(e,t){var r,n,o,i,s,a;let c=ae.Integer;for(43!==t.source.codePointAt(t.cursor)&&45!==t.source.codePointAt(t.cursor)||t.advanceCodePoint();Mr(null!=(r=t.source.codePointAt(t.cursor))?r:-1);)t.advanceCodePoint();if(46===t.source.codePointAt(t.cursor)&&Mr(null!=(n=t.source.codePointAt(t.cursor+1))?n:-1))for(t.advanceCodePoint(2),c=ae.Number;Mr(null!=(o=t.source.codePointAt(t.cursor))?o:-1);)t.advanceCodePoint();if(101===t.source.codePointAt(t.cursor)||69===t.source.codePointAt(t.cursor)){if(Mr(null!=(i=t.source.codePointAt(t.cursor+1))?i:-1))t.advanceCodePoint(2);else{if(45!==t.source.codePointAt(t.cursor+1)&&43!==t.source.codePointAt(t.cursor+1)||!Mr(null!=(s=t.source.codePointAt(t.cursor+2))?s:-1))return c;t.advanceCodePoint(3)}for(c=ae.Number;Mr(null!=(a=t.source.codePointAt(t.cursor))?a:-1);)t.advanceCodePoint()}return c}(0,t),o=parseFloat(t.source.slice(t.representationStart,t.representationEnd+1));if(Wr(0,t)){let i=Gr(e,t);return[se.Dimension,t.source.slice(t.representationStart,t.representationEnd+1),t.representationStart,t.representationEnd,{value:o,signCharacter:r,type:n,unit:String.fromCodePoint(...i)}]}return 37===t.source.codePointAt(t.cursor)?(t.advanceCodePoint(),[se.Percentage,t.source.slice(t.representationStart,t.representationEnd+1),t.representationStart,t.representationEnd,{value:o,signCharacter:r}]):[se.Number,t.source.slice(t.representationStart,t.representationEnd+1),t.representationStart,t.representationEnd,{value:o,signCharacter:r,type:n}]}(Z=se||(se={})).Comment="comment",Z.AtKeyword="at-keyword-token",Z.BadString="bad-string-token",Z.BadURL="bad-url-token",Z.CDC="CDC-token",Z.CDO="CDO-token",Z.Colon="colon-token",Z.Comma="comma-token",Z.Delim="delim-token",Z.Dimension="dimension-token",Z.EOF="EOF-token",Z.Function="function-token",Z.Hash="hash-token",Z.Ident="ident-token",Z.Number="number-token",Z.Percentage="percentage-token",Z.Semicolon="semicolon-token",Z.String="string-token",Z.URL="url-token",Z.Whitespace="whitespace-token",Z.OpenParen="(-token",Z.CloseParen=")-token",Z.OpenSquare="[-token",Z.CloseSquare="]-token",Z.OpenCurly="{-token",Z.CloseCurly="}-token",Z.UnicodeRange="unicode-range-token",(ee=ae||(ae={})).Integer="integer",ee.Number="number",(te=ce||(ce={})).Unrestricted="unrestricted",te.ID="id";class Hr{advanceCodePoint(e=1){this.cursor=this.cursor+e,this.representationEnd=this.cursor-1}readCodePoint(){let e=this.source.codePointAt(this.cursor);if(void 0!==e)return this.cursor=this.cursor+1,this.representationEnd=this.cursor-1,e}unreadCodePoint(e=1){this.cursor=this.cursor-e,this.representationEnd=this.cursor-1}resetRepresentation(){this.representationStart=this.cursor,this.representationEnd=-1}constructor(e){Or(this,"cursor",0),Or(this,"source",""),Or(this,"representationStart",0),Or(this,"representationEnd",-1),this.source=e}}function $r(e,t){for(;;){let r=t.source.codePointAt(t.cursor);if(void 0===r)return;if(41===r)return void t.advanceCodePoint();Ur(t)?(t.advanceCodePoint(),Vr(e,t)):t.advanceCodePoint()}}function Kr(e,t){var r,n;let o=Gr(e,t);if(40!==t.source.codePointAt(t.cursor))return[se.Ident,t.source.slice(t.representationStart,t.representationEnd+1),t.representationStart,t.representationEnd,{value:String.fromCodePoint(...o)}];if(!(3!==o.length||117!==o[0]&&85!==o[0]||114!==o[1]&&82!==o[1]||108!==o[2]&&76!==o[2])){t.advanceCodePoint();let i=0;for(;;){let e=Br(null!=(r=t.source.codePointAt(t.cursor))?r:-1),s=Br(null!=(n=t.source.codePointAt(t.cursor+1))?n:-1);if(e&&s){i+=1,t.advanceCodePoint(1);continue}let a=e?t.source.codePointAt(t.cursor+1):t.source.codePointAt(t.cursor);if(34===a||39===a)return i>0&&t.unreadCodePoint(i),[se.Function,t.source.slice(t.representationStart,t.representationEnd+1),t.representationStart,t.representationEnd,{value:String.fromCodePoint(...o)}];break}return function(e,t){for(var r,n,o,i,s;Br(null!=(r=t.source.codePointAt(t.cursor))?r:-1);)t.advanceCodePoint();let a="";for(;;){if(void 0===t.source.codePointAt(t.cursor)){let r=[se.URL,t.source.slice(t.representationStart,t.representationEnd+1),t.representationStart,t.representationEnd,{value:a}];return e.onParseError(new Pr(Ir,t.representationStart,t.representationEnd,["4.3.6. Consume a url token","Unexpected EOF"],r)),r}if(41===t.source.codePointAt(t.cursor))return t.advanceCodePoint(),[se.URL,t.source.slice(t.representationStart,t.representationEnd+1),t.representationStart,t.representationEnd,{value:a}];if(Br(null!=(n=t.source.codePointAt(t.cursor))?n:-1)){for(t.advanceCodePoint();Br(null!=(o=t.source.codePointAt(t.cursor))?o:-1);)t.advanceCodePoint();if(void 0===t.source.codePointAt(t.cursor)){let r=[se.URL,t.source.slice(t.representationStart,t.representationEnd+1),t.representationStart,t.representationEnd,{value:a}];return e.onParseError(new Pr(Ir,t.representationStart,t.representationEnd,["4.3.6. Consume a url token","Consume as much whitespace as possible","Unexpected EOF"],r)),r}return 41===t.source.codePointAt(t.cursor)?(t.advanceCodePoint(),[se.URL,t.source.slice(t.representationStart,t.representationEnd+1),t.representationStart,t.representationEnd,{value:a}]):($r(e,t),[se.BadURL,t.source.slice(t.representationStart,t.representationEnd+1),t.representationStart,t.representationEnd,void 0])}let r=t.source.codePointAt(t.cursor);if(34===r||39===r||40===r||11===(s=null!=r?r:-1)||127===s||0<=s&&s<=8||14<=s&&s<=31){$r(e,t);let r=[se.BadURL,t.source.slice(t.representationStart,t.representationEnd+1),t.representationStart,t.representationEnd,void 0];return e.onParseError(new Pr(Rr,t.representationStart,t.representationEnd,["4.3.6. Consume a url token","Unexpected U+0022 QUOTATION MARK (\"), U+0027 APOSTROPHE ('), U+0028 LEFT PARENTHESIS (() or non-printable code point"],r)),r}if(92===r){if(Ur(t)){t.advanceCodePoint(),a+=String.fromCodePoint(Vr(e,t));continue}$r(e,t);let r=[se.BadURL,t.source.slice(t.representationStart,t.representationEnd+1),t.representationStart,t.representationEnd,void 0];return e.onParseError(new Pr(Ar,t.representationStart,t.representationEnd,["4.3.6. Consume a url token","U+005C REVERSE SOLIDUS (\\)","The input stream does not start with a valid escape sequence"],r)),r}0===t.source.codePointAt(t.cursor)||Fr(null!=(i=t.source.codePointAt(t.cursor))?i:-1)?a+=String.fromCodePoint(65533):a+=t.source[t.cursor],t.advanceCodePoint()}}(e,t)}return t.advanceCodePoint(),[se.Function,t.source.slice(t.representationStart,t.representationEnd+1),t.representationStart,t.representationEnd,{value:String.fromCodePoint(...o)}]}function Jr(){}Object.values(se);let Qr=e=>`__replay-${e}__`,Yr="url(",Xr=new Set(["hover","focus","focus-within"]),Zr=[{from:"max-device-width",to:"max-width"},{from:"min-device-width",to:"min-width"},{from:"max-device-height",to:"max-height"},{from:"min-device-height",to:"min-height"}],en=(e,t,r,n)=>{let o,i,s=[],a=e[0],c=e[1],u=e[4].value,l=c.indexOf(u);if(-1===l?a===se.URL?(o=Yr,i=")"):o=i=c.slice(0,1):(o=c.slice(0,l),i=c.slice(l+u.length)),u&&wr(u)){s.push(u);let a=u;t&&(n?a=t(ke(u,n)):r&&(a=t(ke(u,r)))),e[1]=`${o}${a}${i}`,e[4].value=a}return s},tn=({convertUrl:e,cssFileUrl:t,cssText:r,currentWindow:n,handleOnlyUrls:o})=>{let i=function(e){let t=function(e){var t;let r=e.css.valueOf(),n=null!=(t=e.unicodeRangesAllowed)&&t,o=new Hr(r),i={onParseError:null!=void 0?undefined:Jr};return{nextToken:function(){o.resetRepresentation();let e=o.source.codePointAt(o.cursor);if(void 0===e)return[se.EOF,"",-1,-1,void 0];if(47===e&&47===(t=o).source.codePointAt(t.cursor)&&42===t.source.codePointAt(t.cursor+1)){for(o.advanceCodePoint(2);;){let e=o.readCodePoint();if(void 0===e){let e=[se.Comment,o.source.slice(o.representationStart,o.representationEnd+1),o.representationStart,o.representationEnd,void 0];return i.onParseError(new Pr(kr,o.representationStart,o.representationEnd,["4.3.2. Consume comments","Unexpected EOF"],e)),e}if(42===e&&void 0!==o.source.codePointAt(o.cursor)&&47===o.source.codePointAt(o.cursor)){o.advanceCodePoint();break}}return[se.Comment,o.source.slice(o.representationStart,o.representationEnd+1),o.representationStart,o.representationEnd,void 0]}if(n&&(117===e||85===e)&&!(117!==o.source.codePointAt(o.cursor)&&85!==o.source.codePointAt(o.cursor)||43!==o.source.codePointAt(o.cursor+1)||63!==o.source.codePointAt(o.cursor+2)&&!Nr(null!=(r=o.source.codePointAt(o.cursor+2))?r:-1)))return function(e,t){var r;let n;t.advanceCodePoint(2);let o=[],i=[];for(;void 0!==(n=t.source.codePointAt(t.cursor))&&o.length<6&&Nr(n);)o.push(n),t.advanceCodePoint();for(;void 0!==(n=t.source.codePointAt(t.cursor))&&o.length<6&&63===n;)0===i.length&&i.push(...o),o.push(48),i.push(70),t.advanceCodePoint();if(!i.length&&45===t.source.codePointAt(t.cursor)&&Nr(null!=(r=t.source.codePointAt(t.cursor+1))?r:-1))for(t.advanceCodePoint();void 0!==(n=t.source.codePointAt(t.cursor))&&i.length<6&&Nr(n);)i.push(n),t.advanceCodePoint();if(!i.length){let e=parseInt(String.fromCodePoint(...o),16);return[se.UnicodeRange,t.source.slice(t.representationStart,t.representationEnd+1),t.representationStart,t.representationEnd,{startOfRange:e,endOfRange:e}]}let s=parseInt(String.fromCodePoint(...o),16),a=parseInt(String.fromCodePoint(...i),16);return[se.UnicodeRange,t.source.slice(t.representationStart,t.representationEnd+1),t.representationStart,t.representationEnd,{startOfRange:s,endOfRange:a}]}(0,o);if(Lr(e))return Kr(i,o);if(Mr(e))return qr(i,o);switch(e){case 44:return o.advanceCodePoint(),[se.Comma,",",o.representationStart,o.representationEnd,void 0];case 58:return o.advanceCodePoint(),[se.Colon,":",o.representationStart,o.representationEnd,void 0];case 59:return o.advanceCodePoint(),[se.Semicolon,";",o.representationStart,o.representationEnd,void 0];case 40:return o.advanceCodePoint(),[se.OpenParen,"(",o.representationStart,o.representationEnd,void 0];case 41:return o.advanceCodePoint(),[se.CloseParen,")",o.representationStart,o.representationEnd,void 0];case 91:return o.advanceCodePoint(),[se.OpenSquare,"[",o.representationStart,o.representationEnd,void 0];case 93:return o.advanceCodePoint(),[se.CloseSquare,"]",o.representationStart,o.representationEnd,void 0];case 123:return o.advanceCodePoint(),[se.OpenCurly,"{",o.representationStart,o.representationEnd,void 0];case 125:return o.advanceCodePoint(),[se.CloseCurly,"}",o.representationStart,o.representationEnd,void 0];case 39:case 34:return function(e,t){let r="",n=t.readCodePoint();for(;;){let i=t.readCodePoint();if(void 0===i){let n=[se.String,t.source.slice(t.representationStart,t.representationEnd+1),t.representationStart,t.representationEnd,{value:r}];return e.onParseError(new Pr(Tr,t.representationStart,t.representationEnd,["4.3.5. Consume a string token","Unexpected EOF"],n)),n}if(Dr(i)){t.unreadCodePoint();let r=[se.BadString,t.source.slice(t.representationStart,t.representationEnd+1),t.representationStart,t.representationEnd,void 0];return e.onParseError(new Pr(xr,t.representationStart,13===t.source.codePointAt(t.cursor)&&10===t.source.codePointAt(t.cursor+1)?t.representationEnd+2:t.representationEnd+1,["4.3.5. Consume a string token","Unexpected newline"],r)),r}if(i===n)return[se.String,t.source.slice(t.representationStart,t.representationEnd+1),t.representationStart,t.representationEnd,{value:r}];if(92!==i)0===i||Fr(i)?r+=String.fromCodePoint(65533):r+=String.fromCodePoint(i);else{var o;if(void 0===t.source.codePointAt(t.cursor))continue;if(Dr(null!=(o=t.source.codePointAt(t.cursor))?o:-1)){13===t.source.codePointAt(t.cursor)&&10===t.source.codePointAt(t.cursor+1)&&t.advanceCodePoint(),t.advanceCodePoint();continue}r+=String.fromCodePoint(Vr(e,t))}}}(i,o);case 35:o.advanceCodePoint();let e=o.source.codePointAt(o.cursor);if(void 0!==e&&(_r(e)||Ur(o))){let e=ce.Unrestricted;Wr(0,o)&&(e=ce.ID);let t=Gr(i,o);return[se.Hash,o.source.slice(o.representationStart,o.representationEnd+1),o.representationStart,o.representationEnd,{value:String.fromCodePoint(...t),type:e}]}return[se.Delim,"#",o.representationStart,o.representationEnd,{value:"#"}];case 43:case 46:return zr(o)?qr(i,o):(o.advanceCodePoint(),[se.Delim,o.source[o.representationStart],o.representationStart,o.representationEnd,{value:o.source[o.representationStart]}]);case 10:case 13:case 12:case 9:case 32:for(var t,r,s;Br(null!=(s=o.source.codePointAt(o.cursor))?s:-1);)o.advanceCodePoint();return[se.Whitespace,o.source.slice(o.representationStart,o.representationEnd+1),o.representationStart,o.representationEnd,void 0];case 45:return zr(o)?qr(i,o):45===o.source.codePointAt(o.cursor)&&45===o.source.codePointAt(o.cursor+1)&&62===o.source.codePointAt(o.cursor+2)?(o.advanceCodePoint(3),[se.CDC,"--\x3e",o.representationStart,o.representationEnd,void 0]):Wr(0,o)?Kr(i,o):(o.advanceCodePoint(),[se.Delim,"-",o.representationStart,o.representationEnd,{value:"-"}]);case 60:return 60===o.source.codePointAt(o.cursor)&&33===o.source.codePointAt(o.cursor+1)&&45===o.source.codePointAt(o.cursor+2)&&45===o.source.codePointAt(o.cursor+3)?(o.advanceCodePoint(4),[se.CDO,"\x3c!--",o.representationStart,o.representationEnd,void 0]):(o.advanceCodePoint(),[se.Delim,"<",o.representationStart,o.representationEnd,{value:"<"}]);case 64:if(o.advanceCodePoint(),Wr(0,o)){let e=Gr(i,o);return[se.AtKeyword,o.source.slice(o.representationStart,o.representationEnd+1),o.representationStart,o.representationEnd,{value:String.fromCodePoint(...e)}]}return[se.Delim,"@",o.representationStart,o.representationEnd,{value:"@"}];case 92:{if(Ur(o))return Kr(i,o);o.advanceCodePoint();let e=[se.Delim,"\\",o.representationStart,o.representationEnd,{value:"\\"}];return i.onParseError(new Pr(jr,o.representationStart,o.representationEnd,["4.3.1. Consume a token","U+005C REVERSE SOLIDUS (\\)","The input stream does not start with a valid escape sequence"],e)),e}}return o.advanceCodePoint(),[se.Delim,o.source[o.representationStart],o.representationStart,o.representationEnd,{value:o.source[o.representationStart]}]},endOfFile:function(){return void 0===o.source.codePointAt(o.cursor)}}}(e),r=[];for(;!t.endOfFile();)r.push(t.nextToken());return r.push(t.nextToken()),r}({css:r}),s=[];for(let r=0;r<i.length;r++){let a=i[r],c=a[0],u=i[r-1],l=i[r+1];switch(c){case se.Function:a[1]===Yr&&l[0]===se.String&&s.push(...en(l,e,t,n));break;case se.URL:s.push(...en(a,e,t,n));break;case se.AtKeyword:if("@import"===a[1]){let o=i[r+2];if(l[0]===se.Whitespace&&o[0]===se.String&&s.push(...en(o,e,t,n)),l[0]===se.Whitespace&&o[0]===se.OpenParen){let o=i[r+3];o[0]===se.String&&s.push(...en(o,e,t,n))}}break;case se.Ident:if(!o){let e=Zr.find(e=>a[1]===e.from);e&&(a[1]=e.to,a[4].value=e.to)}break;case se.Colon:if(!o&&l&&l[0]===se.Ident&&Xr.has(l[1])){if(u&&"any-hover"===u[1])continue;a[1]=".";let e=Qr(l[1]);if(l[1]=e,l[4].value=e,i[r-1]&&i[r-2]&&i[r-3]&&i[r-1][0]===se.Ident&&i[r-2][0]===se.Colon&&i[r-3][0]===se.Colon){let e=i[r-3],t=i[r-2],n=i[r-1];i[r-3]=a,i[r-2]=l,i[r-1]=e,i[r]=t,i[r+1]=n}}}}return{tokens:i,urls:s}},rn=e=>wr(e)?`[[__ASSET__]]${e}[[__/ASSET__]]`:e;function nn(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class on{static serializeCssText(e){let t=[];return void 0===e.convertUrl&&(e.convertUrl=e=>(Sr(e)&&t.push({uri:e}),rn(e))),{assets:t,value:(e=>{try{var t,r;let{tokens:n}=tn((t=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({},e),r=r={handleOnlyUrls:!1},Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):function(e){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t.push.apply(t,r)}return t}(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}),t));return n.map(e=>e[1]).join("")}catch(e){throw w.error("Failed to transform css for player with tokenizer",e),e}})(e)}}}function sn(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}nn(on,"extractUrlsFromCssText",({cssFileUrl:e,cssText:t})=>(({cssFileUrl:e,cssText:t})=>{let r=[];try{r=(e=>{let{urls:t}=tn({cssText:e,handleOnlyUrls:!0});return t})(t)}catch(e){throw w.error("Failed to extract urls from css with tokenizer",e),e}return Array.from(new Set(r.map(t=>ke(t,e))))})({cssFileUrl:e,cssText:t})),nn(on,"serializeCssRulesFromSheet",(e,t)=>{let r="",n=[];try{for(let o=0;o<e.cssRules.length;o++){let i=e.cssRules[o],s=on.serializeCssText({cssText:i.cssText,currentWindow:t});n.push(...s.assets),r+=s.value}}catch(t){w.debug(`Cannot access cssRules of ${e.href}`)}return{assets:n,value:r}}),nn(on,"serializeStyleValue",(e,t)=>{let r="",n=[];if(e.sheet){let o=on.serializeCssRulesFromSheet(e.sheet,t);n=o.assets,r=o.value}if(0===r.length){let o=on.serializeCssText({cssText:e.textContent?e.textContent.trim():"",currentWindow:t});n=o.assets,r=o.value}return{assets:n,value:r}});class an{disconnect(){this.isObserving=!1,this.observedDocumentsAndShadowRoots.clear()}disconnectShadowRoot(e){for(let t of(this.observedDocumentsAndShadowRoots.delete(e),e.adoptedStyleSheets)){let r=this.rootsByAdoptedSheets.get(t);r&&(r.delete(e),0===r.size&&(this.rootsByAdoptedSheets.delete(t),this.idsByAdoptedSheets.delete(t)))}}observe(e,t){this.observedDocumentsAndShadowRoots.add(null!=e?e:this.currentWindow.document),void 0!==this.currentWindow.CSSStyleSheet?(this.isObserving=!0,this.areCssRuleProxiesAttached||(this.attachInsertRuleProxy(),this.attachDeleteRuleProxy(),this.attachReplaceRuleProxy(),this.attachReplaceSyncRuleProxy(),this.attachCSSGroupingRuleInsertRuleProxy(),this.attachCSSGroupingRuleDeleteRuleProxy(),this.attachCSSStyleDeclarationSetPropertyProxy(),this.attachCSSStyleDeclarationRemovePropertyProxy(),this.attachAdoptedStyleSheetProxy(this.currentWindow.Document),this.attachAdoptedStyleSheetProxy(this.currentWindow.ShadowRoot),this.areCssRuleProxiesAttached=!0),e&&this.processAdoptedStyleSheets(e,!1,t)):w.debug("Window object is cleared and does not contain CSSStyleSheet prototype.")}attachCSSGroupingRuleDeleteRuleProxy(){let e=this;try{kt(this.currentWindow.CSSGroupingRule.prototype,"deleteRule",t=>function(r){let n=t(r);if(e.isObserving&&this.parentStyleSheet)try{let t=Array.from(this.parentStyleSheet.cssRules).indexOf(this);-1!==t&&this.parentStyleSheet&&(e.handleCssRule(this.parentStyleSheet,t),e.handleCssRule(this.parentStyleSheet,t,this))}catch(e){w.error("Error happened in `CSSGroupingRule.deleteRule` proxy.",e,r)}return n})}catch(e){w.debug("Cannot apply `deleteRule` proxy to CSSGroupingRule.",e)}}attachCSSGroupingRuleInsertRuleProxy(){let e=this;try{kt(this.currentWindow.CSSGroupingRule.prototype,"insertRule",t=>function(r,n){let o=t(r,n);if(e.isObserving&&this.parentStyleSheet)try{let t=Array.from(this.parentStyleSheet.cssRules).indexOf(this);-1!==t&&this.parentStyleSheet&&(e.handleCssRule(this.parentStyleSheet,t),e.handleCssRule(this.parentStyleSheet,t,this))}catch(e){w.error("Error happened in `CSSGroupingRule.insertRule` proxy.",e,n)}return o})}catch(e){w.debug("Cannot apply `insertRule` proxy to CSSGroupingRule.",e)}}attachCSSStyleDeclarationRemovePropertyProxy(){let e=this;try{kt(this.currentWindow.CSSStyleDeclaration.prototype,"removeProperty",t=>function(...r){let n=t(...r);if(e.isObserving&&this.parentRule&&this.parentRule.parentStyleSheet)try{let t=Array.from(this.parentRule.parentStyleSheet.cssRules).indexOf(this.parentRule);-1!==t&&(e.handleCssRule(this.parentRule.parentStyleSheet,t),e.handleCssRule(this.parentRule.parentStyleSheet,t,this.parentRule))}catch(e){w.error("Error happened in `CSSStyleDeclaration.removeProperty` proxy.",e,r)}return n})}catch(e){w.debug("Cannot apply `removeProperty` proxy to CSSStyleDeclaration.",e)}}attachCSSStyleDeclarationSetPropertyProxy(){let e=this;try{kt(this.currentWindow.CSSStyleDeclaration.prototype,"setProperty",t=>function(...r){let n=t(...r);if(e.isObserving&&this.parentRule&&this.parentRule.parentStyleSheet)try{let t=Array.from(this.parentRule.parentStyleSheet.cssRules).indexOf(this.parentRule);-1!==t&&(e.handleCssRule(this.parentRule.parentStyleSheet,t),e.handleCssRule(this.parentRule.parentStyleSheet,t,this.parentRule))}catch(e){w.error("Error happened in `CSSStyleDeclaration.setProperty` proxy.",e,r)}return n})}catch(e){w.debug("Cannot apply `setProperty` proxy to CSSStyleDeclaration.",e)}}attachDeleteRuleProxy(){let e=this;try{kt(this.currentWindow.CSSStyleSheet.prototype,"deleteRule",t=>function(r){if(t(r),e.isObserving)try{e.handleCssRule(this,r)}catch(e){w.error("Error happened in `deleteRule` proxy.",e,r)}})}catch(e){w.debug("Cannot apply `deleteRule` proxy to CSSStyleSheet.",e)}}attachInsertRuleProxy(){let e=this;try{kt(this.currentWindow.CSSStyleSheet.prototype,"insertRule",t=>function(r,n){let o=t(r,n),i=this.cssRules[o];if(e.isObserving)try{e.handleCssRule(this,n,i)}catch(e){w.error("Error happened in `insertRule` proxy.",e,r,n,i,o)}return o})}catch(e){w.debug("Cannot apply `insertRule` proxy to CSSStyleSheet.",e)}}attachReplaceRuleProxy(){let e=this;try{kt(this.currentWindow.CSSStyleSheet.prototype,"replace",t=>function(r){let n=t(r);return n.then(t=>{if(e.isObserving)try{e.handleStylesheetReplace(t)}catch(e){w.error("Error happened in `replace` proxy.",e,n,r)}}),n})}catch(e){w.debug("Cannot apply `replace` proxy to CSSStyleSheet.",e)}}attachReplaceSyncRuleProxy(){let e=this;try{kt(this.currentWindow.CSSStyleSheet.prototype,"replaceSync",t=>function(r){let n=t(r);if(e.isObserving)try{e.handleStylesheetReplace(this)}catch(e){w.error("Error happened in `replace` proxy.",e,n,r)}return n})}catch(e){w.debug("Cannot apply `replace` proxy to CSSStyleSheet.",e)}}handleCssRule(e,t,r){let n=[{rule:r&&this.processCssRule(r),ruleIndex:t}],o=this.getAdoptedSheetId(e);if(void 0===o){var i,s;let t=this.getStyleSheetMetadata(e);if(void 0===t)return;this.listeners.onStyleSheetMutationProcessed((i=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){sn(e,t,r[t])})}return e}({},t),s=s={rules:n},Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(s)):function(e){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t.push.apply(t,r)}return t}(Object(s)).forEach(function(e){Object.defineProperty(i,e,Object.getOwnPropertyDescriptor(s,e))}),i))}else this.listeners.onAdoptedStyleSheetMutationProcessed({rules:n,sheetId:o})}handleStylesheetReplace(e){let t=this.getAdoptedSheetId(e);void 0!==t&&this.listeners.onAdoptedStyleSheetMutationProcessed({replace:Array.from(e.cssRules).map(e=>this.processCssRule(e)).join("\n"),sheetId:t})}processCssRule(e){let{assets:t,value:r}=on.serializeCssText({cssText:e.cssText,currentWindow:this.currentWindow});return t.forEach(e=>this.listeners.onAssetDiscovered(e)),r}constructor(e,t,r){sn(this,"currentWindow",void 0),sn(this,"nodeInfoManager",void 0),sn(this,"listeners",void 0),sn(this,"areCssRuleProxiesAttached",void 0),sn(this,"idsByAdoptedSheets",void 0),sn(this,"isObserving",void 0),sn(this,"nextSheetId",void 0),sn(this,"observedDocumentsAndShadowRoots",void 0),sn(this,"rootsByAdoptedSheets",void 0),sn(this,"attachAdoptedStyleSheetProxy",void 0),sn(this,"createAdoptedStyleSheetId",void 0),sn(this,"getAdoptedSheetId",void 0),sn(this,"getStyleSheetMetadata",void 0),sn(this,"processAdoptedStyleSheets",void 0),this.currentWindow=e,this.nodeInfoManager=t,this.listeners=r,this.areCssRuleProxiesAttached=!1,this.idsByAdoptedSheets=new WeakMap,this.isObserving=!1,this.nextSheetId=0,this.observedDocumentsAndShadowRoots=new Set,this.rootsByAdoptedSheets=new WeakMap,this.attachAdoptedStyleSheetProxy=e=>{try{let t=this;It(e.prototype,"adoptedStyleSheets",function(e){return{set(r){var n;if(null==(n=e.set)||n.apply(this,[r]),t.isObserving)try{t.processAdoptedStyleSheets(this,!0)}catch(e){w.error("Error happened in adoptedStylesheet proxy",e)}}}})}catch(e){w.debug("Cannot apply adoptedStylesheet proxy",e)}},this.createAdoptedStyleSheetId=e=>{let t=this.nextSheetId;return this.idsByAdoptedSheets.set(e,t),this.nextSheetId+=1,t},this.getAdoptedSheetId=e=>this.idsByAdoptedSheets.get(e),this.getStyleSheetMetadata=e=>{var t,r,n;let o=e.ownerNode,i=o&&(0,Ee.UG)(o)?null==(t=this.nodeInfoManager.getNodeInfo(o))?void 0:t.id:void 0;if(!o||void 0!==i)for(let t of[null!=(n=null==(r=e.ownerNode)?void 0:r.ownerDocument)?n:this.currentWindow.document,...this.observedDocumentsAndShadowRoots]){let r=t.styleSheets;for(let n=0;n<r.length;n++)if(r[n]===e)return{rootId:this.nodeInfoManager.getIdByNodeOrCreateNewOne(t),styleElementId:i,styleSheetIndex:n}}},this.processAdoptedStyleSheets=(e,t=!1,r)=>{let n=e.adoptedStyleSheets;if(void 0===n||0===n.length&&!t||void 0===this.nodeInfoManager.getIdByNode(e))return;let o=this.nodeInfoManager.getIdByNodeOrCreateNewOne(e),i=[];for(let t of n){let n=this.getAdoptedSheetId(t),s=this.rootsByAdoptedSheets.get(t);s?s.add(e):this.rootsByAdoptedSheets.set(t,new Set([e])),void 0===n&&(n=this.createAdoptedStyleSheetId(t),this.listeners.onAdoptedStyleSheetDiscovered({rootId:o,rules:Array.from(t.cssRules).map(e=>this.processCssRule(e)),sheetId:n},"number"==typeof r?r+.001:void 0)),i.push(n)}this.listeners.onAdoptedStyleSheetsAssigned({rootId:o,sheetIds:i},"number"==typeof r?r+.002:void 0)}}}function cn(e,t,r,n,o,i,s){try{var a=e[i](s),c=a.value}catch(e){return void r(e)}a.done?t(c):Promise.resolve(c).then(n,o)}function un(e){return function(){var t=this,r=arguments;return new Promise(function(n,o){var i=e.apply(t,r);function s(e){cn(i,n,o,s,a,"next",e)}function a(e){cn(i,n,o,s,a,"throw",e)}s(void 0)})}}function ln(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class dn{constructor(){ln(this,"isTaskQueueRunning",!1),ln(this,"taskQueue",[]),ln(this,"postTask",(e,t)=>un(function*(){return new Promise((r,n)=>{this.taskQueue.push({reject:n,resolve:r,taskFunction:t,taskName:e}),this.isTaskQueueRunning||(this.isTaskQueueRunning=!0,this.runTaskQueue())})}).call(this)),ln(this,"runTaskQueue",()=>un(function*(){if(0!==this.taskQueue.length){for(;this.taskQueue.length>0;){let e=this.taskQueue.shift();if(void 0===e)break;let t=e.taskFunction();if(t)try{let r=yield dn.processTaskIterator(t);e.resolve(r)}catch(t){w.error(`Task ${e.taskName} failed`,t),e.reject(t)}else e.resolve()}this.isTaskQueueRunning=!1}else this.isTaskQueueRunning=!1}).call(this))}}ln(dn,"processTaskIterator",e=>un(function*(){let t=!1;for(;!t;)t=yield new Promise((t,r)=>{requestIdleCallback(n=>{let o=performance.now(),i=()=>n.didTimeout?performance.now()-o<("hidden"===document.visibilityState?200:16):!!n.timeRemaining();for(;i();)try{let r=e.next();if(r.done)return void t(r)}catch(e){return void r(e)}t(!1)},{timeout:500})});return t.value})());let fn=new dn;function hn(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}let pn="replay_web_cached_assets";class vn{}function yn(e,t,r,n,o,i,s){try{var a=e[i](s),c=a.value}catch(e){return void r(e)}a.done?t(c):Promise.resolve(c).then(n,o)}function gn(e){return function(){var t=this,r=arguments;return new Promise(function(n,o){var i=e.apply(t,r);function s(e){yn(i,n,o,s,a,"next",e)}function a(e){yn(i,n,o,s,a,"throw",e)}s(void 0)})}}function mn(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}hn(vn,"isLimitReached",void 0),hn(vn,"lastReadTime",-1e3),hn(vn,"lastWriteTime",-1e3),hn(vn,"urlSet",new Set),hn(vn,"writeIntervalId",void 0),hn(vn,"addToCache",e=>{vn.urlSet.add(e),vn.isLimitReached||vn.writeLocalStorageWithThrottling()}),hn(vn,"clearCache",()=>{vn.isLimitReached=!1;let e=performance.now();vn.lastReadTime=e,vn.lastWriteTime=e,vn.urlSet.clear(),I(pn)}),hn(vn,"isCached",e=>(performance.now()-vn.lastReadTime>1e3&&vn.readLocalStorage(),vn.urlSet.has(e))),hn(vn,"readLocalStorage",()=>{vn.lastReadTime=performance.now(),(e=>{try{return e?JSON.parse(e):[]}catch(e){return w.error("Error while parsing cached assets",{error:e}),[]}})(T(pn)).forEach(e=>vn.urlSet.add(e))}),hn(vn,"writeLocalStorageWithThrottling",()=>{let e=performance.now(),t=e-vn.lastWriteTime;if(t>1e3){clearTimeout(vn.writeIntervalId),vn.writeIntervalId=void 0,vn.lastWriteTime=e,vn.readLocalStorage();let t=JSON.stringify(Array.from(vn.urlSet.values()));if(t.length>262144)return vn.isLimitReached=!0,void w.error("AssetCacheService: Asset cache size exceeded.",{size:t.length});k(pn,t)}else void 0===vn.writeIntervalId&&(vn.writeIntervalId=window.setTimeout(vn.writeLocalStorageWithThrottling,1e3-t))});class bn{processPromiseTask(e){this.pendingTasksQueue.push(e),this.spawnTaskProcessorIfNeeded()}processPendingTask(){return gn(function*(){let e=this.pendingTasksQueue.shift();e&&(yield e())}).call(this)}spawnTaskProcessorIfNeeded(){return gn(function*(){if(0!==this.pendingTasksQueue.length&&!(this.currentParallelPromises>=this.config.maxParallelPromises)){this.currentParallelPromises+=1;try{yield this.processPendingTask()}finally{this.currentParallelPromises-=1,this.spawnTaskProcessorIfNeeded()}}}).call(this)}constructor(e={maxParallelPromises:10}){mn(this,"config",void 0),mn(this,"pendingTasksQueue",void 0),mn(this,"currentParallelPromises",void 0),this.config=e,this.pendingTasksQueue=[],this.currentParallelPromises=0}}function wn(e){return[Math.trunc(e/1e3),Math.round(e%1e3*1e6)]}let Sn=()=>{var e;return 1e3*(e=function(){var e=wn(function(){let e=performance.timeOrigin;if("number"!=typeof e){let t=performance;e=t.timing&&t.timing.fetchStart}return e}()),t=wn(performance.now());let r=[e[0]+t[0],e[1]+t[1]];return r[1]>=1e9&&(r[1]-=1e9,r[0]+=1),r}())[0]+e[1]/1e6};class On extends Error{constructor(e){super(e),this.name="AssetError"}}function En(e,t,r,n,o,i,s){try{var a=e[i](s),c=a.value}catch(e){return void r(e)}a.done?t(c):Promise.resolve(c).then(n,o)}function Pn(e){return function(){var t=this,r=arguments;return new Promise(function(n,o){var i=e.apply(t,r);function s(e){En(i,n,o,s,a,"next",e)}function a(e){En(i,n,o,s,a,"throw",e)}s(void 0)})}}function xn(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class Tn{constructor(e,t){xn(this,"backgroundService",void 0),xn(this,"originalFetch",void 0),xn(this,"serialize",void 0),xn(this,"serializeArbitraryFile",void 0),xn(this,"serializeCssFile",void 0),this.backgroundService=e,this.originalFetch=t,this.serialize=(e,t=0)=>Pn(function*(){try{let r=yield this.originalFetch(e,{priority:"low"});if(!r.ok)throw new On(`Failed to fetch asset on url: '${e}'`);let n=r.headers.get("content-type");return(null==n?void 0:n.trim().startsWith("text/css"))?this.serializeCssFile(r,e,t):this.serializeArbitraryFile(r)}catch(t){throw new On(`Error while fetching asset on url: '${e}'\n${t}`)}}).call(this),this.serializeArbitraryFile=e=>e.blob(),this.serializeCssFile=(e,t,r)=>Pn(function*(){if(r>3)return new Blob;let n=yield e.text(),o=on.extractUrlsFromCssText({cssFileUrl:t,cssText:n}),i={};yield Promise.allSettled(o.map(e=>Pn(function*(){try{let t=yield this.serialize(e,r+1);if(0===t.size)return;i[e]=yield this.backgroundService.blobToBase64(t)}catch(t){w.warn("Error while processing asset",{error:t,url:e})}}).call(this)));let{value:s}=on.serializeCssText({convertUrl:e=>{var t;return null!=(t=i[e])?t:e},cssFileUrl:t,cssText:n});return new Blob([s],{type:"text/css"})}).call(this)}}let kn=e=>/\.(css)/.test(e),In=e=>/\.(gif|jpe?g|png|webp|svg)/.test(e),Cn=e=>/\.(woff2)/.test(e);function Rn(e,t,r,n,o,i,s){try{var a=e[i](s),c=a.value}catch(e){return void r(e)}a.done?t(c):Promise.resolve(c).then(n,o)}function An(e){return function(){var t=this,r=arguments;return new Promise(function(n,o){var i=e.apply(t,r);function s(e){Rn(i,n,o,s,a,"next",e)}function a(e){Rn(i,n,o,s,a,"throw",e)}s(void 0)})}}function jn(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Mn(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){jn(e,t,r[t])})}return e}function Nn(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t.push.apply(t,r)}return t}(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}),e}function Ln(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}class _n{static getAssetMetadata(e){let t={};return e.source&&(0,Ee.pC)(e.source)&&(t.height=e.source.height,t.naturalHeight=e.source.naturalHeight,t.naturalWidth=e.source.naturalWidth,t.width=e.source.width),t}static isAssetProxiable(e){return!(Te(e.uri)||(e=>{try{let{hostname:t}=new URL(e);return"localhost"===t||"127.0.0.1"===t}catch(e){return!1}})(e.uri))}static isElementInViewport(e){let t=e.getBoundingClientRect();return t.top<window.innerHeight&&t.bottom>0&&t.left<window.innerWidth&&t.right>0}static isIntersectionObserverSupported(){return"function"==typeof window.IntersectionObserver&&"IntersectionObserverEntry"in window}attachIntersectionObserverIfNotExists(){_n.isIntersectionObserverSupported()?this.imageObserver||(this.imageObserver=new IntersectionObserver((e,t)=>{for(let r of e)if(r.isIntersecting){let n=this.observedImages.get(r.target);if(!n){w.warn("Observed image not found in the map",{entries:e,target:r.target});continue}this.observedImages.delete(r.target),t.unobserve(r.target),this.parallelTaskProcessor.processPromiseTask(()=>this.downloadAssetWithProxyFallback(n))}})):w.warn("IntersectionObserver is not supported in this browser, images will not be observed.")}getImageQuality(){var e;let t=null==(e=this.context.config.features)?void 0:e.packAssets;if(void 0!==t&&!xe(t)&&Pe(t.images)){let e=t.images.quality;if(void 0===e||"number"!=typeof e||e<=0||e>=1)return;return e}}proxyAsset(e){let t={},r=Sn(),n=this.waitingAssets.get(e.uri);n&&(t=n.metadata,r=n.timestamp,this.waitingAssets.delete(e.uri));let{source:o}=e,i=Nn(Mn({},Ln(e,["source"])),{metadata:t,timestamp:r});this.context.config.uploadAsset(i)}shouldPackAsset({source:e,uri:t}){var r;let n=null==(r=this.context.config.features)?void 0:r.packAssets;if(void 0===n)return!1;if(xe(n))return n;if(Pe(n)){if(kn(t))return!0===n.styles;if(In(t)||e&&(0,Ee.pC)(e))return!0===n.images||Pe(n.images)&&!0===n.images.pack;if(Cn(t))return!0===n.fonts}return!1}shouldPackOnlyViewportImages(){var e;let t=null==(e=this.context.config.features)?void 0:e.packAssets;return void 0!==t&&(xe(t)?t:xe(t.images)?t.images:!!Pe(t.images)&&!0===t.images.onlyViewportImages)}constructor(e){jn(this,"context",void 0),jn(this,"assetSerializer",void 0),jn(this,"imageObserver",void 0),jn(this,"observedImages",void 0),jn(this,"parallelTaskProcessor",void 0),jn(this,"waitingAssets",void 0),jn(this,"disconnect",void 0),jn(this,"processDiscoveredNetworkAsset",void 0),jn(this,"downloadAsset",void 0),jn(this,"downloadAssetWithProxyFallback",void 0),jn(this,"observeImageElement",void 0),this.context=e,this.imageObserver=null,this.observedImages=new Map,this.parallelTaskProcessor=new bn,this.waitingAssets=new Map,this.disconnect=()=>{var e;for(let t of(null==(e=this.imageObserver)||e.disconnect(),this.waitingAssets.values()))this.proxyAsset(t);this.waitingAssets.clear()},this.processDiscoveredNetworkAsset=e=>An(function*(){var t;let{uri:r}=e;if(!wr(r)||vn.isCached(r))return;(null==(t=this.context.config.features)?void 0:t.cacheAssets)&&vn.addToCache(r);let n=_n.isAssetProxiable(e);if(!this.shouldPackAsset(e)&&n)return w.debug("IMAGE: Asset is not packed, proxying it",e),void this.proxyAsset(e);let{source:o}=e,i=Ln(e,["source"]);if(this.waitingAssets.set(e.uri,Nn(Mn({},i),{metadata:_n.getAssetMetadata(e),timestamp:Sn()})),e.source&&(0,Ee.pC)(e.source)&&_n.isIntersectionObserverSupported()&&this.shouldPackOnlyViewportImages()&&!_n.isElementInViewport(e.source))return w.debug("Image is not in viewport - observing it",e),void this.observeImageElement(e.source,e);yield this.downloadAssetWithProxyFallback(e)}).call(this),this.downloadAsset=e=>An(function*(){let{source:t}=e,r=Ln(e,["source"]),n=yield this.assetSerializer.serialize(e.uri);if(t&&(0,Ee.pC)(t)){let t=this.getImageQuality();if(void 0!==t&&["image/jpeg","image/png","image/jpeg"].includes(n.type)){w.debug("Image quality is set, resizing image",{imageQuality:t,uri:e.uri});let r=yield this.context.moduleScoped.backgroundService.compressImageBlob(n,t);r&&(n=r)}}if(n.size>10485760)throw new On("Asset size exceeded.");let o=yield n.arrayBuffer(),i={},s=this.waitingAssets.get(e.uri);s&&(i=s.metadata,this.waitingAssets.delete(e.uri));let a=Nn(Mn({},r),{content:new Uint8Array(o),contentBase64:yield this.context.moduleScoped.backgroundService.blobToBase64(n),metadata:i,mimetype:n.type,timestamp:Sn()});this.context.config.uploadAsset(a)}).call(this),this.downloadAssetWithProxyFallback=e=>An(function*(){let{uri:t}=e,r=_n.isAssetProxiable(e);try{yield new Promise((t,r)=>{this.parallelTaskProcessor.processPromiseTask(()=>this.downloadAsset(e).then(t).catch(r))})}catch(n){w.warn("Error while processing asset",{error:n,uri:t}),r?(w.debug("Asset is proxied instead",e),this.proxyAsset(e)):w.debug("Asset is not proxiable",e)}}).call(this),this.observeImageElement=(e,t)=>{if(!this.observedImages.has(e)){if(this.attachIntersectionObserverIfNotExists(),!this.imageObserver)return void w.warn("Image observer is not available, image will not be observed",{image:e});this.observedImages.set(e,t),this.imageObserver.observe(e)}},this.assetSerializer=new Tn(e.moduleScoped.backgroundService,e.config.originalFetch)}}class Dn{get size(){return this.countByElement.size}add(e){this.incrementElementCount(e)}delete(e){this.decrementElementCount(e)}has(e){return!!this.countByElement.get(e)}some(e){for(let t of this.countByElement.keys())if(e(t))return!0;return!1}decrementElementCount(e){let t=this.countByElement.get(e);1===t?this.countByElement.delete(e):t&&this.countByElement.set(e,t-1)}incrementElementCount(e){let t=this.countByElement.get(e)||0;this.countByElement.set(e,t+1)}initialize(e){if(e)for(let t of e)this.incrementElementCount(t)}constructor(e){var t,r;t="countByElement",r=new Map,t in this?Object.defineProperty(this,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):this[t]=r,this.initialize(e)}}function Bn(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}let Fn={attributeOldValue:!0,attributes:!0,characterData:!0,childList:!0,subtree:!0};class Un{disconnect(){this.mutationObserver.disconnect(),void 0!==this.mutationProcessIntervalId&&(clearInterval(this.mutationProcessIntervalId),this.mutationProcessIntervalId=void 0)}observe(e){this.mutationObserver.observe(e,Fn)}*handlePendingMutations(e){let t=this.pendingMutations.indexOf(e);if(-1!==t)try{let t=new Set,r=null;for(let n of this.pendingMutations){if(r===e)break;r=n;let o=[];for(;n.mutationRecords.length>0;){yield;let e=n.mutationRecords.shift();switch(this.removeMutationFutureTargets(e),e.type){case"childList":{let r=yield*this.processChildListMutationRecord(e,t,n.time);o.push(...r);break}case"attributes":{let r=this.processAttributesMutationRecord(e,t);if(r){let e=this.findNodeInSerializedNodes(r.id,o);e?e.attributes=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){Bn(e,t,r[t])})}return e}({},e.attributes,r.attributes):o.push(r)}break}case"characterData":if((0,Ee.C5)(e.target.parentNode)){let t=yield*this.processStyleSheetMutation(e.target.parentNode,n.time);t&&o.push(t)}else{let t=this.processCharacterDataMutationRecord(e);if(t){let e=this.findNodeInSerializedNodes(t.id,o);e?e.value=t.value:o.push(t)}}}}o.length>0&&this.listeners.onMutationsProcessed(o,n.time)}}catch(e){throw this.pendingMutations.slice(0,t).forEach(e=>{e.mutationRecords.forEach(e=>this.removeMutationFutureTargets(e))}),e}finally{this.pendingMutations=this.pendingMutations.slice(t+1)}else w.error("No end mutation was found in pending mutations. MutationProcessor.handlePendingMutations exited early.")}processAttributesMutationRecord(e,t){if(null===e.attributeName||this.isAttributeInMutationQueue(e))return;if(this.isNodeInMutationQueue(e.target))return void t.add(e.target);if(!this.nodeProcessor.shouldProcessUpdatedNode(e.target)||(this.privacyManager.recomputeNodePrivacyInfoForNodeAndItsSubtree(e.target),this.privacyManager.isNodeExcluded(e.target)))return;let r=this.nodeProcessor.processUpdatedNode(e.target);if(r){var n,o;let t=e.attributeName;((0,Ee.Tl)(e.target)||(0,Ee.gX)(e.target))&&["src","srcdoc"].includes(e.attributeName)&&(t=`data-appd-${e.attributeName}`);let i={[t]:null!=(o=null==(n=r.attributes)?void 0:n[t])?o:null};return{id:r.id,action:"updated",attributes:i,parentId:null,previousId:null}}}processCharacterDataMutationRecord(e){if(!this.isNodeInMutationQueue(e.target)&&this.nodeProcessor.shouldProcessUpdatedNode(e.target)&&(!e.target.parentNode||!this.privacyManager.isNodeExcluded(e.target.parentNode)))return this.nodeProcessor.processUpdatedNode(e.target)}*processChildListMutationRecord(e,t,r){let n=[];if((0,Ee.C5)(e.target)){let t=yield*this.processStyleSheetMutation(e.target,r);return t&&n.push(t),n}let o=new Set(Array.from(e.addedNodes));for(let t of Array.from(e.removedNodes)){if(!this.nodeProcessor.shouldProcessRemovedNode(t)||this.isNodeInMutationQueue(t)||o.has(t))continue;let r=this.nodeProcessor.processRemovedNode(t,e.target);r&&n.push(r)}let i=e.target;if(this.privacyManager.retrieveAndStoreNodePrivacyInfo(i),this.nodeProcessor.shouldProcessAddedNode(i)){if(!this.isNodeInMutationQueue(i)){let e=yield*this.nodeProcessor.processAddedNodeAndItsSubtree(i,r);e&&n.push(e)}}else for(let o of Array.from(e.addedNodes)){if(!this.nodeProcessor.shouldProcessAddedNode(o)&&!t.has(o)||this.isNodeInMutationQueue(o))continue;let e=yield*this.nodeProcessor.processAddedNodeAndItsSubtree(o,r);e&&n.push(e)}return n}*processStyleSheetMutation(e,t){if(e.isConnected&&!this.isNodeInMutationQueue(e))return yield*this.nodeProcessor.processAddedNodeAndItsSubtree(e,t)}constructor(e,t,r,n){let o;Bn(this,"currentWindow",void 0),Bn(this,"nodeProcessor",void 0),Bn(this,"privacyManager",void 0),Bn(this,"listeners",void 0),Bn(this,"futureAttributesTargets",void 0),Bn(this,"futureTargets",void 0),Bn(this,"mutationObserver",void 0),Bn(this,"mutationProcessIntervalId",void 0),Bn(this,"pendingMutations",void 0),Bn(this,"isNodeInMutationQueue",void 0),Bn(this,"findNodeInSerializedNodes",void 0),Bn(this,"getTargetsFromChildListMutation",void 0),Bn(this,"isAttributeInMutationQueue",void 0),Bn(this,"removeMutationFutureTargets",void 0),this.currentWindow=e,this.nodeProcessor=t,this.privacyManager=r,this.listeners=n,this.futureAttributesTargets=new WeakMap,this.futureTargets=new Dn,this.pendingMutations=[],this.isNodeInMutationQueue=e=>this.futureTargets.some(t=>t.contains(e)),this.findNodeInSerializedNodes=(e,t)=>{for(let r of t){if(r.id===e)return r;if(r.children&&r.children.length>0){let t=this.findNodeInSerializedNodes(e,r.children);if(t)return t}}},this.getTargetsFromChildListMutation=e=>"childList"===e.type&&(0,Ee.C5)(e.target)?[e.target]:[...Array.from(e.addedNodes),...Array.from(e.removedNodes)],this.isAttributeInMutationQueue=e=>{var t;return null!==e.attributeName&&(null==(t=this.futureAttributesTargets.get(e.target))?void 0:t.has(e.attributeName))},this.removeMutationFutureTargets=e=>{switch(e.type){case"childList":this.getTargetsFromChildListMutation(e).forEach(e=>{this.futureTargets.delete(e)});break;case"attributes":{let t=this.futureAttributesTargets.get(e.target);t&&null!==e.attributeName&&(t.delete(e.attributeName),0===t.size&&this.futureAttributesTargets.delete(e.target));break}case"characterData":(0,Ee.C5)(e.target.parentNode)&&this.futureTargets.delete(e.target.parentNode)}},this.mutationObserver=new MutationObserver(e=>{let t=Sn();e.forEach(e=>{if("attributes"===e.type&&null!==e.attributeName){let t=this.futureAttributesTargets.get(e.target);t?t.add(e.attributeName):this.futureAttributesTargets.set(e.target,new Dn([e.attributeName])),(0,Ee.cK)(e.target)&&"type"===e.attributeName&&("password"===e.oldValue||"password"===e.target.type)&&this.privacyManager.setIsPasswordInput(e.target)}else"childList"===e.type?this.getTargetsFromChildListMutation(e).forEach(e=>{this.futureTargets.add(e)}):"characterData"===e.type&&(0,Ee.C5)(e.target.parentNode)&&this.futureTargets.add(e.target.parentNode)}),this.pendingMutations.push({mutationRecords:e,time:t})}),this.mutationProcessIntervalId=setInterval(()=>{if(this.pendingMutations.length>0){let e=this.pendingMutations[this.pendingMutations.length-1];o!==e&&(o=e,fn.postTask("handlePendingMutations",()=>this.handlePendingMutations(e)))}},50)}}function Wn(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class zn{deleteExcludedElementDimensions(e){this.dimensionsByElement.delete(e)}disconnect(){this.resizeObserver.disconnect(),void 0!==this.resizeProcessTimeoutId&&(clearInterval(this.resizeProcessTimeoutId),this.resizeProcessTimeoutId=void 0)}observeExcludedElement(e){this.resizeObserver.observe(e)}processExcludedElement(e){let t=e.getBoundingClientRect();return this.dimensionsByElement.set(e,{height:t.height,width:t.width}),{height:t.height,isExcluded:!0,width:t.width}}shouldProcessExcludedElement(e){if(!e.isConnected)return this.resizeObserver.unobserve(e),!1;let t=this.dimensionsByElement.get(e),r=e.getBoundingClientRect();return!t||t.height!==r.height||t.width!==r.width}*processResizedExcludedElements(e){this.listeners.onExcludedNodesResized(e)}constructor(e){Wn(this,"listeners",void 0),Wn(this,"dimensionsByElement",void 0),Wn(this,"pendingResizeEntries",void 0),Wn(this,"resizeObserver",void 0),Wn(this,"resizeProcessTimeoutId",void 0),this.listeners=e,this.dimensionsByElement=new WeakMap,this.pendingResizeEntries=[],this.resizeObserver=new ResizeObserver(e=>{this.pendingResizeEntries.push(...e),void 0===this.resizeProcessTimeoutId&&(this.resizeProcessTimeoutId=setTimeout(()=>{let e=this.pendingResizeEntries;this.pendingResizeEntries=[],this.resizeProcessTimeoutId=void 0;let t=e.map(e=>e.target).filter((e,t,r)=>r.indexOf(e)===t);fn.postTask("handleResizedExcludedNodes",()=>this.processResizedExcludedElements(t))},100))})}}let Vn=new Set(["title","alt","onabort","onauxclick","onblur","oncanplay","oncancel","oncanplaythrough","onchange","onclick","onclose","oncontextmenu","oncopy","oncuechange","oncut","ondblclick","ondrag","ondragend","ondragenter","ondragleave","ondragover","ondragstart","ondrop","ondurationchange","onemptied","onended","onerror","onfocus","onfocusin","onfocusout","onformchange","onformdata","onforminput","oninput","oninvalid","onkeydown","onkeypress","onkeyup","onload","onloadeddata","onloadedmetadata","onloadstart","onmousedown","onmouseenter","onmouseleave","onmousemove","onmouseout","onmouseover","onmouseup","onwheel","onpaste","onpause","onplay","onplaying","onprogress","onratechange","onreset","onresize","onscroll","onsecuritypolicyviolation","onseeked","onseeking","onselect","onslotchange","onstalled","onsubmit","onsuspend","ontimeupdate","ontoggle","ontransitioncancel","ontransitionend","ontransitionrun","ontransitionstart","onvolumechange","onwaiting"]),Gn=/\s*([^,]\S*[^,](?:\s+[^,]+)?)\s*(?:,|$)/;class qn{static processSrcSetAttribute(e,t,r){let n=[],o=e.split(Gn).filter((e,t)=>t%2==1).map(e=>e.trim().split(/\s+/)).map(([e,...o])=>{let i=e;return wr(e)&&(i=ke(e,r)),Sr(i)&&n.push({source:t,uri:i}),[rn(i),...o].join(" ")}).join(", ");return{assets:n,srcset:o}}}class Hn{static isSerializableInput(e){return(0,Ee.YD)(e)}serializeInputValue(e){let t=e.getAttribute("value"),r=e.getAttribute("placeholder");if(this.privacyManager.shouldMaskTextNode(e)&&"string"==typeof r&&(r=Fe(r)),this.privacyManager.isSensitiveInput(e))return{attributes:{placeholder:r,value:null},value:null};let n=(0,Ee.cK)(e)&&["checkbox","radio"].includes(e.type)?this.getCheckedValue(e):e.value;return["submit","button"].includes(e.type)&&(t=e.value),this.privacyManager.shouldMaskInputNode(e)&&(n=Fe(n),"string"==typeof t&&(t=Fe(t))),{attributes:{placeholder:r,value:t},value:n}}getCheckedValue(e){return this.privacyManager.shouldMaskInputNode(e)?"":String(e.checked)}constructor(e){var t,r;r=void 0,(t="privacyManager")in this?Object.defineProperty(this,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):this[t]=r,this.privacyManager=e}}function $n(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class Kn{serializeMaskedNode(e){var t,r;return t=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){$n(e,t,r[t])})}return e}({},e),r=r={isMasked:!0},Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):function(e){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t.push.apply(t,r)}return t}(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}),t}shouldSerializeMaskedNode(e){let t=(0,Ee.cK)(e)&&this.privacyManager.shouldMaskInputNode(e),r=!(0,Ee.cK)(e)&&this.privacyManager.shouldMaskTextNode(e);return t||r}constructor(e){$n(this,"privacyManager",void 0),this.privacyManager=e}}class Jn{serializeTextNode(e){let t=e.nodeValue;return null===t?"":this.privacyManager.shouldMaskTextNode(e)?Fe(t):t}constructor(e){var t,r;r=void 0,(t="privacyManager")in this?Object.defineProperty(this,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):this[t]=r,this.privacyManager=e}}function Qn(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class Yn{serializeNode(e,t){let r={nodeName:e.nodeName},n=[];if((0,Ee.nQ)(e))r.attributes={name:e.name,publicId:e.publicId,systemId:e.systemId};else if((0,Ee.BM)(e))null!==e.nodeValue&&(r.value=this.textSerializer.serializeTextNode(e));else if((0,Ee.kK)(e)){if(r.attributes=((e,t)=>{let r={},n=e.attributes;if(n&&n.length>0)for(let e=0;e<n.length;e++){let o=n[e];if(!Vn.has(o.name))if(["src","href"].includes(o.name)){if(!Sr(o.value))continue;if(o.value.startsWith("#")){r[o.name]=o.value;continue}r[o.name]=ke(o.value,t)}else r[o.name]=o.value}else if(void 0===(null==n?void 0:n.length)&&"function"==typeof e.getAttribute){let t=e.getAttribute("id");"string"==typeof t&&(r.id=t);let n=e.getAttribute("class");"string"==typeof n&&(r.class=n)}return r})(e,t),(0,Ee.vU)(e)&&(r.origin=t.origin),(0,Ee.Tm)(e)&&r.attributes.data&&!r.attributes.data.startsWith("blob:")&&!r.attributes.data.startsWith("data:")&&(r.attributes.data=ke(r.attributes.data,t)),e.namespaceURI&&e.namespaceURI!==Ee.AF.XHTML&&(r.namespaceURI=e.namespaceURI),r.attributes.style){let{assets:e,value:o}=on.serializeCssText({cssText:r.attributes.style,currentWindow:t});r.attributes.style=o,n.push(...e)}if((0,Ee.C5)(e)){let{assets:o,value:i}=on.serializeStyleValue(e,t);r.value=i,n.push(...o)}if((0,Ee.iw)(e)){let t=e.href;Sr(t)&&(r.attributes.href=rn(t),n.push({source:e,uri:t}))}if((0,Ee.pC)(e)){let o=e.src;Sr(o)&&(n.push({source:e,uri:o}),r.attributes.src=rn(o));let i=e.srcset;if(i){let o=qn.processSrcSetAttribute(i,e,t);r.attributes.srcset=o.srcset,n.push(...o.assets)}}if((0,Ee.I4)(e)){let o=e.getAttribute("href");if(o){let i=ke(o,t);Sr(i)&&n.push({source:e,uri:i}),r.attributes.href=rn(i)}}if((0,Ee.xf)(e)){let o=e.getAttribute("href");if(o&&!o.startsWith("#")){let i=ke(o,t);Sr(i)&&n.push({source:e,uri:i}),r.attributes.href=rn(i)}}if((0,Ee.a4)(e)&&e.parentElement&&(0,Ee.FL)(e.parentElement)){let o=e.srcset;if(o){let i=qn.processSrcSetAttribute(o,e,t);r.attributes.srcset=i.srcset,n.push(...i.assets)}}if(this.maskedNodeSerializer.shouldSerializeMaskedNode(e)){let e=this.maskedNodeSerializer.serializeMaskedNode(r);Object.assign(r,e)}if(Hn.isSerializableInput(e)){let{attributes:t,value:n}=this.inputSerializer.serializeInputValue(e);null===n?delete r.value:r.value=n,r.attributes.value&&(null===t.value?delete r.attributes.value:r.attributes.value=t.value),r.attributes.placeholder&&t.placeholder&&(r.attributes.placeholder=t.placeholder)}((0,Ee.Tl)(e)||(0,Ee.gX)(e))&&(r.attributes["data-replay-src"]=r.attributes.src,r.attributes["data-replay-srcdoc"]=r.attributes.srcdoc,delete r.attributes.src,delete r.attributes.srcdoc)}return(0,Ee.Rx)(e)&&(r.isNonNativeShadowRoot=!0),{assets:n,serializedNode:r}}constructor(e){Qn(this,"privacyManager",void 0),Qn(this,"inputSerializer",void 0),Qn(this,"maskedNodeSerializer",void 0),Qn(this,"textSerializer",void 0),this.privacyManager=e,this.inputSerializer=new Hn(this.privacyManager),this.maskedNodeSerializer=new Kn(this.privacyManager),this.textSerializer=new Jn(this.privacyManager)}}function Xn(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Zn(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){Xn(e,t,r[t])})}return e}class eo{disconnect(){this.excludedElementProcessor.disconnect()}*processAddedNodeAndItsSubtree(e,t){var r,n,o,i,s;let a=new WeakMap,c=!1;for(let n of Me(e,{recoverOnNotConnectedNodes:!0,shouldProcessNode:e=>!((0,Ee.Tl)(e)&&this.config.backgroundServiceSrc&&e.src===this.config.backgroundServiceSrc||e.parentNode&&this.privacyManager.isNodeExcluded(e.parentNode)),useNativeTreeWalker:this.config.useNativeTreeWalker})){c=!0,this.privacyManager.retrieveAndStoreNodePrivacyInfo(n);let e=this.processAddedNode(n,t),o=(0,Ee.Zq)(n)||(0,Ee.Rx)(n)?n.host:n.parentNode,i=o&&a.get(o);i&&(i.children=null!=(r=i.children)?r:[],e&&i.children.push(e)),e&&a.set(n,e),yield}if(!c)return;let u=a.get(e);if(void 0===u)throw TypeError("DomTreeSerialized lost root");let l=null!=(n=e.parentNode&&this.nodeInfoManager.getIdByNode(e.parentNode))?n:null,d=null!=(o=this.findPreviousIndexedSiblingId(e))?o:null;return i=Zn({},u),s=s={action:"added",parentId:l,previousId:d},Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(s)):function(e){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t.push.apply(t,r)}return t}(Object(s)).forEach(function(e){Object.defineProperty(i,e,Object.getOwnPropertyDescriptor(s,e))}),i}processRemovedNode(e,t){let r=this.nodeInfoManager.getNodeInfo(e);for(let t of Me(e,{useNativeTreeWalker:this.config.useNativeTreeWalker}))this.nodeInfoManager.deleteNodeInfo(t),this.privacyManager.deleteNodePrivacyInfo(t),(0,Ee.kK)(t)&&this.excludedElementProcessor.deleteExcludedElementDimensions(t),this.listeners.onNodeRemoved(t);if(void 0!==r){if(null!==t){if(!t.isConnected)return;let e=this.nodeInfoManager.getNodeInfo(t);if((null==e?void 0:e.parent)!==t.parentNode)return}return{id:r.id,action:"removed"}}}constructor(e,t,r,n,o){Xn(this,"currentWindow",void 0),Xn(this,"nodeInfoManager",void 0),Xn(this,"privacyManager",void 0),Xn(this,"listeners",void 0),Xn(this,"config",void 0),Xn(this,"excludedElementProcessor",void 0),Xn(this,"nodeSerializer",void 0),Xn(this,"processAddedNode",void 0),Xn(this,"processUpdatedNode",void 0),Xn(this,"shouldProcessAddedNode",void 0),Xn(this,"shouldProcessRemovedNode",void 0),Xn(this,"shouldProcessUpdatedNode",void 0),Xn(this,"findPreviousIndexedSiblingId",void 0),Xn(this,"onExcludedNodeResized",void 0),Xn(this,"serializeNode",void 0),this.currentWindow=e,this.nodeInfoManager=t,this.privacyManager=r,this.listeners=n,this.config=o,this.processAddedNode=(e,t)=>{let r=this.nodeInfoManager.getIdByNodeOrCreateNewOne(e),n=this.privacyManager.isNodeExcluded(e);this.nodeInfoManager.setNodeInfo(e,{id:r,isMasked:this.privacyManager.isNodeMasked(e),isRecorded:!n,parent:e.parentNode,previousSibling:e.previousSibling}),n||this.listeners.onNodeAdded(e,t),n&&(0,Ee.kK)(e)&&this.excludedElementProcessor.observeExcludedElement(e);let o=this.serializeNode(e);if(o)return Zn({id:r},o)},this.processUpdatedNode=e=>{let t=this.nodeInfoManager.getIdByNode(e);if(void 0===t)return void w.warn("Cannot process updated node. Node not found in map.",e);let r=this.serializeNode(e);return r?Zn({id:t,action:"updated",parentId:null,previousId:null},r):void 0},this.shouldProcessAddedNode=e=>{if(!e.isConnected)return!1;let t=this.nodeInfoManager.getNodeInfo(e);return void 0===t||(t.parent!==e.parentNode||t.previousSibling!==e.previousSibling)&&(!t.isRecorded!==this.privacyManager.isNodeExcluded(e)||t.isMasked!==this.privacyManager.isNodeMasked(e)||!Ie(e))},this.shouldProcessRemovedNode=e=>void 0!==this.nodeInfoManager.getNodeInfo(e),this.shouldProcessUpdatedNode=e=>!!e.isConnected&&void 0!==this.nodeInfoManager.getNodeInfo(e),this.findPreviousIndexedSiblingId=e=>{let t,r=e.previousSibling;for(;r;){if(void 0!==(t=this.nodeInfoManager.getIdByNode(r)))return t;r=r.previousSibling}},this.onExcludedNodeResized=e=>{let t=Sn(),r=[];for(let t of e){let e=this.processUpdatedNode(t);e&&r.push(e)}r.length>0&&this.listeners.onMutationsProcessed(r,t)},this.serializeNode=e=>{if(this.privacyManager.isNodeExcluded(e))return(0,Ee.kK)(e)&&this.excludedElementProcessor.shouldProcessExcludedElement(e)?this.excludedElementProcessor.processExcludedElement(e):void 0;let{assets:t,serializedNode:r}=this.nodeSerializer.serializeNode(e,this.currentWindow);return t&&t.forEach(e=>this.listeners.onAssetDiscovered(e)),r},this.nodeSerializer=new Yn(this.privacyManager),this.excludedElementProcessor=new zn({onExcludedNodesResized:this.onExcludedNodeResized})}}function to(e,t,r,n,o,i,s){try{var a=e[i](s),c=a.value}catch(e){return void r(e)}a.done?t(c):Promise.resolve(c).then(n,o)}function ro(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function no(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){ro(e,t,r[t])})}return e}function oo(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t.push.apply(t,r)}return t}(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}),e}class io extends rt{createDOMSnapshot(){var e;return(e=function*(){let e=this.createSnapshotEvent(),t=yield fn.postTask("createDOMSnapshot",()=>this.nodeProcessor.processAddedNodeAndItsSubtree(this.currentWindow.document,e.timestamp));if(!t)throw Error("Serialized document is undefined");let{action:r}=t,n=function(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}(t,["action"]);return this.uploadReplayEvent(oo(no({},e),{data:{rootNode:n}})),e.timestamp},function(){var t=this,r=arguments;return new Promise(function(n,o){var i=e.apply(t,r);function s(e){to(i,n,o,s,a,"next",e)}function a(e){to(i,n,o,s,a,"throw",e)}s(void 0)})}).call(this)}onMutationsProcessed(e){}onNodeAdded(e,t){var r;(0,Ee._V)(e)&&this.mutationProcessor.observe(e),(0,Ee.Tl)(e)&&(null==(r=this.taskContext.config.features)?void 0:r.iframes)&&this.onIframeDiscovered(e,t),this.taskEmitter.emit("nodeAdded",{node:e,rootWindow:this.currentWindow})}onNodeRemoved(e){this.taskEmitter.emit("nodeRemoved",{node:e,rootWindow:this.currentWindow})}onStart(){this.createDOMSnapshot(),this.mutationProcessor.observe(this.currentWindow.document)}onStop(){this.mutationProcessor.disconnect(),this.nodeProcessor.disconnect(),this.assetProcessor.disconnect()}constructor(e,t,r){var n;super(e,t),ro(this,"startRecordingWindow",void 0),ro(this,"assetProcessor",void 0),ro(this,"mutationProcessor",void 0),ro(this,"nodeProcessor",void 0),ro(this,"onAssetDiscovered",void 0),ro(this,"handleMutationsProcessed",void 0),ro(this,"handleNodeAdded",void 0),ro(this,"handleNodeRemoved",void 0),ro(this,"onIframeDiscovered",void 0),this.startRecordingWindow=r,this.onAssetDiscovered=e=>this.assetProcessor.processDiscoveredNetworkAsset(e),this.handleMutationsProcessed=(e,t)=>{this.uploadReplayEvent(oo(no({},this.createReplayEventEnvelope(t)),{name:ie.NODE_MUTATION,data:{nodes:e},parentMetadata:null})),this.onMutationsProcessed(t)},this.handleNodeAdded=(e,t)=>{this.isStarted&&this.onNodeAdded(e,t)},this.handleNodeRemoved=e=>{this.isStarted&&this.onNodeRemoved(e)},this.onIframeDiscovered=(e,t)=>{let r=t=>{if(this.mutationProcessor.isNodeInMutationQueue(e))return this.nodeInfoManager.deleteLoadListenerForIframe(e),void w.warn("Iframe is being processed in pending mutations, skipping this load event.");var r;e.contentWindow?O(e.contentWindow)?this.startRecordingWindow(e.contentWindow,{iframeElementId:this.nodeInfoManager.getIdByNodeOrCreateNewOne(e),windowId:this.windowIdManager.getWindowId(this.currentWindow)},t):null==(r=this.taskContext.moduleScoped.postMessageMainService)||r.sendStartRecordingEvent(e,{iframeElementId:this.nodeInfoManager.getIdByNodeOrCreateNewOne(e),windowId:this.windowIdManager.getWindowId(e.contentWindow)}):w.warn("Iframe contentWindow is not available")};+(!e.contentDocument||"complete"!==e.contentDocument.readyState||"about:blank"!==e.src&&"about:blank"===e.contentDocument.location.href)?e.contentWindow&&!O(e.contentWindow)&&r():r(t),this.nodeInfoManager.getLoadListenerForIframe(e)?w.warn("Iframe load listener already exists"):this.nodeInfoManager.setLoadListenerForIframe(e,()=>r())},this.assetProcessor=new _n(this.taskContext),this.nodeProcessor=new eo(this.currentWindow,this.nodeInfoManager,this.privacyManager,{onAssetDiscovered:this.onAssetDiscovered,onMutationsProcessed:this.handleMutationsProcessed,onNodeAdded:this.handleNodeAdded,onNodeRemoved:this.handleNodeRemoved},{backgroundServiceSrc:null==(n=t.config.features)?void 0:n.backgroundServiceSrc,useNativeTreeWalker:t.config.useNativeTreeWalker}),this.mutationProcessor=new Un(this.currentWindow,this.nodeProcessor,this.privacyManager,{onMutationsProcessed:this.handleMutationsProcessed})}}function so(e,t,r,n,o,i,s){try{var a=e[i](s),c=a.value}catch(e){return void r(e)}a.done?t(c):Promise.resolve(c).then(n,o)}function ao(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function co(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){ao(e,t,r[t])})}return e}function uo(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t.push.apply(t,r)}return t}(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}),e}class lo extends io{createDOMSnapshot(){var e,t=this,r=()=>super.createDOMSnapshot;return(e=function*(){let e=yield r().call(t);return this.cssProcessor.observe(this.currentWindow.document,e),e},function(){var t=this,r=arguments;return new Promise(function(n,o){var i=e.apply(t,r);function s(e){so(i,n,o,s,a,"next",e)}function a(e){so(i,n,o,s,a,"throw",e)}s(void 0)})}).call(this)}onNodeAdded(e,t){super.onNodeAdded(e,t),(0,Ee.Zq)(e)&&this.cssProcessor.observe(e,t)}onNodeRemoved(e){super.onNodeRemoved(e),(0,Ee.Zq)(e)&&this.cssProcessor.disconnectShadowRoot(e)}onStart(){super.onStart(),this.cssProcessor.observe()}onStop(){super.onStop(),this.cssProcessor.disconnect()}constructor(...e){super(...e),ao(this,"cssProcessor",void 0),ao(this,"onAdoptedStyleSheetDiscovered",(e,t)=>{this.uploadReplayEvent(uo(co({},this.createReplayEventEnvelope(t)),{name:ie.ADOPTED_STYLESHEET,data:e}))}),ao(this,"onAdoptedStyleSheetMutationProcessed",e=>{this.uploadReplayEvent(uo(co({},this.createReplayEventEnvelope()),{name:ie.ADOPTED_STYLESHEET,data:e}))}),ao(this,"onAdoptedStyleSheetsAssigned",(e,t)=>{this.uploadReplayEvent(uo(co({},this.createReplayEventEnvelope(t)),{name:ie.ADOPTED_STYLESHEET,data:e}))}),ao(this,"onStyleSheetMutationProcessed",e=>{this.uploadReplayEvent(uo(co({},this.createReplayEventEnvelope()),{name:ie.STYLESHEET_MUTATION,data:e}))}),this.cssProcessor=new an(this.currentWindow,this.nodeInfoManager,{onAdoptedStyleSheetDiscovered:this.onAdoptedStyleSheetDiscovered,onAdoptedStyleSheetMutationProcessed:this.onAdoptedStyleSheetMutationProcessed,onAdoptedStyleSheetsAssigned:this.onAdoptedStyleSheetsAssigned,onAssetDiscovered:this.onAssetDiscovered,onStyleSheetMutationProcessed:this.onStyleSheetMutationProcessed})}}function fo(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class ho extends lo{constructor(e,t,...r){super(...r),fo(this,"parentMetadata",void 0),fo(this,"parentTimestamp",void 0),fo(this,"createSnapshotEvent",void 0),this.parentMetadata=e,this.parentTimestamp=t,this.createSnapshotEvent=()=>{var e,t;let r=this.parentTimestamp;return"number"==typeof r&&(r+=.001),e=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){fo(e,t,r[t])})}return e}({},this.createReplayEventEnvelope(r)),t=t={name:ie.DOM_SNAPSHOT,parentMetadata:this.parentMetadata},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t.push.apply(t,r)}return t}(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}),e}}}function po(e,t,r,n,o,i,s){try{var a=e[i](s),c=a.value}catch(e){return void r(e)}a.done?t(c):Promise.resolve(c).then(n,o)}function vo(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class yo extends lo{constructor(...e){var t,r=()=>super.createDOMSnapshot,n=()=>super.onMutationsProcessed;super(...e),vo(t=this,"lastSnapshotTimestamp",void 0),vo(t,"createDOMSnapshot",()=>{var e;return(e=function*(){return t.lastSnapshotTimestamp=yield r().call(t),t.lastSnapshotTimestamp},function(){var t=this,r=arguments;return new Promise(function(n,o){var i=e.apply(t,r);function s(e){po(i,n,o,s,a,"next",e)}function a(e){po(i,n,o,s,a,"throw",e)}s(void 0)})})()}),vo(t,"createSnapshotEvent",()=>{var e,r;return e=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){vo(e,t,r[t])})}return e}({},t.createReplayEventEnvelope()),r=r={name:ie.DOM_SNAPSHOT,parentMetadata:null},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):function(e){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t.push.apply(t,r)}return t}(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}),e}),vo(t,"onMutationsProcessed",e=>{n().call(t,e),void 0!==t.lastSnapshotTimestamp&&e-t.lastSnapshotTimestamp>t.taskContext.config.periodicDOMSnapshotInterval&&t.createDOMSnapshot()})}}function go(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class mo{constructor(){go(this,"listeners",{}),go(this,"addEventListener",(e,t)=>{var r;let n=null!=(r=this.listeners[e])?r:[];n.push(t),this.listeners[e]=n}),go(this,"emit",(e,...t)=>{let r=this.listeners[e];r&&r.forEach(e=>{e(...t)})}),go(this,"removeEventListener",(e,t)=>{let r=this.listeners[e];if(r){let n=r.indexOf(t);-1===n?w.error(`Trying to remove not existing listener of type '${String(e)}'`):r.splice(n,1)}})}}function bo(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}let wo=S("node-info-manager");class So{deleteNodeInfo(e){(0,Ee.Tl)(e)&&this.deleteLoadListenerForIframe(e),this.infoByNodes.delete(e)}getIdByNode(e){let t=this.infoByNodes.get(e);if(void 0!==t)return t.id}getIdByNodeOrCreateNewOne(e){let t=this.infoByNodes.get(e);return void 0===t?(this.lastUsedNodeId+=1,this.setNodeInfo(e,{id:this.lastUsedNodeId,isMasked:!1,isRecorded:!1}),this.lastUsedNodeId):t.id}getNodeInfo(e){return this.infoByNodes.get(e)}setLoadListenerForIframe(e,t){e.addEventListener("load",t,!0),void 0===this.loadListenersByIframeNodes.get(e)&&(wo.debug(`Setting load listener for iframe id ${this.getIdByNode(e)}`),this.loadListenersByIframeNodes.set(e,t))}setNodeInfo(e,t){this.infoByNodes.set(e,t)}constructor(){bo(this,"infoByNodes",new WeakMap),bo(this,"lastUsedNodeId",0),bo(this,"loadListenersByIframeNodes",new Map),bo(this,"deleteLoadListenerForIframe",e=>{let t=this.loadListenersByIframeNodes.get(e);void 0!==t&&(wo.debug(`Deleting load listener for iframe id ${this.getIdByNode(e)}`),e.removeEventListener("load",t,!0),this.loadListenersByIframeNodes.delete(e))}),bo(this,"getLoadListenerForIframe",e=>this.loadListenersByIframeNodes.get(e))}}function Oo(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class Eo{constructor(){Oo(this,"scrollPositionsByElement",new WeakMap),Oo(this,"getPosition",e=>this.scrollPositionsByElement.get(e)),Oo(this,"setPosition",(e,t)=>{this.scrollPositionsByElement.set(e,t)})}}function Po(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class xo{get config(){return this.configContext}get moduleScoped(){return this.moduleScopedContext}get windowScoped(){return this.windowScopedContext}constructor(e,t,r){Po(this,"configContext",void 0),Po(this,"moduleScopedContext",void 0),Po(this,"windowScopedContext",void 0),this.configContext=e,this.moduleScopedContext=t,this.windowScopedContext=r}}function To(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ko(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){To(e,t,r[t])})}return e}let Io={backgroundServiceSrc:"",cacheAssets:!1,canvas:!1,iframes:!0,packAssets:!1,video:!1};class Co{create(){if(!this.moduleScopedContext)throw new G("Module scoped record task context is not set");let e=this.createConfigContext(),t=this.createWindowScopedContext();return new xo(e,this.moduleScopedContext,t)}constructor(e={}){To(this,"configContext",void 0),To(this,"moduleScopedContext",void 0),To(this,"windowScopedContext",{}),To(this,"setConfigContext",e=>(this.configContext=ko({},this.configContext,e),this)),To(this,"setModuleScopedContext",e=>(this.moduleScopedContext=e,this)),To(this,"setWindowScopedContext",e=>(this.windowScopedContext=ko({},this.windowScopedContext,e),this)),To(this,"createConfigContext",()=>{var e,t,r,n,o,i,s,a,c;return{exportForTests:null!=(e=this.configContext.exportForTests)&&e,features:ko({},Io,this.configContext.features),getRelativeTime:null!=(t=this.configContext.getRelativeTime)?t:()=>performance.now(),getTimestamp:null!=(r=this.configContext.getTimestamp)?r:Sn,maxExportIntervalMs:null!=(n=this.configContext.maxExportIntervalMs)?n:5e3,originalFetch:null!=(o=this.configContext.originalFetch)?o:window.fetch.bind(window),periodicDOMSnapshotInterval:null!=(i=this.configContext.periodicDOMSnapshotInterval)?i:3e5,uploadAsset:null!=(s=this.configContext.uploadAsset)?s:()=>{},uploadEvent:null!=(a=this.configContext.uploadEvent)?a:()=>{},useNativeTreeWalker:null==(c=this.configContext.useNativeTreeWalker)||c}}),To(this,"createWindowScopedContext",()=>{var e,t,r,n;return{nodeInfoManager:null!=(e=this.windowScopedContext.nodeInfoManager)?e:new So,privacyManager:null!=(t=this.windowScopedContext.privacyManager)?t:new Ke({maskAllInputs:!0,maskAllText:!0,sensitivityRules:[],useNativeTreeWalker:!0}),scrollManager:null!=(r=this.windowScopedContext.scrollManager)?r:new Eo,taskEmitter:null!=(n=this.windowScopedContext.taskEmitter)?n:new mo}}),this.configContext=e}}function Ro(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class Ao{get isStarted(){return this._isStarted}set isStarted(e){if(this._isStarted===e)throw new G(e?"Session replay is already started. Start is not needed.":"Session replay is not started. Stop is not needed.");this._isStarted=e}initIframeRecordTasks(e){let t=this.createRecordTaskContext(),r=window,n=new ho(e,void 0,r,t,this.startRecordingIframeWindow);this.recordTaskManager.addTask(n).initTasksByWindow(r,t)}initRecordTasks(){let e=this.createRecordTaskContext(),t=window,r=new yo(t,e,this.startRecordingIframeWindow);this.recordTaskManager.addTask(r).initTasksByWindow(t,e)}startRecording(){this.recordTaskManager.startTasksByWindow(window)}stopRecording(){this.recordTaskManager.stopAllTasks()}constructor(e){var t,r,n,o,i,s,a;Ro(this,"config",void 0),Ro(this,"maxExportIntervalMs",void 0),Ro(this,"recordTaskContextCreator",void 0),Ro(this,"recordTaskManager",void 0),Ro(this,"_isStarted",void 0),Ro(this,"createRecordTaskContext",void 0),Ro(this,"startRecordingIframeWindow",void 0),this.config=e,this._isStarted=!1,this.createRecordTaskContext=()=>{var e,t,r,n;return this.recordTaskContextCreator.setWindowScopedContext({privacyManager:new Ke({maskAllInputs:null==(e=this.config.maskAllInputs)||e,maskAllText:null==(t=this.config.maskAllText)||t,sensitivityRules:null!=(r=this.config.sensitivityRules)?r:[],useNativeTreeWalker:null==(n=this.config.useNativeTreeWalker)||n})}).create()},this.startRecordingIframeWindow=(e,t,r)=>{if(!O(e))return;this.recordTaskManager.getTasksByWindow(e)&&this.recordTaskManager.stopTasksByWindow(e),w.debug("Start recording iframe",e);let n=this.createRecordTaskContext(),o=new ho(t,r,e,n,this.startRecordingIframeWindow);this.recordTaskManager.addTask(o).initTasksByWindow(e,n).startTasksByWindow(e)},e.logLevel&&w.setLoggingLevel(null!=(t=e.logLevel)?t:"critical"),e.logPrefix&&w.setLoggingPrefix(null!=(r=e.logPrefix)?r:"session-replay: "),this.maxExportIntervalMs=null!=(n=this.config.maxExportIntervalMs)?n:5e3,this.recordTaskManager=new mr(null!=(o=e.customTasks)?o:[]),this.recordTaskContextCreator=new Co((s=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){Ro(e,t,r[t])})}return e}({},e),a=a={maxExportIntervalMs:this.maxExportIntervalMs,periodicDOMSnapshotInterval:null!=(i=this.config.periodicDOMSnapshotInterval)?i:3e5},Object.getOwnPropertyDescriptors?Object.defineProperties(s,Object.getOwnPropertyDescriptors(a)):function(e){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t.push.apply(t,r)}return t}(Object(a)).forEach(function(e){Object.defineProperty(s,e,Object.getOwnPropertyDescriptor(a,e))}),s))}}function jo(e,t,r,n,o,i,s){try{var a=e[i](s),c=a.value}catch(e){return void r(e)}a.done?t(c):Promise.resolve(c).then(n,o)}function Mo(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}let No=S("session-replay-iframe");class Lo extends Ao{start(){return E()?(()=>{if(window.top===window)return!1;try{return!!window.frameElement}catch(e){return!1}})()?void No.warn("Session replay iframe cannot be started in the same origin iframe."):(this.isStarted=!0,No.debug("Session replay iframe started"),void this.startRecordingIfParentIsDiscovered()):void No.warn("Session replay iframe cannot be started outside of an iframe.")}stop(){this.isStarted=!1,No.debug("Session replay iframe stopped"),this.stopRecording()}constructor(e){var t;super(e),Mo(t=this,"postMessageService",void 0),Mo(t,"windowIdManager",void 0),Mo(t,"attachPostMessageEventListeners",()=>{t.postMessageService.addPostMessageEventListener(ue.STOP_RECORDING,()=>{t.stop()})}),Mo(t,"emitAsset",e=>{t.postMessageService.sendDataEventToParent({assets:[e]}),No.debug("Emitted asset event",e)}),Mo(t,"emitEvent",e=>{t.postMessageService.sendDataEventToParent({events:[e]}),No.debug(`Emitted ${e.name} event`,e)}),Mo(t,"startRecordingIfParentIsDiscovered",()=>{var e;return(e=function*(){if(yield t.postMessageService.waitForParentDiscovery({timeout:t.config.timeout})){let e=yield t.postMessageService.waitForStartRecordingFromParent();e&&(No.debug("Received start recording message from the parent."),t.windowIdManager.setWindowId(window,e.windowId),F.initializeInIframe(e.browserInstanceId),t.initIframeRecordTasks({iframeElementId:e.iframeElementId,windowId:e.windowId}),"visible"===e.visibilityState&&t.startRecording())}else{var e,r;No.debug("Parent session replay not discovered."),null==(e=(r=t.config).onTimeout)||e.call(r)}},function(){var t=this,r=arguments;return new Promise(function(n,o){var i=e.apply(t,r);function s(e){jo(i,n,o,s,a,"next",e)}function a(e){jo(i,n,o,s,a,"throw",e)}s(void 0)})})()}),t.windowIdManager=new P,t.postMessageService=new Oe({channelId:"session-replay"}),t.recordTaskContextCreator.setConfigContext({uploadAsset:t.emitAsset,uploadEvent:t.emitEvent}).setModuleScopedContext({backgroundService:new J(e),windowIdManager:t.windowIdManager}),t.attachPostMessageEventListeners()}}try{e=new TextDecoder}catch(e){}let _o=0,Do=[],Bo={},Fo=Do,Uo=0,Wo={},zo=0,Vo=0,Go=[],qo=[],Ho={useRecords:!1,mapsAsObjects:!0},$o=!1,Ko=2;try{Function("")}catch(e){Ko=1/0}class Jo{decodeKey(e){return this.keyMap&&this.mapKey.get(e)||e}encodeKey(e){return this.keyMap&&this.keyMap.hasOwnProperty(e)?this.keyMap[e]:e}encodeKeys(e){if(!this._keyMap)return e;let t=new Map;for(let[r,n]of Object.entries(e))t.set(this._keyMap.hasOwnProperty(r)?this._keyMap[r]:r,n);return t}decodeKeys(e){if(!this._keyMap||"Map"!=e.constructor.name)return e;if(!this._mapKey)for(let[e,t]of(this._mapKey=new Map,Object.entries(this._keyMap)))this._mapKey.set(t,e);let t={};return e.forEach((e,r)=>t[ei(this._mapKey.has(r)?this._mapKey.get(r):r)]=e),t}mapDecode(e,t){let r=this.decode(e);return this._keyMap&&"Array"===r.constructor.name?r.map(e=>this.decodeKeys(e)):r}decode(e,s){if(t)return mi(()=>(bi(),this?this.decode(e,s):Jo.prototype.decode.call(Ho,e,s)));r=s>-1?s:e.length,_o=0,Uo=0,Vo=0,o=null,Fo=Do,i=null,t=e;try{c=e.dataView||(e.dataView=new DataView(e.buffer,e.byteOffset,e.byteLength))}catch(s){if(t=null,e instanceof Uint8Array)throw s;throw Error("Source must be a Uint8Array or Buffer but was a "+(e&&"object"==typeof e?e.constructor.name:typeof e))}return this instanceof Jo?(Wo=this,a=this.sharedValues&&(this.pack?Array(this.maxPrivatePackedValues||16).concat(this.sharedValues):this.sharedValues),this.structures?n=this.structures:(!n||n.length>0)&&(n=[])):(Wo=Ho,(!n||n.length>0)&&(n=[]),a=null),Qo()}decodeMultiple(e,t){let r,n=0;try{let o=e.length;$o=!0;let i=this?this.decode(e,o):Si.decode(e,o);if(!t){for(r=[i];_o<o;)n=_o,r.push(Qo());return r}if(!1===t(i))return;for(;_o<o;)if(n=_o,!1===t(Qo()))return}catch(e){throw e.lastPosition=n,e.values=r,e}finally{$o=!1,bi()}}constructor(e){if(e&&((e.keyMap||e._keyMap)&&!e.useRecords&&(e.useRecords=!1,e.mapsAsObjects=!0),!1===e.useRecords&&void 0===e.mapsAsObjects&&(e.mapsAsObjects=!0),e.getStructures&&(e.getShared=e.getStructures),e.getShared&&!e.structures&&((e.structures=[]).uninitialized=!0),e.keyMap))for(let[t,r]of(this.mapKey=new Map,Object.entries(e.keyMap)))this.mapKey.set(r,t);Object.assign(this,e)}}function Qo(){try{let e=Yo();if(i){if(_o>=i.postBundlePosition){let e=Error("Unexpected bundle position");throw e.incomplete=!0,e}_o=i.postBundlePosition,i=null}if(_o==r)n=null,t=null,s&&(s=null);else{if(_o>r){let e=Error("Unexpected end of CBOR data");throw e.incomplete=!0,e}if(!$o)throw Error("Data read, but end of buffer not reached")}return e}catch(e){throw bi(),(e instanceof RangeError||e.message.startsWith("Unexpected end of buffer"))&&(e.incomplete=!0),e}}function Yo(){let e=t[_o++],s=e>>5;if((e&=31)>23)switch(e){case 24:e=t[_o++];break;case 25:if(7==s){let e=t[_o++],r=t[_o++],n=(127&e)>>2;if(31===n)return r||3&e?NaN:128&e?-1/0:1/0;if(0===n){let t=((3&e)<<8|r)/16777216;return 128&e?-t:t}return si[3]=128&e|56+(n>>1),si[2]=(7&e)<<5|r>>3,si[1]=r<<5,si[0]=0,ii[0]}e=c.getUint16(_o),_o+=2;break;case 26:if(7==s){let e=c.getFloat32(_o);if(Wo.useFloat32>2){let r=wi[(127&t[_o])<<1|t[_o+1]>>7];return _o+=4,(r*e+(e>0?.5:-.5)|0)/r}return _o+=4,e}e=c.getUint32(_o),_o+=4;break;case 27:if(7==s){let e=c.getFloat64(_o);return _o+=8,e}if(s>1){if(c.getUint32(_o)>0)throw Error("JavaScript does not support arrays, maps, or strings with length over 4294967295");e=c.getUint32(_o+4)}else e=Wo.int64AsNumber?4294967296*c.getUint32(_o)+c.getUint32(_o+4):c.getBigUint64(_o);_o+=8;break;case 31:switch(s){case 2:case 3:throw Error("Indefinite length not supported for byte or text strings");case 4:let e,t=[],r=0;for(;(e=Yo())!=Bo;){if(r>=11281e4)throw Error("Array length exceeds 112810000");t[r++]=e}return 4==s?t:3==s?t.join(""):Buffer.concat(t);case 5:let n;if(Wo.mapsAsObjects){let e={},t=0;if(Wo.keyMap)for(;(n=Yo())!=Bo;){if(t++>=1681e4)throw Error("Property count exceeds 16810000");e[ei(Wo.decodeKey(n))]=Yo()}else for(;(n=Yo())!=Bo;){if(t++>=1681e4)throw Error("Property count exceeds 16810000");e[ei(n)]=Yo()}return e}{u&&(Wo.mapsAsObjects=!0,u=!1);let e=new Map;if(Wo.keyMap){let t=0;for(;(n=Yo())!=Bo;){if(t++>=1681e4)throw Error("Map size exceeds 16810000");e.set(Wo.decodeKey(n),Yo())}}else{let t=0;for(;(n=Yo())!=Bo;){if(t++>=1681e4)throw Error("Map size exceeds 16810000");e.set(n,Yo())}}return e}case 7:return Bo;default:throw Error("Invalid major type for indefinite length "+s)}default:throw Error("Unknown token "+e)}switch(s){case 0:return e;case 1:return~e;case 2:var l;return l=e,Wo.copyBuffers?Uint8Array.prototype.slice.call(t,_o,_o+=l):t.subarray(_o,_o+=l);case 3:if(Vo>=_o)return o.slice(_o-zo,(_o+=e)-zo);if(0==Vo&&r<140&&e<32){let r=e<16?oi(e):function(e){let r=_o,n=Array(e);for(let o=0;o<e;o++){let e=t[_o++];if((128&e)>0)return void(_o=r);n[o]=e}return ni.apply(String,n)}(e);if(null!=r)return r}return ti(e);case 4:if(e>=11281e4)throw Error("Array length exceeds 112810000");let s=Array(e);for(let t=0;t<e;t++)s[t]=Yo();return s;case 5:if(e>=1681e4)throw Error("Map size exceeds 112810000");if(Wo.mapsAsObjects){let t={};if(Wo.keyMap)for(let r=0;r<e;r++)t[ei(Wo.decodeKey(Yo()))]=Yo();else for(let r=0;r<e;r++)t[ei(Yo())]=Yo();return t}{u&&(Wo.mapsAsObjects=!0,u=!1);let t=new Map;if(Wo.keyMap)for(let r=0;r<e;r++)t.set(Wo.decodeKey(Yo()),Yo());else for(let r=0;r<e;r++)t.set(Yo(),Yo());return t}case 6:if(e>=57337){let t=n[8191&e];if(t)return t.read||(t.read=Zo(t)),t.read();if(e<65536){if(57343==e){let e=yi(),t=Yo(),r=Yo();ci(t,r);let n={};if(Wo.keyMap)for(let t=2;t<e;t++)n[ei(Wo.decodeKey(r[t-2]))]=Yo();else for(let t=2;t<e;t++)n[ei(r[t-2])]=Yo();return n}if(57342==e){let e=yi(),t=Yo();for(let r=2;r<e;r++)ci(t++,Yo());return Yo()}if(57337==e)return function(){let e=yi(),t=_o+Yo();for(let t=2;t<e;t++){let e=yi();_o+=e}let r=_o;return _o=t,(i=[ri(yi()),ri(yi())]).position0=0,i.position1=0,i.postBundlePosition=_o,_o=r,Yo()}();if(Wo.getShared&&(gi(),t=n[8191&e]))return t.read||(t.read=Zo(t)),t.read()}}let c=Go[e];if(c)return c.handlesRead?c(Yo):c(Yo());{let t=Yo();for(let r=0;r<qo.length;r++){let n=qo[r](e,t);if(void 0!==n)return n}return new ai(t,e)}case 7:switch(e){case 20:return!1;case 21:return!0;case 22:return null;case 23:return;default:let t=(a||fi())[e];if(void 0!==t)return t;throw Error("Unknown token "+e)}default:if(isNaN(e)){let e=Error("Unexpected end of CBOR data");throw e.incomplete=!0,e}throw Error("Unknown CBOR token "+e)}}let Xo=/^[a-zA-Z_$][a-zA-Z\d_$]*$/;function Zo(e){if(!e)throw Error("Structure is required in record definition");return e.slowReads=0,function(){let e=t[_o++];if((e&=31)>23)switch(e){case 24:e=t[_o++];break;case 25:e=c.getUint16(_o),_o+=2;break;case 26:e=c.getUint32(_o),_o+=4;break;default:throw Error("Expected array header, but got "+t[_o-1])}let r=this.compiledReader;for(;r;){if(r.propertyCount===e)return r(Yo);r=r.next}if(this.slowReads++>=Ko){let t=this.length==e?this:this.slice(0,e);return r=Wo.keyMap?Function("r","return {"+t.map(e=>Wo.decodeKey(e)).map(e=>Xo.test(e)?ei(e)+":r()":"["+JSON.stringify(e)+"]:r()").join(",")+"}"):Function("r","return {"+t.map(e=>Xo.test(e)?ei(e)+":r()":"["+JSON.stringify(e)+"]:r()").join(",")+"}"),this.compiledReader&&(r.next=this.compiledReader),r.propertyCount=e,this.compiledReader=r,r(Yo)}let n={};if(Wo.keyMap)for(let t=0;t<e;t++)n[ei(Wo.decodeKey(this[t]))]=Yo();else for(let t=0;t<e;t++)n[ei(this[t])]=Yo();return n}}function ei(e){if("string"==typeof e)return"__proto__"===e?"__proto_":e;if("number"==typeof e||"boolean"==typeof e||"bigint"==typeof e)return e.toString();if(null==e)return e+"";throw Error("Invalid property name type "+typeof e)}let ti=ri;function ri(r){let n;if(r<16&&(n=oi(r)))return n;if(r>64&&e)return e.decode(t.subarray(_o,_o+=r));let o=_o+r,i=[];for(n="";_o<o;){let e=t[_o++];if(128&e)if(192==(224&e)){let r=63&t[_o++];i.push((31&e)<<6|r)}else if(224==(240&e)){let r=63&t[_o++],n=63&t[_o++];i.push((31&e)<<12|r<<6|n)}else if(240==(248&e)){let r=(7&e)<<18|(63&t[_o++])<<12|(63&t[_o++])<<6|63&t[_o++];r>65535&&(r-=65536,i.push(r>>>10&1023|55296),r=56320|1023&r),i.push(r)}else i.push(e);else i.push(e);i.length>=4096&&(n+=ni.apply(String,i),i.length=0)}return i.length>0&&(n+=ni.apply(String,i)),n}let ni=String.fromCharCode;function oi(e){if(e<4){if(e<2){if(0===e)return"";{let e=t[_o++];return(128&e)>1?void(_o-=1):ni(e)}}{let r=t[_o++],n=t[_o++];if((128&r)>0||(128&n)>0)return void(_o-=2);if(e<3)return ni(r,n);let o=t[_o++];return(128&o)>0?void(_o-=3):ni(r,n,o)}}{let r=t[_o++],n=t[_o++],o=t[_o++],i=t[_o++];if((128&r)>0||(128&n)>0||(128&o)>0||(128&i)>0)return void(_o-=4);if(e<6){if(4===e)return ni(r,n,o,i);{let e=t[_o++];return(128&e)>0?void(_o-=5):ni(r,n,o,i,e)}}if(e<8){let s=t[_o++],a=t[_o++];if((128&s)>0||(128&a)>0)return void(_o-=6);if(e<7)return ni(r,n,o,i,s,a);let c=t[_o++];return(128&c)>0?void(_o-=7):ni(r,n,o,i,s,a,c)}{let s=t[_o++],a=t[_o++],c=t[_o++],u=t[_o++];if((128&s)>0||(128&a)>0||(128&c)>0||(128&u)>0)return void(_o-=8);if(e<10){if(8===e)return ni(r,n,o,i,s,a,c,u);{let e=t[_o++];return(128&e)>0?void(_o-=9):ni(r,n,o,i,s,a,c,u,e)}}if(e<12){let l=t[_o++],d=t[_o++];if((128&l)>0||(128&d)>0)return void(_o-=10);if(e<11)return ni(r,n,o,i,s,a,c,u,l,d);let f=t[_o++];return(128&f)>0?void(_o-=11):ni(r,n,o,i,s,a,c,u,l,d,f)}{let l=t[_o++],d=t[_o++],f=t[_o++],h=t[_o++];if((128&l)>0||(128&d)>0||(128&f)>0||(128&h)>0)return void(_o-=12);if(e<14){if(12===e)return ni(r,n,o,i,s,a,c,u,l,d,f,h);{let e=t[_o++];return(128&e)>0?void(_o-=13):ni(r,n,o,i,s,a,c,u,l,d,f,h,e)}}{let p=t[_o++],v=t[_o++];if((128&p)>0||(128&v)>0)return void(_o-=14);if(e<15)return ni(r,n,o,i,s,a,c,u,l,d,f,h,p,v);let y=t[_o++];return(128&y)>0?void(_o-=15):ni(r,n,o,i,s,a,c,u,l,d,f,h,p,v,y)}}}}}let ii=new Float32Array(1),si=new Uint8Array(ii.buffer,0,4);class ai{constructor(e,t){this.value=e,this.tag=t}}Go[0]=e=>new Date(e),Go[1]=e=>new Date(Math.round(1e3*e)),Go[2]=e=>{let t=BigInt(0);for(let r=0,n=e.byteLength;r<n;r++)t=BigInt(e[r])+(t<<BigInt(8));return t},Go[3]=e=>BigInt(-1)-Go[2](e),Go[4]=e=>+(e[1]+"e"+e[0]),Go[5]=e=>e[1]*Math.exp(e[0]*Math.log(2));let ci=(e,t)=>{let r=n[e-=57344];r&&r.isShared&&((n.restoreStructures||(n.restoreStructures=[]))[e]=r),n[e]=t,t.read=Zo(t)};Go[105]=e=>{let t=e.length,r=e[1];ci(e[0],r);let n={};for(let o=2;o<t;o++)n[ei(r[o-2])]=e[o];return n},Go[14]=e=>i?i[0].slice(i.position0,i.position0+=e):new ai(e,14),Go[15]=e=>i?i[1].slice(i.position1,i.position1+=e):new ai(e,15);let ui={Error,RegExp};Go[27]=e=>(ui[e[0]]||Error)(e[1],e[2]);let li=e=>{if(132!=t[_o++]){let e=Error("Packed values structure must be followed by a 4 element array");throw t.length<_o&&(e.incomplete=!0),e}let r=e();if(!r||!r.length){let e=Error("Packed values structure must be followed by a 4 element array");throw e.incomplete=!0,e}return(a=a?r.concat(a.slice(r.length)):r).prefixes=e(),a.suffixes=e(),e()};function di(e,t){return"string"==typeof e?e+t:e instanceof Array?e.concat(t):Object.assign({},e,t)}function fi(){if(!a){if(!Wo.getShared)throw Error("No packed values available");gi()}return a}li.handlesRead=!0,Go[51]=li,Go[6]=e=>{if(!a){if(!Wo.getShared)return new ai(e,6);gi()}if("number"==typeof e)return a[16+(e>=0?2*e:-2*e-1)];let t=Error("No support for non-integer packed references yet");throw void 0===e&&(t.incomplete=!0),t},Go[28]=e=>{let r;s||((s=new Map).id=0);let n=s.id++,o=_o,i={target:r=t[_o]>>5==4?[]:{}};s.set(n,i);let a=e();return i.used?(Object.getPrototypeOf(r)!==Object.getPrototypeOf(a)&&(_o=o,r=a,s.set(n,{target:r}),a=e()),Object.assign(r,a)):(i.target=a,a)},Go[28].handlesRead=!0,Go[29]=e=>{let t=s.get(e);return t.used=!0,t.target},Go[258]=e=>new Set(e),(Go[259]=e=>(Wo.mapsAsObjects&&(Wo.mapsAsObjects=!1,u=!0),e())).handlesRead=!0,qo.push((e,t)=>e>=225&&e<=255?di(fi().prefixes[e-224],t):e>=28704&&e<=32767?di(fi().prefixes[e-28672],t):e>=1879052288&&e<=2147483647?di(fi().prefixes[e-1879048192],t):e>=216&&e<=223?di(t,fi().suffixes[e-216]):e>=27647&&e<=28671?di(t,fi().suffixes[e-27639]):e>=1811940352&&e<=1879048191?di(t,fi().suffixes[e-1811939328]):1399353956==e?{packedValues:a,structures:n.slice(0),version:t}:55799==e?t:void 0);let hi=1==new Uint8Array(new Uint16Array([1]).buffer)[0],pi=[Uint8Array,Uint8ClampedArray,Uint16Array,Uint32Array,"undefined"==typeof BigUint64Array?{name:"BigUint64Array"}:BigUint64Array,Int8Array,Int16Array,Int32Array,"undefined"==typeof BigInt64Array?{name:"BigInt64Array"}:BigInt64Array,Float32Array,Float64Array],vi=[64,68,69,70,71,72,77,78,79,85,86];for(let e=0;e<pi.length;e++)!function(e,t){let r,n="get"+e.name.slice(0,-5);"function"==typeof e?r=e.BYTES_PER_ELEMENT:e=null;for(let o=0;o<2;o++){if(!o&&1==r)continue;let i=2==r?1:4==r?2:3*(8==r);Go[o?t:t-4]=1==r||o==hi?n=>{if(!e)throw Error("Could not find typed array for code "+t);return Wo.copyBuffers||1!==r&&(2!==r||1&n.byteOffset)&&(4!==r||3&n.byteOffset)&&(8!==r||7&n.byteOffset)?new e(Uint8Array.prototype.slice.call(n,0).buffer):new e(n.buffer,n.byteOffset,n.byteLength>>i)}:r=>{if(!e)throw Error("Could not find typed array for code "+t);let s=new DataView(r.buffer,r.byteOffset,r.byteLength),a=r.length>>i,c=new e(a),u=s[n];for(let e=0;e<a;e++)c[e]=u.call(s,e<<i,o);return c}}}(pi[e],vi[e]);function yi(){let e=31&t[_o++];if(e>23)switch(e){case 24:e=t[_o++];break;case 25:e=c.getUint16(_o),_o+=2;break;case 26:e=c.getUint32(_o),_o+=4}return e}function gi(){if(Wo.getShared){let e=mi(()=>(t=null,Wo.getShared()))||{},r=e.structures||[];Wo.sharedVersion=e.version,a=Wo.sharedValues=e.packedValues,!0===n?Wo.structures=n=r:n.splice.apply(n,[0,r.length].concat(r))}}function mi(e){let a=r,u=_o,l=Uo,d=zo,f=Vo,h=o,p=Fo,v=s,y=i,g=new Uint8Array(t.slice(0,r)),m=n,b=Wo,w=$o,S=e();return r=a,_o=u,Uo=l,zo=d,Vo=f,o=h,Fo=p,s=v,i=y,t=g,$o=w,n=m,Wo=b,c=new DataView(t.buffer,t.byteOffset,t.byteLength),S}function bi(){t=null,s=null,n=null}let wi=Array(147);for(let e=0;e<256;e++)wi[e]=+("1e"+Math.floor(45.15-.30103*e));let Si=new Jo({useRecords:!1});function Oi(e){var t,r;function n(t,r){try{var i=e[t](r),s=i.value,a=s instanceof Ti;Promise.resolve(a?s.v:s).then(function(r){if(a){var c="return"===t?"return":"next";if(!s.k||r.done)return n(c,r);r=e[c](r).value}o(i.done?"return":"normal",r)},function(e){n("throw",e)})}catch(e){o("throw",e)}}function o(e,o){switch(e){case"return":t.resolve({value:o,done:!0});break;case"throw":t.reject(o);break;default:t.resolve({value:o,done:!1})}(t=t.next)?n(t.key,t.arg):r=null}this._invoke=function(e,o){return new Promise(function(i,s){var a={key:e,arg:o,resolve:i,reject:s,next:null};r?r=r.next=a:(t=r=a,n(e,o))})},"function"!=typeof e.return&&(this.return=void 0)}function Ei(e){var t,r,n,o=2;for("undefined"!=typeof Symbol&&(r=Symbol.asyncIterator,n=Symbol.iterator);o--;){if(r&&null!=(t=e[r]))return t.call(e);if(n&&null!=(t=e[n]))return new Pi(t.call(e));r="@@asyncIterator",n="@@iterator"}throw TypeError("Object is not async iterable")}function Pi(e){function t(e){if(Object(e)!==e)return Promise.reject(TypeError(e+" is not an object."));var t=e.done;return Promise.resolve(e.value).then(function(e){return{value:e,done:t}})}return(Pi=function(e){this.s=e,this.n=e.next}).prototype={s:null,n:null,next:function(){return t(this.n.apply(this.s,arguments))},return:function(e){var r=this.s.return;return void 0===r?Promise.resolve({value:e,done:!0}):t(r.apply(this.s,arguments))},throw:function(e){var r=this.s.return;return void 0===r?Promise.reject(e):t(r.apply(this.s,arguments))}},new Pi(e)}function xi(e){return new Ti(e,0)}function Ti(e,t){this.v=e,this.k=t}Si.decode,Si.decodeMultiple,Oi.prototype["function"==typeof Symbol&&Symbol.asyncIterator||"@@asyncIterator"]=function(){return this},Oi.prototype.next=function(e){return this._invoke("next",e)},Oi.prototype.throw=function(e){return this._invoke("throw",e)},Oi.prototype.return=function(e){return this._invoke("return",e)};try{l=new TextEncoder}catch(e){}let ki="object"==typeof globalThis&&globalThis.Buffer,Ii=void 0!==ki,Ci=Ii?ki.allocUnsafeSlow:Uint8Array,Ri=Ii?ki:Uint8Array,Ai=Ii?4294967296:2144337920,ji=0,Mi=null,Ni=/[\u0080-\uFFFF]/,Li=Symbol("record-id");function _i(e,t){e<24?p[ji++]=t|e:e<256?(p[ji++]=24|t,p[ji++]=e):e<65536?(p[ji++]=25|t,p[ji++]=e>>8,p[ji++]=255&e):(p[ji++]=26|t,v.setUint32(ji,e),ji+=4)}class Di{constructor(e,t,r){this.structures=e,this.packedValues=t,this.version=r}}function Bi(e){e<24?p[ji++]=128|e:e<256?(p[ji++]=152,p[ji++]=e):e<65536?(p[ji++]=153,p[ji++]=e>>8,p[ji++]=255&e):(p[ji++]=154,v.setUint32(ji,e),ji+=4)}let Fi="undefined"==typeof Blob?function(){}:Blob;function Ui(e){if(e instanceof Fi)return!0;let t=e[Symbol.toStringTag];return"Blob"===t||"File"===t}let Wi=1==new Uint8Array(new Uint16Array([1]).buffer)[0];function zi(e,t){return!Wi&&t>1&&(e-=4),{tag:e,encode:function(e,t){let r=e.byteLength,n=e.byteOffset||0,o=e.buffer||e;t(Ii?ki.from(o,n,r):new Uint8Array(o,n,r))}}}function Vi(e,t){let r=e.byteLength;r<24?p[ji++]=64+r:r<256?(p[ji++]=88,p[ji++]=r):r<65536?(p[ji++]=89,p[ji++]=r>>8,p[ji++]=255&r):(p[ji++]=90,v.setUint32(ji,r),ji+=4),ji+r>=p.length&&t(ji+r),p.set(e.buffer?e:new Uint8Array(e),ji),ji+=r}function Gi(e,t){v.setUint32(Mi.position+e,ji-Mi.position-e+1);let r=Mi;Mi=null,t(r[0]),t(r[1])}f=[Date,Set,Error,RegExp,ai,ArrayBuffer,Uint8Array,Uint8ClampedArray,Uint16Array,Uint32Array,"undefined"==typeof BigUint64Array?function(){}:BigUint64Array,Int8Array,Int16Array,Int32Array,"undefined"==typeof BigInt64Array?function(){}:BigInt64Array,Float32Array,Float64Array,Di],d=[{tag:1,encode(e,t){let r=e.getTime()/1e3;(this.useTimestamp32||0===e.getMilliseconds())&&r>=0&&r<4294967296?(p[ji++]=26,v.setUint32(ji,r),ji+=4):(p[ji++]=251,v.setFloat64(ji,r),ji+=8)}},{tag:258,encode(e,t){t(Array.from(e))}},{tag:27,encode(e,t){t([e.name,e.message])}},{tag:27,encode(e,t){t(["RegExp",e.source,e.flags])}},{getTag:e=>e.tag,encode(e,t){t(e.value)}},{encode(e,t,r){Vi(e,r)}},{getTag(e){if(e.constructor===Uint8Array&&(this.tagUint8Array||Ii&&!1!==this.tagUint8Array))return 64},encode(e,t,r){Vi(e,r)}},zi(68,1),zi(69,2),zi(70,4),zi(71,8),zi(72,1),zi(77,2),zi(78,4),zi(79,8),zi(85,4),zi(86,8),{encode(e,t){let r=e.packedValues||[],n=e.structures||[];if(r.values.length>0){p[ji++]=216,p[ji++]=51,Bi(4);let e=r.values;t(e),Bi(0),Bi(0),packedObjectMap=Object.create(sharedPackedObjectMap||null);for(let t=0,r=e.length;t<r;t++)packedObjectMap[e[t]]=t}if(n){v.setUint32(ji,3655335424),ji+=3;let r=n.slice(0);r.unshift(57344),r.push(new ai(e.version,1399353956)),t(r)}else t(new ai(e.version,1399353956))}}];let qi=new class extends Jo{useBuffer(e){v=new DataView((p=e).buffer,p.byteOffset,p.byteLength),ji=0}clearSharedData(){this.structures&&(this.structures=[]),this.sharedValues&&(this.sharedValues=void 0)}updateSharedData(){let e=this.sharedVersion||0;this.sharedVersion=e+1;let t=this.structures.slice(0),r=new Di(t,this.sharedValues,this.sharedVersion),n=this.saveShared(r,t=>(t&&t.version||0)==e);return!1===n?(r=this.getShared()||{},this.structures=r.structures||[],this.sharedValues=r.packedValues,this.sharedVersion=r.version,this.structures.nextId=this.structures.length):t.forEach((e,t)=>this.structures[t]=e),n}constructor(e){var t;let r,n,o,i,s,a;super(e),(t=this).offset=0,e=e||{};let c=Ri.prototype.utf8Write?function(e,t,r){return p.utf8Write(e,t,r)}:!!l&&!!l.encodeInto&&function(e,t){return l.encodeInto(e,p.subarray(t)).written},u=e.structures||e.saveStructures,g=e.maxSharedStructures;if(null==g&&(g=128*!!u),g>8190)throw Error("Maximum maxSharedStructure is 8190");let m=e.sequential;m&&(g=0),t.structures||(t.structures=[]),t.saveStructures&&(t.saveShared=t.saveStructures);let b,w,S=e.sharedValues;if(S){a=Object.create(null);for(let e=0,t=S.length;e<t;e++)a[S[e]]=e}let O=[],E=0,P=0;t.mapEncode=function(e,t){return this._keyMap&&!this._mapped&&"Array"===e.constructor.name&&(e=e.map(e=>this.encodeKeys(e))),this.encode(e,t)},t.encode=function(c,u){if(p||(v=new DataView((p=new Ci(8192)).buffer,0,8192),ji=0),(y=p.length-10)-ji<2048?(v=new DataView((p=new Ci(p.length)).buffer,0,p.length),y=p.length-10,ji=0):u===Yi&&(ji=ji+7&2147483640),r=ji,t.useSelfDescribedHeader&&(v.setUint32(ji,3654940416),ji+=3),s=t.structuredClone?new Map:null,t.bundleStrings&&"string"!=typeof c?(Mi=[]).size=1/0:Mi=null,n=t.structures){if(n.uninitialized){let e=t.getShared()||{};t.structures=n=e.structures||[],t.sharedVersion=e.version;let r=t.sharedValues=e.packedValues;if(r){a={};for(let e=0,t=r.length;e<t;e++)a[r[e]]=e}}let e=n.length;if(e>g&&!m&&(e=g),!n.transitions){n.transitions=Object.create(null);for(let t=0;t<e;t++){let e=n[t];if(!e)continue;let r,o=n.transitions;for(let n=0,i=e.length;n<i;n++){void 0===o[Li]&&(o[Li]=t);let i=e[n];(r=o[i])||(r=o[i]=Object.create(null)),o=r}o[Li]=1048576|t}}m||(n.nextId=e)}if(o&&(o=!1),i=n||[],w=a,e.pack){let r=new Map;if(r.values=[],r.encoder=t,r.maxValues=e.maxPrivatePackedValues||(a?16:1/0),r.objectMap=a||!1,r.samplingPackedValues=b,function e(t,r){switch(typeof t){case"string":if(t.length>3){if(r.objectMap[t]>-1||r.values.length>=r.maxValues)return;let e=r.get(t);if(e)2==++e.count&&r.values.push(t);else if(r.set(t,{count:1}),r.samplingPackedValues){let e=r.samplingPackedValues.get(t);e?e.count++:r.samplingPackedValues.set(t,{count:1})}}break;case"object":if(t)if(t instanceof Array)for(let n=0,o=t.length;n<o;n++)e(t[n],r);else{let o=!r.encoder.useRecords;for(var n in t)t.hasOwnProperty(n)&&(o&&e(n,r),e(t[n],r))}break;case"function":console.log(t)}}(c,r),r.values.length>0){p[ji++]=216,p[ji++]=51,Bi(4);let e=r.values;x(e),Bi(0),Bi(0),w=Object.create(a||null);for(let t=0,r=e.length;t<r;t++)w[e[t]]=t}}h=u&Zi;try{if(h)return;if(x(c),Mi&&Gi(r,x),t.offset=ji,s&&s.idsToInsert){(ji+=2*s.idsToInsert.length)>y&&k(ji),t.offset=ji;let e=function(e,t){let r,n=2*t.length,o=e.length-n;t.sort((e,t)=>e.offset>t.offset?1:-1);for(let r=0;r<t.length;r++){let n=t[r];for(let t of(n.id=r,n.references))e[t++]=r>>8,e[t]=255&r}for(;r=t.pop();){let t=r.offset;e.copyWithin(t+n,t,o);let i=t+(n-=2);e[i++]=216,e[i++]=28,o=t}return e}(p.subarray(r,ji),s.idsToInsert);return s=null,e}return u&Yi?(p.start=r,p.end=ji,p):p.subarray(r,ji)}finally{if(n)if(P<10&&P++,n.length>g&&(n.length=g),E>1e4)n.transitions=null,P=0,E=0,O.length>0&&(O=[]);else if(O.length>0&&!m){for(let e=0,t=O.length;e<t;e++)O[e][Li]=void 0;O=[]}if(o&&t.saveShared){t.structures.length>g&&(t.structures=t.structures.slice(0,g));let e=p.subarray(r,ji);return!1===t.updateSharedData()?t.encode(c):e}u&Xi&&(ji=r)}},t.findCommonStringsToPack=()=>(b=new Map,a||(a=Object.create(null)),e=>{let r=e&&e.threshold||4,n=t.pack?e.maxPrivatePackedValues||16:0;for(let[e,i]of(S||(S=t.sharedValues=[]),b))i.count>r&&(a[e]=n++,S.push(e),o=!0);for(;t.saveShared&&!1===t.updateSharedData(););b=null});let x=n=>{ji>y&&(p=k(ji));var o,i=typeof n;if("string"===i){let t;if(w){let t=w[n];if(t>=0)return void(t<16?p[ji++]=t+224:(p[ji++]=198,x(1&t?15-t>>1:t-16>>1)));if(b&&!e.pack){let e=b.get(n);e?e.count++:b.set(n,{count:1})}}let i=n.length;if(Mi&&i>=4&&i<1024){if((Mi.size+=i)>61440){let e,t=(Mi[0]?3*Mi[0].length+Mi[1].length:0)+10;ji+t>y&&(p=k(ji+t)),p[ji++]=217,p[ji++]=223,p[ji++]=249,p[ji++]=Mi.position?132:130,p[ji++]=26,e=ji-r,ji+=4,Mi.position&&Gi(r,x),(Mi=["",""]).size=0,Mi.position=e}let e=Ni.test(n);return Mi[+!e]+=n,p[ji++]=e?206:207,void x(i)}t=i<32?1:i<256?2:i<65536?3:5;let s=3*i;if(ji+s>y&&(p=k(ji+s)),i<64||!c){let e,r,s,a=ji+t;for(e=0;e<i;e++)(r=n.charCodeAt(e))<128?p[a++]=r:(r<2048?p[a++]=r>>6|192:(55296==(64512&r)&&56320==(64512&(s=n.charCodeAt(e+1)))?(r=65536+((1023&r)<<10)+(1023&s),e++,p[a++]=r>>18|240,p[a++]=r>>12&63|128):p[a++]=r>>12|224,p[a++]=r>>6&63|128),p[a++]=63&r|128);o=a-ji-t}else o=c(n,ji+t,s);o<24?p[ji++]=96|o:o<256?(t<2&&p.copyWithin(ji+2,ji+1,ji+1+o),p[ji++]=120,p[ji++]=o):o<65536?(t<3&&p.copyWithin(ji+3,ji+2,ji+2+o),p[ji++]=121,p[ji++]=o>>8,p[ji++]=255&o):(t<5&&p.copyWithin(ji+5,ji+3,ji+3+o),p[ji++]=122,v.setUint32(ji,o),ji+=4),ji+=o}else if("number"===i)if(t.alwaysUseFloat||n>>>0!==n)if(t.alwaysUseFloat||(0|n)!==n){let e;if((e=t.useFloat32)>0&&n<4294967296&&n>=-2147483648){let t;if(p[ji++]=250,v.setFloat32(ji,n),e<4||(0|(t=n*wi[(127&p[ji])<<1|p[ji+1]>>7]))===t)return void(ji+=4);ji--}p[ji++]=251,v.setFloat64(ji,n),ji+=8}else n>=-24?p[ji++]=31-n:n>=-256?(p[ji++]=56,p[ji++]=~n):n>=-65536?(p[ji++]=57,v.setUint16(ji,~n),ji+=2):(p[ji++]=58,v.setUint32(ji,~n),ji+=4);else n<24?p[ji++]=n:n<256?(p[ji++]=24,p[ji++]=n):n<65536?(p[ji++]=25,p[ji++]=n>>8,p[ji++]=255&n):(p[ji++]=26,v.setUint32(ji,n),ji+=4);else if("object"===i)if(n){if(s){let e=s.get(n);if(e){if(p[ji++]=216,p[ji++]=29,p[ji++]=25,!e.references){let t=s.idsToInsert||(s.idsToInsert=[]);e.references=[],t.push(e)}return e.references.push(ji-r),void(ji+=2)}s.set(n,{offset:ji-r})}let e=n.constructor;if(e===Object)T(n);else if(e===Array){(o=n.length)<24?p[ji++]=128|o:Bi(o);for(let e=0;e<o;e++)x(n[e])}else if(e===Map)if((t.mapsAsObjects?!1!==t.useTag259ForMaps:t.useTag259ForMaps)&&(p[ji++]=217,p[ji++]=1,p[ji++]=3),(o=n.size)<24?p[ji++]=160|o:o<256?(p[ji++]=184,p[ji++]=o):o<65536?(p[ji++]=185,p[ji++]=o>>8,p[ji++]=255&o):(p[ji++]=186,v.setUint32(ji,o),ji+=4),t.keyMap)for(let[e,r]of n)x(t.encodeKey(e)),x(r);else for(let[e,t]of n)x(e),x(t);else{for(let e=0,r=d.length;e<r;e++)if(n instanceof f[e]){let r=d[e],o=r.tag;return null==o&&(o=r.getTag&&r.getTag.call(t,n)),o<24?p[ji++]=192|o:o<256?(p[ji++]=216,p[ji++]=o):o<65536?(p[ji++]=217,p[ji++]=o>>8,p[ji++]=255&o):o>-1&&(p[ji++]=218,v.setUint32(ji,o),ji+=4),void r.encode.call(t,n,x,k)}if(n[Symbol.iterator]){if(h){let e=Error("Iterable should be serialized as iterator");throw e.iteratorNotHandled=!0,e}for(let e of(p[ji++]=159,n))x(e);return void(p[ji++]=255)}if(n[Symbol.asyncIterator]||Ui(n)){let e=Error("Iterable/blob should be serialized as iterator");throw e.iteratorNotHandled=!0,e}if(t.useToJSON&&n.toJSON){let e=n.toJSON();if(e!==n)return x(e)}T(n)}}else p[ji++]=246;else if("boolean"===i)p[ji++]=n?245:244;else if("bigint"===i){if(n<BigInt(1)<<BigInt(64)&&n>=0)p[ji++]=27,v.setBigUint64(ji,n);else if(n>-(BigInt(1)<<BigInt(64))&&n<0)p[ji++]=59,v.setBigUint64(ji,-n-BigInt(1));else{if(!t.largeBigIntToFloat){n>=BigInt(0)?p[ji++]=194:(p[ji++]=195,n=BigInt(-1)-n);let e=[];for(;n;)e.push(Number(n&BigInt(255))),n>>=BigInt(8);return void Vi(new Uint8Array(e.reverse()),k)}p[ji++]=251,v.setFloat64(ji,Number(n))}ji+=8}else{if("undefined"!==i)throw Error("Unknown type: "+i);p[ji++]=247}},T=!1===t.useRecords?t.variableMapSize?e=>{let r=Object.keys(e),n=Object.values(e),o=r.length;if(o<24?p[ji++]=160|o:o<256?(p[ji++]=184,p[ji++]=o):o<65536?(p[ji++]=185,p[ji++]=o>>8,p[ji++]=255&o):(p[ji++]=186,v.setUint32(ji,o),ji+=4),t.keyMap)for(let e=0;e<o;e++)x(t.encodeKey(r[e])),x(n[e]);else for(let e=0;e<o;e++)x(r[e]),x(n[e])}:e=>{p[ji++]=185;let n=ji-r;ji+=2;let o=0;if(t.keyMap)for(let r in e)("function"!=typeof e.hasOwnProperty||e.hasOwnProperty(r))&&(x(t.encodeKey(r)),x(e[r]),o++);else for(let t in e)("function"!=typeof e.hasOwnProperty||e.hasOwnProperty(t))&&(x(t),x(e[t]),o++);p[n+++r]=o>>8,p[n+r]=255&o}:(e,r)=>{let n,s,a,c=i.transitions||(i.transitions=Object.create(null)),u=0,l=0;if(t.keyMap){l=(s=Object.keys(e).map(e=>t.encodeKey(e))).length;for(let e=0;e<l;e++){let t=s[e];!(a=c[t])&&(a=c[t]=Object.create(null),u++),c=a}}else for(let t in e)("function"!=typeof e.hasOwnProperty||e.hasOwnProperty(t))&&(!(a=c[t])&&(1048576&c[Li]&&(n=65535&c[Li]),a=c[t]=Object.create(null),u++),c=a,l++);let d=c[Li];if(void 0!==d)d&=65535,p[ji++]=217,p[ji++]=d>>8|224,p[ji++]=255&d;else{if(s||(s=c.__keys__||(c.__keys__=Object.keys(e))),void 0===n?((d=i.nextId++)||(d=0,i.nextId=1),d>=256&&(i.nextId=(d=g)+1)):d=n,i[d]=s,!(d<g)){if(c[Li]=d,v.setUint32(ji,3655335680),ji+=3,u&&(E+=P*u),O.length>=256-g&&(O.shift()[Li]=void 0),O.push(c),Bi(l+2),x(57344+d),x(s),r)return;for(let t in e)("function"!=typeof e.hasOwnProperty||e.hasOwnProperty(t))&&x(e[t]);return}p[ji++]=217,p[ji++]=d>>8|224,p[ji++]=255&d,c=i.transitions;for(let e=0;e<l;e++)(void 0===c[Li]||1048576&c[Li])&&(c[Li]=d),c=c[s[e]];c[Li]=1048576|d,o=!0}if(l<24?p[ji++]=128|l:Bi(l),!r)for(let t in e)("function"!=typeof e.hasOwnProperty||e.hasOwnProperty(t))&&x(e[t])},k=e=>{let t;if(e>16777216){if(e-r>Ai)throw Error("Encoded buffer would be larger than maximum buffer size");t=Math.min(Ai,4096*Math.round(Math.max((e-r)*(e>67108864?1.25:2),4194304)/4096))}else t=1+(Math.max(e-r<<2,p.length-1)>>12)<<12;let n=new Ci(t);return v=new DataView(n.buffer,0,t),p.copy?p.copy(n,0,r,e):n.set(p.slice(r,e)),ji-=r,r=0,y=n.length-10,p=n},I=100,C=1e3;function*R(e,n,o){let i=e.constructor;if(i===Object){let r=!1!==t.useRecords;for(let t in r?T(e,!0):_i(Object.keys(e).length,160),e){let o=e[t];r||x(t),o&&"object"==typeof o?n[t]?yield*R(o,n[t]):yield*A(o,n,t):x(o)}}else if(i===Array){let t=e.length;Bi(t);for(let o=0;o<t;o++){let t=e[o];t&&("object"==typeof t||ji-r>I)?n.element?yield*R(t,n.element):yield*A(t,n,"element"):x(t)}}else if(e[Symbol.iterator]&&!e.buffer){for(let t of(p[ji++]=159,e))t&&("object"==typeof t||ji-r>I)?n.element?yield*R(t,n.element):yield*A(t,n,"element"):x(t);p[ji++]=255}else Ui(e)?(_i(e.size,64),yield p.subarray(r,ji),yield e,j()):e[Symbol.asyncIterator]?(p[ji++]=159,yield p.subarray(r,ji),yield e,j(),p[ji++]=255):x(e);o&&ji>r?yield p.subarray(r,ji):ji-r>I&&(yield p.subarray(r,ji),j())}function*A(e,t,n){let o=ji-r;try{x(e),ji-r>I&&(yield p.subarray(r,ji),j())}catch(i){if(!i.iteratorNotHandled)throw i;t[n]={},ji=r+o,yield*R.call(this,e,t[n])}}function j(){I=C,t.encode(null,Zi)}function M(e,r,n){return I=r&&r.chunkThreshold?C=r.chunkThreshold:100,e&&"object"==typeof e?(t.encode(null,Zi),n(e,t.iterateProperties||(t.iterateProperties={}),!0)):[t.encode(e)]}t.encodeAsIterable=function(e,t){return M(e,t,R)},t.encodeAsAsyncIterable=function(e,r){return M(e,r,function e(r,n){var o;return(o=function*(){for(let u of R(r,n,!0)){let r=u.constructor;if(r===Ri||r===Uint8Array)yield u;else if(Ui(u)){let e,t=u.stream().getReader();for(;!(e=yield xi(t.read())).done;)yield e.value}else if(u[Symbol.asyncIterator]){var o,i=!1,s=!1;try{for(var a,c=Ei(u);i=!(a=yield xi(c.next())).done;i=!1){let r=a.value;j(),r?yield*function(e){var t={},r=!1;function n(t,n){return r=!0,{done:!1,value:new Ti(n=new Promise(function(r){r(e[t](n))}),1)}}return t["undefined"!=typeof Symbol&&Symbol.iterator||"@@iterator"]=function(){return this},t.next=function(e){return r?(r=!1,e):n("next",e)},"function"==typeof e.throw&&(t.throw=function(e){if(r)throw r=!1,e;return n("throw",e)}),"function"==typeof e.return&&(t.return=function(e){return r?(r=!1,e):n("return",e)}),t}(Ei(e(r,n.async||(n.async={})))):yield t.encode(r)}}catch(e){s=!0,o=e}finally{try{i&&null!=c.return&&(yield xi(c.return()))}finally{if(s)throw o}}}else yield u}},function(){return new Oi(o.apply(this,arguments))})()})}}}({useRecords:!1}),Hi=qi.encode;qi.encodeAsIterable,qi.encodeAsAsyncIterable;let{NEVER:$i,ALWAYS:Ki,DECIMAL_ROUND:Ji,DECIMAL_FIT:Qi}={NEVER:0,ALWAYS:1,DECIMAL_ROUND:3,DECIMAL_FIT:4},Yi=512,Xi=1024,Zi=2048;function es(e){var t,r;function n(t,r){try{var i=e[t](r),s=i.value,a=s instanceof ts;Promise.resolve(a?s.v:s).then(function(r){if(a){var c="return"===t?"return":"next";if(!s.k||r.done)return n(c,r);r=e[c](r).value}o(i.done?"return":"normal",r)},function(e){n("throw",e)})}catch(e){o("throw",e)}}function o(e,o){switch(e){case"return":t.resolve({value:o,done:!0});break;case"throw":t.reject(o);break;default:t.resolve({value:o,done:!1})}(t=t.next)?n(t.key,t.arg):r=null}this._invoke=function(e,o){return new Promise(function(i,s){var a={key:e,arg:o,resolve:i,reject:s,next:null};r?r=r.next=a:(t=r=a,n(e,o))})},"function"!=typeof e.return&&(this.return=void 0)}function ts(e,t){this.v=e,this.k=t}function rs(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}es.prototype["function"==typeof Symbol&&Symbol.asyncIterator||"@@asyncIterator"]=function(){return this},es.prototype.next=function(e){return this._invoke("next",e)},es.prototype.throw=function(e){return this._invoke("throw",e)},es.prototype.return=function(e){return this._invoke("return",e)};class ns{getWindowId(e){return this.idByWindow.get(e)||(this.lastUsedWindowId+=1,this.idByWindow.set(e,this.lastUsedWindowId),this.lastUsedWindowId)}constructor(){rs(this,"idByWindow",new WeakMap),rs(this,"lastUsedWindowId",0)}}function os(e,t,r,n,o,i,s){try{var a=e[i](s),c=a.value}catch(e){return void r(e)}a.done?t(c):Promise.resolve(c).then(n,o)}function is(e){return function(){var t=this,r=arguments;return new Promise(function(n,o){var i=e.apply(t,r);function s(e){os(i,n,o,s,a,"next",e)}function a(e){os(i,n,o,s,a,"throw",e)}s(void 0)})}}function ss(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function as(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){ss(e,t,r[t])})}return e}function cs(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t.push.apply(t,r)}return t}(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}),e}let us=S("post-message-main-service");class ls extends ve{constructor(e){var t;super(e),ss(t=this,"sendStartRecordingEvent",(e,r)=>is(function*(){let n=e.contentWindow;if(!n)return;us.debug("Handling iframe load.",e.src,e),t.sendDiscoveryEventIfNeeded(e),us.debug("Waiting for discovered event.",e.src,e);let o=yield t.waitForDiscoveredEvent(n);o&&(us.debug(`Received ${o.name} event.`),t.sendEventToSource(as(cs(as({},t.createPostMessageEvent()),{name:ue.START_RECORDING,browserInstanceId:F.id,visibilityState:document.visibilityState}),r),n))})()),ss(t,"sendStopRecordingEvent",()=>{t.broadcastEventToAllDiscoveredIframes(cs(as({},t.createPostMessageEvent()),{name:ue.STOP_RECORDING})),t.clearDiscoveredIframeWindows()}),ss(t,"sendDiscoveryEventIfNeeded",e=>{e.contentWindow&&(t.isTherePendingEvent(ue.DISCOVERED,e.contentWindow)||(us.debug("Iframe is not yet discovered. Sending discovery event.",e.src,e),t.sendEventToSource(cs(as({},t.createPostMessageEvent()),{name:ue.DISCOVERY}),e.contentWindow)))}),ss(t,"waitForDiscoveredEvent",e=>is(function*(){try{return yield t.waitForEventFromSourceOrThrowAfterGivenTime(ue.DISCOVERED,e)}catch(t){return t instanceof Q?(us.debug("Could not receive discovered event from iframe.",e),null):(us.warn("Error happened during receiving post message from parent. Continuing normal recording.",t,window.location.href,W(document)),null)}})())}}let ds=e=>"content"in e&&e.content instanceof Uint8Array&&"string"==typeof e.mimetype,fs=e=>"content"in e&&"string"==typeof e.content&&e.content.startsWith("data:")&&"string"==typeof e.mimetype;function hs(e,t,r,n,o,i,s){try{var a=e[i](s),c=a.value}catch(e){return void r(e)}a.done?t(c):Promise.resolve(c).then(n,o)}function ps(e){return function(){var t=this,r=arguments;return new Promise(function(n,o){var i=e.apply(t,r);function s(e){hs(i,n,o,s,a,"next",e)}function a(e){hs(i,n,o,s,a,"throw",e)}s(void 0)})}}let vs=(e,t)=>ps(function*(){return ps(function*(){let r,n,o="Compression",i=CompressionStream;try{let n=new i(t);r=e.pipeThrough(n)}catch(e){throw new G(`${o} failed`,{originalError:e instanceof Error?e:void 0,shouldReport:!0})}if(void 0===r)throw new G(`${o} failed`,{originalError:void 0,shouldReport:!0});let s=3;for(;s>0;)try{let e=new Response(r);n=yield e.blob();break}catch(e){}finally{s-=1}if(void 0===n)throw new G(`${o} failed`,{shouldReport:!0});return n})()})();function ys(e,t,r,n,o,i,s){try{var a=e[i](s),c=a.value}catch(e){return void r(e)}a.done?t(c):Promise.resolve(c).then(n,o)}function gs(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ms(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){gs(e,t,r[t])})}return e}function bs(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t.push.apply(t,r)}return t}(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}),e}class ws{constructor(e,t,r){gs(this,"metadata",void 0),gs(this,"events",void 0),gs(this,"assets",void 0),gs(this,"stats",void 0),gs(this,"toBinary",void 0),gs(this,"toJSON",void 0),gs(this,"toPlain",void 0),this.metadata=e,this.events=t,this.assets=r,this.stats=()=>{let e={css:0,fonts:0,images:0,other:0},t=0;return this.assets.forEach(r=>{if(!r.content)return;let n=ds(r)?r.content.byteLength:r.content.length;var o,i;(t+=n,ds(r)||fs(r))?"text/css"===r.mimetype||kn(r.uri)?e.css+=n:(null==(o=r.mimetype)?void 0:o.startsWith("font/"))||Cn(r.uri)?e.fonts+=n:(null==(i=r.mimetype)?void 0:i.startsWith("image/"))||In(r.uri)?e.images+=n:e.other+=n:e.other+=n}),{assets:{binary:{css:e.css,fonts:e.fonts,images:e.images,other:e.other,total:t},plain:{css:Math.ceil(1.33*e.css),fonts:Math.ceil(1.33*e.fonts),images:Math.ceil(1.33*e.images),other:Math.ceil(1.33*e.other),total:Math.ceil(1.33*t)}}}},this.toBinary=e=>{var t;return(t=function*(){var t;let r=ws.getModifiersWithDefaults(e),n=null==(t=null==e?void 0:e.tryCompress)||t,{assets:o,events:i,omitted:s}=ws.applyModifiers(this.assets,this.events,r),a={data:new Blob([Hi({assets:o,events:i})]),metadata:bs(ms({},this.metadata),{format:"binary",omitted:s.length>0?s:void 0})};return n&&"hidden"!==document.visibilityState?(yield ps(function*(){if(void 0!==g)return g;if(window.Response&&"dpr"in window.Response||void 0===window.CompressionStream)return!1;try{let e=new ReadableStream({start(e){let t=new TextEncoder;e.enqueue(t.encode("test")),e.close()}});yield vs(e,"deflate")}catch(e){return g=!1,!1}return g=!0,!0})())?{data:yield vs(a.data.stream(),"deflate"),metadata:bs(ms({},a.metadata),{format:"binary-deflate",omitted:s.length>0?s:void 0})}:(w.warn("Compression is not supported, segment data not changed."),a):a},function(){var e=this,r=arguments;return new Promise(function(n,o){var i=t.apply(e,r);function s(e){ys(i,n,o,s,a,"next",e)}function a(e){ys(i,n,o,s,a,"throw",e)}s(void 0)})}).call(this)},this.toJSON=()=>this.toPlain(),this.toPlain=e=>{let t=ws.getModifiersWithDefaults(e),{assets:r,events:n,omitted:o}=ws.applyModifiers(this.assets,this.events,t);return{data:{assets:r.map(e=>{if(!("content"in e))return e;if(ds(e)){let{content:t,contentBase64:r}=e;return bs(ms({},function(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}(e,["content","contentBase64"])),{content:r})}return e}),events:n},metadata:bs(ms({},this.metadata),{format:"plain",omitted:o.length>0?o:void 0})}}}}function Ss(e,t,r,n,o,i,s){try{var a=e[i](s),c=a.value}catch(e){return void r(e)}a.done?t(c):Promise.resolve(c).then(n,o)}function Os(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}gs(ws,"fromPlain",e=>{if(!e||!e.data||!e.metadata)throw w.error("Invalid segment data provided to Segment.fromPlain",{segment:e}),Error("Invalid segment data provided to Segment.fromPlain");let{data:t,metadata:r}=e,{assets:n,events:o}=t;return new ws(r,null!=o?o:[],null!=n?n:[])}),gs(ws,"applyModifiers",(e,t,r)=>{let n=[...e],o=[];return r.omit.css&&(o.push("css"),n=n.filter(e=>!ds(e||fs(e))||"text/css"!==e.mimetype)),r.omit.fonts&&(o.push("fonts"),n=n.filter(e=>{var t;return!ds(e)&&!fs(e)||!(null==(t=e.mimetype)?void 0:t.startsWith("font/"))})),r.omit.images&&(o.push("images"),n=n.filter(e=>{var t;return!ds(e)&&!fs(e)||!(null==(t=e.mimetype)?void 0:t.startsWith("image/"))})),{assets:n,events:t,omitted:o}}),gs(ws,"getModifiersWithDefaults",e=>{var t,r,n,o,i,s;return{omit:{css:null!=(o=null==e||null==(t=e.omit)?void 0:t.css)&&o,fonts:null!=(i=null==e||null==(r=e.omit)?void 0:r.fonts)&&i,images:null!=(s=null==e||null==(n=e.omit)?void 0:n.images)&&s}}});let Es=S("session-replay"),Ps="web_recorder_browser_last_segment_time";class xs extends Ao{set currentQueueSize(e){this._currentQueueSize=e,this.currentQueueSize>=4e4&&(Es.debug("Queue large, flushing",this.currentQueueSize),this.flushSegment())}get currentQueueSize(){return this._currentQueueSize}buildAndEmitSegment(e,t,r){let n=new ws(e,t,r);try{this.onSegment(n)}catch(e){Es.error("Could not emit segment",e)}}constructor(e){var t;super(e),Os(t=this,"backgroundService",void 0),Os(t,"_currentQueueSize",0),Os(t,"assetsQueue",[]),Os(t,"browserInstanceServiceInitializeReturnValuePromise",void 0),Os(t,"eventsQueue",[]),Os(t,"flushTimeout",void 0),Os(t,"lastStartUnixMs",0),Os(t,"onSegment",void 0),Os(t,"postMessageService",void 0),Os(t,"flushSegment",()=>{if(0===t.eventsQueue.length&&0===t.assetsQueue.length)return void t.scheduleFlushSegment();let e=t.eventsQueue,r=t.assetsQueue;t.eventsQueue=[],t.assetsQueue=[],t.currentQueueSize=0;let n=Sn(),o={"browser.instance.id":F.id,endUnixMs:n,lastKnownSegmentEndUnixMs:t.getLastSegmentEndTime(),sdkVersion:"0.0.1",source:"web",startUnixMs:t.lastStartUnixMs};t.lastStartUnixMs=n,t.buildAndEmitSegment(o,e,r),t.saveLastSegmentEndTime(t.lastStartUnixMs),t.scheduleFlushSegment()}),Os(t,"start",()=>{var e;return(e=function*(){t.isStarted?Es.warn("Cant start already started module. Stop it first."):(yield t.browserInstanceServiceInitializeReturnValuePromise,t.isStarted=!0,t.currentQueueSize=0,Es.debug("Session replay started"),t.lastStartUnixMs=Sn(),t.initRecordTasks(),t.startRecording(),t.flushTimeout=window.setTimeout(t.flushSegment,t.maxExportIntervalMs),document.addEventListener("visibilitychange",t.visibilityChangeListener,{capture:!0}))},function(){var t=this,r=arguments;return new Promise(function(n,o){var i=e.apply(t,r);function s(e){Ss(i,n,o,s,a,"next",e)}function a(e){Ss(i,n,o,s,a,"throw",e)}s(void 0)})})()}),Os(t,"stop",()=>{t.isStarted?(t.isStarted=!1,Es.debug("Session replay stopped"),document.removeEventListener("visibilitychange",t.visibilityChangeListener,{capture:!0}),t.stopRecording(),t.stopRecordingIframes(),clearTimeout(t.flushTimeout),t.flushTimeout=void 0,t.flushSegment()):Es.warn("Cant stop already stopped module. Start it first.")}),Os(t,"attachPostMessageEventListeners",()=>{t.postMessageService.addPostMessageEventListener(ue.DATA,e=>{e.data.assets&&t.assetsQueue.push(...e.data.assets),e.data.events&&t.eventsQueue.push(...e.data.events)})}),Os(t,"emitAsset",e=>{t.assetsQueue.push(e),Es.debug("Uploading cache asset",e);let r=Hi(e);t.currentQueueSize+=r.length}),Os(t,"emitEvent",e=>{let r;if(t.eventsQueue.push(e),Es.debug(`Pushed ${e.name} event`,e),(r=e).name===ie.DOM_SNAPSHOT&&null===r.parentMetadata)return Es.debug("DOM snapshot event, flushing"),void t.flushSegment();let n=Hi(e);t.currentQueueSize+=n.length}),Os(t,"getLastSegmentEndTime",()=>{var e;let t=null!=(e=C(Ps))?e:T(Ps);if(t){let e=Number(t);if(!Number.isNaN(e))return e}return null}),Os(t,"saveLastSegmentEndTime",e=>{R(Ps,String(e)),k(Ps,String(e))}),Os(t,"scheduleFlushSegment",()=>{window.clearTimeout(t.flushTimeout),t.flushTimeout=window.setTimeout(t.flushSegment,t.maxExportIntervalMs)}),Os(t,"stopRecordingIframes",()=>{t.postMessageService.sendStopRecordingEvent()}),Os(t,"visibilityChangeListener",()=>{"hidden"===document.visibilityState&&t.flushSegment()}),t.onSegment=e.onSegment,t.postMessageService=new ls({channelId:"session-replay"}),t.backgroundService=new J(e),t.recordTaskContextCreator.setConfigContext({uploadAsset:t.emitAsset,uploadEvent:t.emitEvent}).setModuleScopedContext({backgroundService:t.backgroundService,postMessageMainService:t.postMessageService,windowIdManager:new ns}),t.browserInstanceServiceInitializeReturnValuePromise=F.initialize(),t.attachPostMessageEventListeners()}}Os(xs,"loadPlainSegment",ws.fromPlain),Os(xs,"clear",()=>{vn.clearCache();try{window.sessionStorage.removeItem(Ps)}catch(e){}I(Ps)})})();var ht=ft.H,pt=(r(4964),function(e){return e[e.DEBUG=0]="DEBUG",e[e.INFO=1]="INFO",e[e.WARN=2]="WARN",e[e.ERROR=3]="ERROR",e[e.CRITICAL=4]="CRITICAL",e}({}));class vt{pushToGroup(e,t){for(var r=arguments.length,n=new Array(r>2?r-2:0),o=2;o<r;o++)n[o-2]=arguments[o];let i=this.groupsByKey.get(t);i||(i=[],this.groupsByKey.set(t,i)),i.push([e,...n])}constructor(){var e=this;se(this,"groupLoggingIntervalId",null),se(this,"groupsByKey",new Map),se(this,"isGroupLoggingEnabled",!1),se(this,"loggingLevel",null),se(this,"loggingPrefix",""),se(this,"middlewares",[]),se(this,"critical",function(t){for(var r=arguments.length,n=new Array(r>1?r-1:0),o=1;o<r;o++)n[o-1]=arguments[o];e.processMiddlewares("console","critical",t,...n),null!==e.loggingLevel&&pt.CRITICAL>=e.loggingLevel&&console.error("".concat(e.loggingPrefix).concat(t),...n)}),se(this,"debug",function(t){for(var r=arguments.length,n=new Array(r>1?r-1:0),o=1;o<r;o++)n[o-1]=arguments[o];e.processMiddlewares("console","debug",t,...n),null!==e.loggingLevel&&pt.DEBUG>=e.loggingLevel&&console.debug("".concat(e.loggingPrefix).concat(t),...n)}),se(this,"debugGroup",function(t){for(var r=arguments.length,n=new Array(r>1?r-1:0),o=1;o<r;o++)n[o-1]=arguments[o];e.isGroupLoggingEnabled?null!==e.loggingLevel&&pt.DEBUG>=e.loggingLevel&&e.pushToGroup("debug",t,...n):e.debug(t,...n)}),se(this,"debugNoConsole",function(t){for(var r=arguments.length,n=new Array(r>1?r-1:0),o=1;o<r;o++)n[o-1]=arguments[o];e.processMiddlewares("internal","debug",t,...n)}),se(this,"enableGroupLogging",()=>{this.isGroupLoggingEnabled=!0,null!==this.groupLoggingIntervalId&&(this.groupLoggingIntervalId=window.setInterval(()=>{const e=this.groupsByKey;this.groupsByKey=new Map;for(const[t,r]of e.entries()){console.groupCollapsed(t);for(const[e,...t]of r)"critical"===e?console.error(...t):console[e](...t);console.groupEnd()}},1e3))}),se(this,"error",function(t){for(var r=arguments.length,n=new Array(r>1?r-1:0),o=1;o<r;o++)n[o-1]=arguments[o];e.processMiddlewares("console","error",t,...n),null!==e.loggingLevel&&pt.ERROR>=e.loggingLevel&&console.error("".concat(e.loggingPrefix).concat(t),...n)}),se(this,"errorGroup",function(t){for(var r=arguments.length,n=new Array(r>1?r-1:0),o=1;o<r;o++)n[o-1]=arguments[o];e.isGroupLoggingEnabled?null!==e.loggingLevel&&pt.ERROR>=e.loggingLevel&&e.pushToGroup("error",t,...n):e.error(t,...n)}),se(this,"errorNoConsole",function(t){for(var r=arguments.length,n=new Array(r>1?r-1:0),o=1;o<r;o++)n[o-1]=arguments[o];e.processMiddlewares("internal","error",t,...n)}),se(this,"info",function(t){for(var r=arguments.length,n=new Array(r>1?r-1:0),o=1;o<r;o++)n[o-1]=arguments[o];e.processMiddlewares("console","info",t,...n),null!==e.loggingLevel&&pt.INFO>=e.loggingLevel&&console.log("".concat(e.loggingPrefix).concat(t),...n)}),se(this,"infoGroup",function(t){for(var r=arguments.length,n=new Array(r>1?r-1:0),o=1;o<r;o++)n[o-1]=arguments[o];e.isGroupLoggingEnabled?null!==e.loggingLevel&&pt.INFO>=e.loggingLevel&&e.pushToGroup("info",t,...n):e.info(t,...n)}),se(this,"infoNoConsole",function(t){for(var r=arguments.length,n=new Array(r>1?r-1:0),o=1;o<r;o++)n[o-1]=arguments[o];e.processMiddlewares("internal","info",t,...n)}),se(this,"setLoggingLevel",e=>{this.loggingLevel=vt.convertLogLevelToNumber(e)}),se(this,"setLoggingPrefix",e=>{this.loggingPrefix=e}),se(this,"setMiddleware",e=>{this.middlewares.push(e)}),se(this,"warn",function(t){for(var r=arguments.length,n=new Array(r>1?r-1:0),o=1;o<r;o++)n[o-1]=arguments[o];e.processMiddlewares("console","warn",t,...n),null!==e.loggingLevel&&pt.WARN>=e.loggingLevel&&console.warn("".concat(e.loggingPrefix).concat(t),...n)}),se(this,"warnGroup",function(t){for(var r=arguments.length,n=new Array(r>1?r-1:0),o=1;o<r;o++)n[o-1]=arguments[o];e.isGroupLoggingEnabled?null!==e.loggingLevel&&pt.WARN>=e.loggingLevel&&e.pushToGroup("warn",t,...n):e.warn(t,...n)}),se(this,"warnNoConsole",function(t){for(var r=arguments.length,n=new Array(r>1?r-1:0),o=1;o<r;o++)n[o-1]=arguments[o];e.processMiddlewares("internal","warn",t,...n)}),se(this,"processMiddlewares",function(t,r,n){for(var o=arguments.length,i=new Array(o>3?o-3:0),s=3;s<o;s++)i[s-3]=arguments[s];e.middlewares.forEach(e=>e(t,r,n,...i))})}}se(vt,"convertLogLevelToNumber",e=>{switch(e){case"debug":return pt.DEBUG;case"info":return pt.INFO;case"warn":return pt.WARN;case"error":default:return pt.ERROR;case"critical":return pt.CRITICAL}});const yt=new vt;r(3585);let gt;const mt=async e=>{if(!ht)return yt.warn("SessionReplay module undefined, fallback to gzip."),bt(e);const t=await(async()=>{if(void 0!==gt)return gt;if(window.Response&&"dpr"in window.Response)return!1;if(void 0===window.CompressionStream)return!1;try{const e=new ReadableStream({start(e){const t=new TextEncoder;e.enqueue(t.encode("test")),e.close()}});await wt(e,"deflate")}catch{return gt=!1,!1}return gt=!0,!0})();if(!t)return yt.warn("Compression is not supported, fallback to gzip."),bt(e);const r=new Blob([e]);return wt(r.stream(),"gzip")},bt=async e=>new Promise((t,r)=>{!function(e,t,r){r||(r=t,t={}),"function"!=typeof r&&Ae(7),Ze(e,t,[Qe,Ye,function(){return[ot]}],function(e){return Xe(ot(e.data[0],e.data[1]))},2,r)}(e,(e,n)=>{e?r(e):t(n)})}),wt=async(e,t)=>{const r=new CompressionStream(t),n=e.pipeThrough(r);let o,i=3;for(;i>0;)try{const e=new Response(n);o=await e.blob();break}catch{}finally{i-=1}if(void 0===o)throw new Error("".concat("Compression"," failed"));return o};r(160),r(46),r(215),r(4686),r(4981),r(2426),r(9860),r(6466),r(5538),r(1702),r(7745),r(5292),r(6644);class St extends Error{get isConnectionError(){return this.status<0&&!this.isAbortedByRecorder&&!this.isAbortedByUserAgent}get isAbortedByRecorder(){return this.isSignalAborted}get isAbortedByUserAgent(){var e;return this.originalError instanceof Error&&"AbortError"===(null===(e=this.originalError)||void 0===e?void 0:e.name)&&!this.isSignalAborted}constructor(e,t,r,n,o,i,s,a,c){super(e),se(this,"status",void 0),se(this,"responseTimingData",void 0),se(this,"requestPayload",void 0),se(this,"originalError",void 0),se(this,"responseData",void 0),se(this,"additionalData",void 0),se(this,"isOffline",void 0),se(this,"isSignalAborted",void 0),se(this,"name",void 0),se(this,"responseDebugData",void 0),se(this,"visibilityState",void 0),se(this,"wasBeaconFallbackUsed",void 0),this.status=t,this.responseTimingData=r,this.requestPayload=o,this.originalError=s,this.responseData=a,this.additionalData=c,this.name="ApiError",Object.setPrototypeOf(this,St.prototype),this.responseDebugData=i?(e=>({type:e.type,bodyUsed:e.bodyUsed,headers:e.headers?Array.from(e.headers):void 0,ok:e.ok,redirected:e.redirected,url:e.url}))(i):void 0,this.isSignalAborted=null==n?void 0:n.aborted,this.visibilityState=document.visibilityState,this.isOffline=!1===navigator.onLine,this.wasBeaconFallbackUsed=!1}}r(9717);const Ot=async()=>{navigator.onLine||await new Promise(e=>{const t=()=>{window.removeEventListener("online",t),e()};window.addEventListener("online",t),navigator.onLine&&(e(),window.removeEventListener("online",t))})},Et={headers:{}},Pt={"Content-Type":"text/plain;charset=UTF-8"},xt=new Map,Tt=new Set([408,429,500,502,503,504]),kt=async(e,t)=>{let{abortPreviousRequest:r,baseUrl:n,body:o,discardExistingPath:i,doNotConvert:s=!1,doNotRetryOnDocumentHidden:a=!1,headers:c,logPayloadOnError:u=!1,retryCount:l=3,retryInterval:d=1e3,retryOnHttpErrorStatusCodes:f=!1,throwOnConvert:h=!1,waitForOnlineStatus:p=!1,...v}=t;const y=n?(e=>{let{baseUrl:t,discardExistingPath:r,pathName:n}=e;const o=new URL((e=>/^https?:\/\//.test(e)?e:"https://".concat(e))(t));if(!n)return o;if(r)return new URL(n,o.origin);{let e=o.pathname;return e.endsWith("/")&&n.startsWith("/")&&(e=e.slice(0,-1)),new URL("".concat(e).concat(n),o.origin)}})({baseUrl:n,discardExistingPath:i,pathName:e}):new URL(e,window.location.origin);let g=xt.get(y.href);g&&r&&(yt.debug("Aborting previous request",y),g.abort("Aborted previous request.")),g=new AbortController,xt.set(y.href,g);const m={...Et,body:o,...v,signal:g.signal};let b;m.headers=void 0===c?Pt:c;let w,S=null,O=performance.now(),E=0,P=-1;for(let e=1;e<=l;e++){p&&await Ot(),P=e;try{if(1===e)O=performance.now(),b=await fetch(y.href,m);else{const t=[],r=new Promise(t=>{setTimeout(()=>{t()},d*Math.pow(2,e-1))});if(t.push(r),a){const e=new Promise(e=>{const t=r=>{var n;(void 0===(n=r).isTrusted||n.isTrusted)&&("hidden"===document.visibilityState&&(document.removeEventListener("visibilitychange",t),e()))};document.addEventListener("visibilitychange",t),"hidden"===document.visibilityState&&(document.removeEventListener("visibilitychange",t),e())});t.push(e)}if(await Promise.race(t),a&&"hidden"===document.visibilityState)throw new Error("Document is hidden and flag `doNotRetryOnDocumentHidden` is set to true.");p&&await Ot(),O=performance.now(),b=await fetch(y.href,m)}w=void 0}catch(t){if(w=t,t instanceof Error&&"AbortError"===t.name)throw xt.delete(y.href),new St("Request was aborted.",-1,{fetchTotalMs:E,finalRetries:P},g.signal,u?JSON.stringify(o):"Payload not logged.",void 0,t);if(e<l&&(!a||"hidden"!==document.visibilityState))continue}finally{E=performance.now()-O}if(xt.delete(y.href),!b)throw new St("API request to ".concat(y.href," failed due to connection error."),-1,{fetchTotalMs:E,finalRetries:P},g.signal,u?JSON.stringify(o):"Payload not logged.",void 0,w);if(!(f&&Tt.has(b.status)&&e<l&&e<3)){if(b.status>399){try{S=await b.json()}catch(e){if(e instanceof Error&&("AbortError"===e.name||"TypeError"===e.name))throw new St("API request to ".concat(y.href," failed with status code ").concat(b.status,"."),b.status,{fetchTotalMs:E,finalRetries:P},g.signal,"Payload not logged.",b,e)}try{S||(S=await b.text())}catch(e){if(e instanceof Error&&("AbortError"===e.name||"TypeError"===e.name))throw new St("API request to ".concat(y.href," failed with status code ").concat(b.status,"."),b.status,{fetchTotalMs:E,finalRetries:P},g.signal,"Payload not logged.",b,e)}throw new St("API request to ".concat(y.href," failed with status code ").concat(b.status),b.status,{fetchTotalMs:E,finalRetries:P},g.signal,u?JSON.stringify(o):"Payload not logged.",b,void 0,{responseData:S})}if(204===b.status)break;if(s)break;try{S=await b.json();break}catch(t){if(t instanceof Error&&("AbortError"===t.name||"TypeError"===t.name)&&e<l)continue;if(h&&t instanceof Error){throw"AbortError"===t.name||"TypeError"===t.name?new St("API request to ".concat(y.href," failed due to connection error."),-1,{fetchTotalMs:E,finalRetries:P},g.signal,u?JSON.stringify(o):"Payload not logged.",void 0,w):new Error("Could not convert data to JSON in ".concat(y.href," request"))}if(h)throw new Error("Unknown error happened during API call. ".concat(JSON.stringify(t)));break}}}if(void 0===b)throw new Error("Response object is undefined.");return{data:S,response:b}},It="_splunk_session_recorder_queue_data",Ct=()=>{const e=(e=>{let t=null;try{t=window.localStorage.getItem(e)}catch{}return t})(It);if(!e)return null;try{const t=JSON.parse(e);return Nt(t)?t:(yt.warn("Invalid queued log data found in local storage",t),null)}catch{return yt.warn("Malformed queued log data found in local storage",e),null}},Rt=e=>{var t;const r=null!==(t=Ct())&&void 0!==t?t:[];return r.push(e),At(r)},At=e=>0===e.length?(jt(),!0):((e,t)=>{try{return window.localStorage.setItem(e,t),!0}catch{return!1}})(It,JSON.stringify(e)),jt=()=>{(e=>{try{window.localStorage.removeItem(e)}catch{}})(It)},Mt=e=>{if("object"!=typeof e||null===e)return!1;const t=Object.keys(e);return["data","requestId","timestamp","url","headers"].every(e=>t.includes(e))},Nt=e=>!!Array.isArray(e)&&e.every(Mt),Lt=(e,t)=>{const r=JSON.parse(JSON.stringify(e));let n=null;for(const e of r.data.resourceLogs){const r=e.scopeLogs||[];for(const e of r)for(const r of e.logRecords){yt.debug("Processing log record",t,r.body.stringValue);try{const e=ht.loadPlainSegment(JSON.parse(r.body.stringValue));r.body.stringValue=JSON.stringify(e.toPlain({omit:t})),n=e.stats()}catch{yt.error("Error happened during segment conversion")}}}return{log:r,stats:n}},_t={"Content-Type":"application/json","Content-Encoding":"gzip"};function Dt(e){return Array.isArray(e)}function Bt(e){return function(e){return!!e&&"object"==typeof e&&!Dt(e)}(e)?{kvlistValue:{values:Object.entries(e).map(e=>{let[t,r]=e;return{key:t,value:Bt(r)}})}}:Dt(e)?{arrayValue:{values:e.map(e=>Bt(e))}}:"string"==typeof e?{stringValue:e}:"number"==typeof e?{doubleValue:e}:"boolean"==typeof e?{boolValue:e}:{}}class Ft{constructLogData(e){var t;return{resourceLogs:[{resource:{attributes:null===(t=Bt(this.config.getResourceAttributes()||{}).kvlistValue)||void 0===t?void 0:t.values},scopeLogs:[{scope:{name:"splunk.rr-web",version:ct},logRecords:e.map(e=>{var t;return{body:Bt(e.body),timeUnixNano:e.timeUnixNano,attributes:null===(t=Bt(e.attributes||{}).kvlistValue)||void 0===t?void 0:t.values}})}]}]}}export(e){if(0===e.length)return;const t=this.config.headers?Object.assign({},_t,this.config.headers):_t,r=this.constructLogData(e);yt.debug("OTLPLogExporter: export",r);const n=this.config.beaconUrl,o=at(JSON.stringify(r)),i=((e=21)=>{let t="",r=crypto.getRandomValues(new Uint8Array(e|=0));for(;e--;)t+="useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict"[63&r[e]];return t})(),s=this.config.usePersistentExportQueue?{data:r,timestamp:Date.now(),url:n,sessionId:this.config.sessionId,headers:t,requestId:i}:null;if(s){yt.debug("Adding log to queue",{...s,data:"[truncated]"});if(!Rt(s)){const{log:e,stats:t}=Lt(s,{fonts:!1,images:!0,css:!1});if(!Rt(e)){const{log:r}=Lt(e,{fonts:!0,images:!0,css:!0});Rt(r)||yt.error("Failed to add log to queue after assets removed Total: ".concat(null==t?void 0:t.assets.plain.total,"}, CSS: ").concat(null==t?void 0:t.assets.plain.css,", Images: ").concat(null==t?void 0:t.assets.plain.images,", Fonts: ").concat(null==t?void 0:t.assets.plain.fonts,", Other: ").concat(null==t?void 0:t.assets.plain.other),{...s,data:"[truncated]"})}}}Ft.sendDataToBackend(s,o,n,t)}exportQueuedLogs(){let e=[];var t;e=null!==(t=Ct())&&void 0!==t?t:[],jt();for(const t of e){if(yt.debug("Found queued log",{...t,data:"[truncated]"}),t.sessionId!==this.config.sessionId){yt.debug("exportQueuedLogs - session mismatch",{...t,data:"[truncated]"},{sessionId:this.config.sessionId});continue}Rt(t);const e=at(JSON.stringify(t.data));Ft.sendDataToBackend(t,e,t.url,t.headers)}}static sendDataToBackend(e,t,r,n){const o=()=>{e&&(yt.debug("Removing queued log",{...e,data:"[truncated]"}),(e=>{var t;const r=(null!==(t=Ct())&&void 0!==t?t:[]).filter(t=>t.requestId!==e.requestId);At(r)})(e))};if("hidden"===document.visibilityState){const e=ot(t),i=e.byteLength<65536;Ut(r,{headers:n,body:e,keepalive:i},o)}else mt(t).then(e=>{Ut(r,{headers:n,body:e},o)}).catch(e=>{yt.error("Could not compress data",e)})}constructor(e){se(this,"config",void 0),this.config=e,this.exportQueuedLogs()}}const Ut=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return new Promise((e,r)=>{ne.with(ie(ne.active()),()=>{(async(e,t,r)=>{try{await kt(e,{method:"POST",abortPreviousRequest:!1,doNotConvert:!0,doNotRetryOnDocumentHidden:!0,retryCount:100,retryOnHttpErrorStatusCodes:!0,...t}),yt.debug("Data sent by fetch",{keepalive:t.keepalive}),r()}catch(e){yt.error("Could not sent data to BE - fetch",e)}})(...t).then(e).catch(r)})})};var Wt,zt=(Wt=function(e,t){return Wt=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},Wt(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}Wt(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),Vt=function(e){function t(r){var n=e.call(this,r)||this;return Object.setPrototypeOf(n,t.prototype),n}return zt(t,e),t}(Error);var Gt=I.instance();var qt=function(e){Gt.error(function(e){return"string"==typeof e?e:JSON.stringify(function(e){for(var t={},r=e;null!==r;)Object.getOwnPropertyNames(r).forEach(function(e){if(!t[e]){var n=r[e];n&&(t[e]=String(n))}}),r=Object.getPrototypeOf(r);return t}(e))}(e))};var Ht=function(){function e(){var e=this;this._promise=new Promise(function(t,r){e._resolve=t,e._reject=r})}return Object.defineProperty(e.prototype,"promise",{get:function(){return this._promise},enumerable:!1,configurable:!0}),e.prototype.resolve=function(e){this._resolve(e)},e.prototype.reject=function(e){this._reject(e)},e}(),$t=function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,o,i=r.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(n=i.next()).done;)s.push(n.value)}catch(e){o={error:e}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return s},Kt=function(e,t,r){if(r||2===arguments.length)for(var n,o=0,i=t.length;o<i;o++)!n&&o in t||(n||(n=Array.prototype.slice.call(t,0,o)),n[o]=t[o]);return e.concat(n||Array.prototype.slice.call(t))},Jt=function(){function e(e,t){this._callback=e,this._that=t,this._isCalled=!1,this._deferred=new Ht}return Object.defineProperty(e.prototype,"isCalled",{get:function(){return this._isCalled},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"promise",{get:function(){return this._deferred.promise},enumerable:!1,configurable:!0}),e.prototype.call=function(){for(var e,t=this,r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];if(!this._isCalled){this._isCalled=!0;try{Promise.resolve((e=this._callback).call.apply(e,Kt([this._that],$t(r),!1))).then(function(e){return t._deferred.resolve(e)},function(e){return t._deferred.reject(e)})}catch(e){this._deferred.reject(e)}}return this._deferred.promise},e}();class Qt{forceFlush(){return this.shutdownOnce.isCalled?this.shutdownOnce.promise:this.flushAll()}onEmit(e){this.shutdownOnce.isCalled||this.addToBuffer(e)}onShutdown(){this.visibilityChangeListener&&document.removeEventListener("visibilitychange",this.visibilityChangeListener),this.pageHideListener&&document.removeEventListener("pagehide",this.pageHideListener)}addToBuffer(e){this.finishedLogs.push(e),this.maybeStartTimer()}clearTimer(){void 0!==this.timer&&(clearTimeout(this.timer),this.timer=void 0)}exportLogs(e){return this.exporter.export(e),Promise.resolve()}flushAll(){return new Promise((e,t)=>{const r=[];r.push(this.flushOneBatch()),Promise.all(r).then(()=>{e()}).catch(t)})}flushOneBatch(){return this.clearTimer(),0===this.finishedLogs.length?Promise.resolve():new Promise((e,t)=>{var r,n,o,i;(r=this.exportLogs(this.finishedLogs.splice(0,this.finishedLogs.length)),n=this.exportTimeoutMillis,i=new Promise(function(e,t){o=setTimeout(function(){t(new Vt("Operation timed out."))},n)}),Promise.race([r,i]).then(function(e){return clearTimeout(o),e},function(e){throw clearTimeout(o),e})).then(e).catch(t)})}maybeStartTimer(){void 0===this.timer&&(this.timer=setTimeout(()=>{this.flushOneBatch().then(()=>{this.finishedLogs.length>0&&(this.clearTimer(),this.maybeStartTimer())}).catch(e=>{!function(e){try{qt(e)}catch(e){}}(e)})},this.scheduledDelayMillis),this.timer)}onInit(){this.visibilityChangeListener=()=>{"hidden"===document.visibilityState&&this.forceFlush()},this.pageHideListener=()=>{this.forceFlush()},document.addEventListener("visibilitychange",this.visibilityChangeListener),document.addEventListener("pagehide",this.pageHideListener)}async shutdown(){this.onShutdown(),await this.flushAll()}constructor(e,t){var r;se(this,"exporter",void 0),se(this,"exportTimeoutMillis",void 0),se(this,"finishedLogs",void 0),se(this,"pageHideListener",void 0),se(this,"scheduledDelayMillis",void 0),se(this,"shutdownOnce",void 0),se(this,"timer",void 0),se(this,"visibilityChangeListener",void 0),this.exporter=e,this.exportTimeoutMillis=3e4,this.finishedLogs=[],this.scheduledDelayMillis=null!==(r=null==t?void 0:t.scheduledDelayMillis)&&void 0!==r?r:5e3,this.shutdownOnce=new Jt(this.shutdown,this),this.onInit()}}function Yt(e,t,r){return{body:e,timeUnixNano:t,attributes:r}}const Xt=Symbol.for("opentelemetry.js.api.1"),Zt="splunk.rum",er="".concat(Zt,".version");var tr,rr=function(){return rr=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},rr.apply(this,arguments)};function nr(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function or(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,o,i=r.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(n=i.next()).done;)s.push(n.value)}catch(e){o={error:e}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return s}function ir(e,t,r){if(r||2===arguments.length)for(var n,o=0,i=t.length;o<i;o++)!n&&o in t||(n||(n=Array.prototype.slice.call(t,0,o)),n[o]=t[o]);return e.concat(n||Array.prototype.slice.call(t))}function sr(e){return e.nodeType===e.ELEMENT_NODE}function ar(e){var t,r=null===(t=e)||void 0===t?void 0:t.host;return Boolean(r&&r.shadowRoot&&r.shadowRoot===e)}function cr(e){var t=e.maskInputOptions,r=e.tagName,n=e.type,o=e.value,i=e.maskInputFn,s=o||"";return(t[r.toLowerCase()]||t[n])&&(s=i?i(s):"*".repeat(s.length)),s}!function(e){e[e.Document=0]="Document",e[e.DocumentType=1]="DocumentType",e[e.Element=2]="Element",e[e.Text=3]="Text",e[e.CDATA=4]="CDATA",e[e.Comment=5]="Comment"}(tr||(tr={}));var ur="__rrweb_original__";var lr,dr,fr=1,hr=new RegExp("[^a-z0-9-_:]");function pr(e){try{var t=e.rules||e.cssRules;return t?Array.from(t).map(vr).join(""):null}catch(e){return null}}function vr(e){var t=e.cssText;if(function(e){return"styleSheet"in e}(e))try{t=pr(e.styleSheet)||t}catch(e){}return t}var yr=/url\((?:(')([^']*)'|(")(.*?)"|([^)]*))\)/gm,gr=/^(?!www\.|(?:http|ftp)s?:\/\/|[A-Za-z]:\\|\/\/|#).*/,mr=/^(data:)([^,]*),(.*)/i;function br(e,t){return(e||"").replace(yr,function(e,r,n,o,i,s){var a,c=n||i||s,u=r||o||"";if(!c)return e;if(!gr.test(c))return"url("+u+c+u+")";if(mr.test(c))return"url("+u+c+u+")";if("/"===c[0])return"url("+u+(((a=t).indexOf("//")>-1?a.split("/").slice(0,3).join("/"):a.split("/")[0]).split("?")[0]+c)+u+")";var l=t.split("/"),d=c.split("/");l.pop();for(var f=0,h=d;f<h.length;f++){var p=h[f];"."!==p&&(".."===p?l.pop():l.push(p))}return"url("+u+l.join("/")+u+")"})}var wr=/^[^ \t\n\r\u000c]+/,Sr=/^[, \t\n\r\u000c]+/;function Or(e,t){if(!t||""===t.trim())return t;var r=e.createElement("a");return r.href=t,r.href}function Er(){var e=document.createElement("a");return e.href="",e.href}function Pr(e,t,r,n){return"src"===r||"href"===r&&n||"xlink:href"===r&&n&&"#"!==n[0]?Or(e,n):"background"!==r||!n||"table"!==t&&"td"!==t&&"th"!==t?"srcset"===r&&n?function(e,t){if(""===t.trim())return t;var r=0;function n(e){var n,o=e.exec(t.substring(r));return o?(n=o[0],r+=n.length,n):""}for(var o=[];n(Sr),!(r>=t.length);){var i=n(wr);if(","===i.slice(-1))i=Or(e,i.substring(0,i.length-1)),o.push(i);else{var s="";i=Or(e,i);for(var a=!1;;){var c=t.charAt(r);if(""===c){o.push((i+s).trim());break}if(a)")"===c&&(a=!1);else{if(","===c){r+=1,o.push((i+s).trim());break}"("===c&&(a=!0)}s+=c,r+=1}}}return o.join(", ")}(e,n):"style"===r&&n?br(n,Er()):"object"===t&&"data"===r&&n?Or(e,n):n:Or(e,n)}function xr(e,t,r){if(!e)return!1;if(e.nodeType===e.ELEMENT_NODE){if("string"==typeof t){if(e.classList.contains(t))return!0}else for(var n=0;n<e.classList.length;n++){var o=e.classList[n];if(t.test(o))return!0}return!(!r||!e.matches(r))||xr(e.parentNode,t,r)}return e.nodeType,e.TEXT_NODE,xr(e.parentNode,t,r)}function Tr(e,t){var r,n,o,i,s=t.doc,a=t.blockClass,c=t.blockSelector,u=t.maskTextClass,l=t.maskTextSelector,d=t.inlineStylesheet,f=t.maskInputOptions,h=void 0===f?{}:f,p=t.maskTextFn,v=t.maskInputFn,y=t.dataURLOptions,g=void 0===y?{}:y,m=t.inlineImages,b=t.recordCanvas,w=t.keepIframeSrcFn;if(s.__sn){var S=s.__sn.id;n=1===S?void 0:S}switch(e.nodeType){case e.DOCUMENT_NODE:return"CSS1Compat"!==e.compatMode?{type:tr.Document,childNodes:[],compatMode:e.compatMode,rootId:n}:{type:tr.Document,childNodes:[],rootId:n};case e.DOCUMENT_TYPE_NODE:return{type:tr.DocumentType,name:e.name,publicId:e.publicId,systemId:e.systemId,rootId:n};case e.ELEMENT_NODE:for(var O=function(e,t,r){if("string"==typeof t){if(e.classList.contains(t))return!0}else for(var n=0;n<e.classList.length;n++){var o=e.classList[n];if(t.test(o))return!0}return!!r&&e.matches(r)}(e,a,c),E=function(e){if(e instanceof HTMLFormElement)return"form";var t=e.tagName.toLowerCase().trim();return hr.test(t)?"div":t}(e),P={},x=0,T=Array.from(e.attributes);x<T.length;x++){var k=T[x],I=k.name,C=k.value;P[I]=Pr(s,E,I,C)}if("link"===E&&d){var R=Array.from(s.styleSheets).find(function(t){return t.href===e.href}),A=null;R&&(A=pr(R)),A&&(delete P.rel,delete P.href,P._cssText=br(A,R.href))}if("style"===E&&e.sheet&&!(e.innerText||e.textContent||"").trim().length)(A=pr(e.sheet))&&(P._cssText=br(A,Er()));if("input"===E||"textarea"===E||"select"===E){C=e.value;"radio"!==P.type&&"checkbox"!==P.type&&"submit"!==P.type&&"button"!==P.type&&C?P.value=cr({type:P.type,tagName:E,value:C,maskInputOptions:h,maskInputFn:v}):e.checked&&(P.checked=e.checked)}if("option"===E&&(e.selected&&!h.select?P.selected=!0:delete P.selected),"canvas"===E&&b)if("2d"===e.__context)(function(e){var t=e.getContext("2d");if(!t)return!0;for(var r=0;r<e.width;r+=50)for(var n=0;n<e.height;n+=50){var o=t.getImageData,i=ur in o?o[ur]:o;if(new Uint32Array(i.call(t,r,n,Math.min(50,e.width-r),Math.min(50,e.height-n)).data.buffer).some(function(e){return 0!==e}))return!1}return!0})(e)||(P.rr_dataURL=e.toDataURL(g.type,g.quality));else if(!("__context"in e)){var j=e.toDataURL(g.type,g.quality),M=document.createElement("canvas");M.width=e.width,M.height=e.height,j!==M.toDataURL(g.type,g.quality)&&(P.rr_dataURL=j)}if("img"===E&&m){lr||(lr=s.createElement("canvas"),dr=lr.getContext("2d"));var N=e,L=N.crossOrigin;N.crossOrigin="anonymous";var _=function(){try{lr.width=N.naturalWidth,lr.height=N.naturalHeight,dr.drawImage(N,0,0),P.rr_dataURL=lr.toDataURL(g.type,g.quality)}catch(e){console.warn("Cannot inline img src="+N.currentSrc+"! Error: "+e)}L?P.crossOrigin=L:delete P.crossOrigin};N.complete&&0!==N.naturalWidth?_():N.onload=_}if("audio"!==E&&"video"!==E||(P.rr_mediaState=e.paused?"paused":"played",P.rr_mediaCurrentTime=e.currentTime),e.scrollLeft&&(P.rr_scrollLeft=e.scrollLeft),e.scrollTop&&(P.rr_scrollTop=e.scrollTop),O){var D=e.getBoundingClientRect(),B=D.width,F=D.height;P={class:P.class,rr_width:B+"px",rr_height:F+"px"}}return"iframe"!==E||w(P.src)||(e.contentDocument||(P.rr_src=P.src),delete P.src),{type:tr.Element,tagName:E,attributes:P,childNodes:[],isSVG:(i=e,Boolean("svg"===i.tagName||i.ownerSVGElement)||void 0),needBlock:O,rootId:n};case e.TEXT_NODE:var U=e.parentNode&&e.parentNode.tagName,W=e.textContent,z="STYLE"===U||void 0,V="SCRIPT"===U||void 0;if(z&&W){try{e.nextSibling||e.previousSibling||(null===(r=e.parentNode.sheet)||void 0===r?void 0:r.cssRules)&&(W=(o=e.parentNode.sheet).cssRules?Array.from(o.cssRules).map(function(e){return e.cssText||""}).join(""):"")}catch(t){console.warn("Cannot get CSS styles from text's parentNode. Error: "+t,e)}W=br(W,Er())}return V&&(W="SCRIPT_PLACEHOLDER"),!z&&!V&&xr(e,u,l)&&W&&(W=p?p(W):W.replace(/[\S]/g,"*")),{type:tr.Text,textContent:W||"",isStyle:z,rootId:n};case e.CDATA_SECTION_NODE:return{type:tr.CDATA,textContent:"",rootId:n};case e.COMMENT_NODE:return{type:tr.Comment,textContent:e.textContent||"",rootId:n};default:return!1}}function kr(e){return void 0===e?"":e.toLowerCase()}function Ir(e,t){var r,n=t.doc,o=t.map,i=t.blockClass,s=t.blockSelector,a=t.maskTextClass,c=t.maskTextSelector,u=t.skipChild,l=void 0!==u&&u,d=t.inlineStylesheet,f=void 0===d||d,h=t.maskInputOptions,p=void 0===h?{}:h,v=t.maskTextFn,y=t.maskInputFn,g=t.slimDOMOptions,m=t.dataURLOptions,b=void 0===m?{}:m,w=t.inlineImages,S=void 0!==w&&w,O=t.recordCanvas,E=void 0!==O&&O,P=t.onSerialize,x=t.onIframeLoad,T=t.iframeLoadTimeout,k=void 0===T?5e3:T,I=t.keepIframeSrcFn,C=void 0===I?function(){return!1}:I,R=t.preserveWhiteSpace,A=void 0===R||R,j=Tr(e,{doc:n,blockClass:i,blockSelector:s,maskTextClass:a,maskTextSelector:c,inlineStylesheet:f,maskInputOptions:p,maskTextFn:v,maskInputFn:y,dataURLOptions:b,inlineImages:S,recordCanvas:E,keepIframeSrcFn:C});if(!j)return console.warn(e,"not serialized"),null;r="__sn"in e?e.__sn.id:!function(e,t){if(t.comment&&e.type===tr.Comment)return!0;if(e.type===tr.Element){if(t.script&&("script"===e.tagName||"link"===e.tagName&&"preload"===e.attributes.rel&&"script"===e.attributes.as||"link"===e.tagName&&"prefetch"===e.attributes.rel&&"string"==typeof e.attributes.href&&e.attributes.href.endsWith(".js")))return!0;if(t.headFavicon&&("link"===e.tagName&&"shortcut icon"===e.attributes.rel||"meta"===e.tagName&&(kr(e.attributes.name).match(/^msapplication-tile(image|color)$/)||"application-name"===kr(e.attributes.name)||"icon"===kr(e.attributes.rel)||"apple-touch-icon"===kr(e.attributes.rel)||"shortcut icon"===kr(e.attributes.rel))))return!0;if("meta"===e.tagName){if(t.headMetaDescKeywords&&kr(e.attributes.name).match(/^description|keywords$/))return!0;if(t.headMetaSocial&&(kr(e.attributes.property).match(/^(og|twitter|fb):/)||kr(e.attributes.name).match(/^(og|twitter):/)||"pinterest"===kr(e.attributes.name)))return!0;if(t.headMetaRobots&&("robots"===kr(e.attributes.name)||"googlebot"===kr(e.attributes.name)||"bingbot"===kr(e.attributes.name)))return!0;if(t.headMetaHttpEquiv&&void 0!==e.attributes["http-equiv"])return!0;if(t.headMetaAuthorship&&("author"===kr(e.attributes.name)||"generator"===kr(e.attributes.name)||"framework"===kr(e.attributes.name)||"publisher"===kr(e.attributes.name)||"progid"===kr(e.attributes.name)||kr(e.attributes.property).match(/^article:/)||kr(e.attributes.property).match(/^product:/)))return!0;if(t.headMetaVerification&&("google-site-verification"===kr(e.attributes.name)||"yandex-verification"===kr(e.attributes.name)||"csrf-token"===kr(e.attributes.name)||"p:domain_verify"===kr(e.attributes.name)||"verify-v1"===kr(e.attributes.name)||"verification"===kr(e.attributes.name)||"shopify-checkout-api-token"===kr(e.attributes.name)))return!0}}return!1}(j,g)&&(A||j.type!==tr.Text||j.isStyle||j.textContent.replace(/^\s+|\s+$/gm,"").length)?fr++:-2;var M=Object.assign(j,{id:r});if(e.__sn=M,-2===r)return null;o[r]=e,P&&P(e);var N=!l;if(M.type===tr.Element&&(N=N&&!M.needBlock,delete M.needBlock,e.shadowRoot&&(M.isShadowHost=!0)),(M.type===tr.Document||M.type===tr.Element)&&N){g.headWhitespace&&j.type===tr.Element&&"head"===j.tagName&&(A=!1);for(var L={doc:n,map:o,blockClass:i,blockSelector:s,maskTextClass:a,maskTextSelector:c,skipChild:l,inlineStylesheet:f,maskInputOptions:p,maskTextFn:v,maskInputFn:y,slimDOMOptions:g,dataURLOptions:b,inlineImages:S,recordCanvas:E,preserveWhiteSpace:A,onSerialize:P,onIframeLoad:x,iframeLoadTimeout:k,keepIframeSrcFn:C},_=0,D=Array.from(e.childNodes);_<D.length;_++){(U=Ir(D[_],L))&&M.childNodes.push(U)}if(sr(e)&&e.shadowRoot)for(var B=0,F=Array.from(e.shadowRoot.childNodes);B<F.length;B++){var U;(U=Ir(F[B],L))&&(U.isShadow=!0,M.childNodes.push(U))}}return e.parentNode&&ar(e.parentNode)&&(M.isShadow=!0),M.type===tr.Element&&"iframe"===M.tagName&&function(e,t,r){var n=e.contentWindow;if(n){var o,i=!1;try{o=n.document.readyState}catch(e){return}if("complete"===o){var s="about:blank";n.location.href===s&&e.src!==s&&""!==e.src?e.addEventListener("load",t):setTimeout(t,0)}else{var a=setTimeout(function(){i||(t(),i=!0)},r);e.addEventListener("load",function(){clearTimeout(a),i=!0,t()})}}}(e,function(){var t=e.contentDocument;if(t&&x){var r=Ir(t,{doc:t,map:o,blockClass:i,blockSelector:s,maskTextClass:a,maskTextSelector:c,skipChild:!1,inlineStylesheet:f,maskInputOptions:p,maskTextFn:v,maskInputFn:y,slimDOMOptions:g,dataURLOptions:b,inlineImages:S,recordCanvas:E,preserveWhiteSpace:A,onSerialize:P,onIframeLoad:x,iframeLoadTimeout:k,keepIframeSrcFn:C});r&&x(e,r)}},k),M}var Cr,Rr,Ar,jr,Mr,Nr,Lr=/([^\\]):hover/;new RegExp(Lr.source,"g");function _r(e,t,r){void 0===r&&(r=document);var n={capture:!0,passive:!0};return r.addEventListener(e,t,n),function(){return r.removeEventListener(e,t,n)}}!function(e){e[e.DomContentLoaded=0]="DomContentLoaded",e[e.Load=1]="Load",e[e.FullSnapshot=2]="FullSnapshot",e[e.IncrementalSnapshot=3]="IncrementalSnapshot",e[e.Meta=4]="Meta",e[e.Custom=5]="Custom",e[e.Plugin=6]="Plugin"}(Cr||(Cr={})),function(e){e[e.Mutation=0]="Mutation",e[e.MouseMove=1]="MouseMove",e[e.MouseInteraction=2]="MouseInteraction",e[e.Scroll=3]="Scroll",e[e.ViewportResize=4]="ViewportResize",e[e.Input=5]="Input",e[e.TouchMove=6]="TouchMove",e[e.MediaInteraction=7]="MediaInteraction",e[e.StyleSheetRule=8]="StyleSheetRule",e[e.CanvasMutation=9]="CanvasMutation",e[e.Font=10]="Font",e[e.Log=11]="Log",e[e.Drag=12]="Drag",e[e.StyleDeclaration=13]="StyleDeclaration"}(Rr||(Rr={})),function(e){e[e.MouseUp=0]="MouseUp",e[e.MouseDown=1]="MouseDown",e[e.Click=2]="Click",e[e.ContextMenu=3]="ContextMenu",e[e.DblClick=4]="DblClick",e[e.Focus=5]="Focus",e[e.Blur=6]="Blur",e[e.TouchStart=7]="TouchStart",e[e.TouchMove_Departed=8]="TouchMove_Departed",e[e.TouchEnd=9]="TouchEnd",e[e.TouchCancel=10]="TouchCancel"}(Ar||(Ar={})),function(e){e[e["2D"]=0]="2D",e[e.WebGL=1]="WebGL",e[e.WebGL2=2]="WebGL2"}(jr||(jr={})),function(e){e[e.Play=0]="Play",e[e.Pause=1]="Pause",e[e.Seeked=2]="Seeked",e[e.VolumeChange=3]="VolumeChange"}(Mr||(Mr={})),function(e){e.Start="start",e.Pause="pause",e.Resume="resume",e.Resize="resize",e.Finish="finish",e.FullsnapshotRebuilded="fullsnapshot-rebuilded",e.LoadStylesheetStart="load-stylesheet-start",e.LoadStylesheetEnd="load-stylesheet-end",e.SkipStart="skip-start",e.SkipEnd="skip-end",e.MouseInteraction="mouse-interaction",e.EventCast="event-cast",e.CustomEvent="custom-event",e.Flush="flush",e.StateChange="state-change",e.PlayBack="play-back"}(Nr||(Nr={}));var Dr="Please stop import mirror directly. Instead of that,\r\nnow you can use replayer.getMirror() to access the mirror instance of a replayer,\r\nor you can use record.mirror to access the mirror instance during recording.",Br={map:{},getId:function(){return console.error(Dr),-1},getNode:function(){return console.error(Dr),null},removeNodeFromMap:function(){console.error(Dr)},has:function(){return console.error(Dr),!1},reset:function(){console.error(Dr)}};function Fr(e,t,r){void 0===r&&(r={});var n=null,o=0;return function(i){var s=Date.now();o||!1!==r.leading||(o=s);var a=t-(s-o),c=this,u=arguments;a<=0||a>t?(n&&(clearTimeout(n),n=null),o=s,e.apply(c,u)):n||!1===r.trailing||(n=setTimeout(function(){o=!1===r.leading?0:Date.now(),n=null,e.apply(c,u)},a))}}function Ur(e,t,r,n,o){void 0===o&&(o=window);var i=o.Object.getOwnPropertyDescriptor(e,t);return o.Object.defineProperty(e,t,n?r:{set:function(e){var t=this;setTimeout(function(){r.set.call(t,e)},0),i&&i.set&&i.set.call(this,e)}}),function(){return Ur(e,t,i||{},!0)}}function Wr(e,t,r){try{if(!(t in e))return function(){};var n=e[t],o=r(n);return"function"==typeof o&&(o.prototype=o.prototype||{},Object.defineProperties(o,{__rrweb_original__:{enumerable:!1,value:n}})),e[t]=o,function(){e[t]=n}}catch(e){return function(){}}}function zr(){return window.innerHeight||document.documentElement&&document.documentElement.clientHeight||document.body&&document.body.clientHeight}function Vr(){return window.innerWidth||document.documentElement&&document.documentElement.clientWidth||document.body&&document.body.clientWidth}function Gr(e,t){if(!e)return!1;if(e.nodeType===e.ELEMENT_NODE){var r=!1;if("string"==typeof t){if(void 0!==e.closest)return null!==e.closest("."+t);r=e.classList.contains(t)}else e.classList.forEach(function(e){t.test(e)&&(r=!0)});return r||Gr(e.parentNode,t)}return e.nodeType,e.TEXT_NODE,Gr(e.parentNode,t)}function qr(e){return"__sn"in e&&-2===e.__sn.id}function Hr(e,t){if(ar(e))return!1;var r=t.getId(e);return!t.has(r)||(!e.parentNode||e.parentNode.nodeType!==e.DOCUMENT_NODE)&&(!e.parentNode||Hr(e.parentNode,t))}function $r(e){return Boolean(e.changedTouches)}"undefined"!=typeof window&&window.Proxy&&window.Reflect&&(Br=new Proxy(Br,{get:function(e,t,r){return"map"===t&&console.error(Dr),Reflect.get(e,t,r)}}));!function(){function e(){this.reset()}e.prototype.add=function(e){var t=this.indexes.get(e.parentId),r={id:e.node.id,mutation:e,children:[],texts:[],attributes:[]};t?(r.parent=t,t.children[r.id]=r):this.tree[r.id]=r,this.indexes.set(r.id,r)},e.prototype.remove=function(e,t){var r=this,n=this.indexes.get(e.parentId),o=this.indexes.get(e.id),i=function(e){r.removeIdSet.add(e);var n=t.getNode(e);null==n||n.childNodes.forEach(function(e){"__sn"in e&&i(e.__sn.id)})},s=function(t){r.removeIdSet.add(t.id),Object.values(t.children).forEach(function(e){return s(e)});var n=r.indexes.get(t.id);if(n){var o=n.parent;o&&(delete n.parent,delete o.children[n.id],r.indexes.delete(e.id))}};o?n?(delete o.parent,delete n.children[o.id],this.indexes.delete(e.id),s(o)):(delete this.tree[o.id],this.indexes.delete(o.id),s(o)):(this.removeNodeMutations.push(e),i(e.id))},e.prototype.text=function(e){var t=this.indexes.get(e.id);t?t.texts.push(e):this.textMutations.push(e)},e.prototype.attribute=function(e){var t=this.indexes.get(e.id);t?t.attributes.push(e):this.attributeMutations.push(e)},e.prototype.scroll=function(e){this.scrollMap.set(e.id,e)},e.prototype.input=function(e){this.inputMap.set(e.id,e)},e.prototype.flush=function(){var e,t,r,n,o=this,i=this,s=i.tree,a=i.removeNodeMutations,c=i.textMutations,u=i.attributeMutations,l={source:Rr.Mutation,removes:a,texts:c,attributes:u,adds:[]},d=function(e,t){t&&o.removeIdSet.add(e.id),l.texts=l.texts.concat(t?[]:e.texts).filter(function(e){return!o.removeIdSet.has(e.id)}),l.attributes=l.attributes.concat(t?[]:e.attributes).filter(function(e){return!o.removeIdSet.has(e.id)}),o.removeIdSet.has(e.id)||o.removeIdSet.has(e.mutation.parentId)||t?Object.values(e.children).forEach(function(e){return d(e,!0)}):(l.adds.push(e.mutation),e.children&&Object.values(e.children).forEach(function(e){return d(e,!1)}))};Object.values(s).forEach(function(e){return d(e,!1)});try{for(var f=nr(this.scrollMap.keys()),h=f.next();!h.done;h=f.next()){var p=h.value;this.removeIdSet.has(p)&&this.scrollMap.delete(p)}}catch(t){e={error:t}}finally{try{h&&!h.done&&(t=f.return)&&t.call(f)}finally{if(e)throw e.error}}try{for(var v=nr(this.inputMap.keys()),y=v.next();!y.done;y=v.next()){p=y.value;this.removeIdSet.has(p)&&this.inputMap.delete(p)}}catch(e){r={error:e}}finally{try{y&&!y.done&&(n=v.return)&&n.call(v)}finally{if(r)throw r.error}}var g=new Map(this.scrollMap),m=new Map(this.inputMap);return this.reset(),{mutationData:l,scrollMap:g,inputMap:m}},e.prototype.reset=function(){this.tree=[],this.indexes=new Map,this.removeNodeMutations=[],this.textMutations=[],this.attributeMutations=[],this.removeIdSet=new Set,this.scrollMap=new Map,this.inputMap=new Map},e.prototype.idRemoved=function(e){return this.removeIdSet.has(e)}}();function Kr(e){return"__sn"in e&&(e.__sn.type===tr.Element&&"iframe"===e.__sn.tagName)}function Jr(e){return Boolean(null==e?void 0:e.shadowRoot)}function Qr(e){return"__ln"in e}var Yr=function(){function e(){this.length=0,this.head=null}return e.prototype.get=function(e){if(e>=this.length)throw new Error("Position outside of list range");for(var t=this.head,r=0;r<e;r++)t=(null==t?void 0:t.next)||null;return t},e.prototype.addNode=function(e){var t={value:e,previous:null,next:null};if(e.__ln=t,e.previousSibling&&Qr(e.previousSibling)){var r=e.previousSibling.__ln.next;t.next=r,t.previous=e.previousSibling.__ln,e.previousSibling.__ln.next=t,r&&(r.previous=t)}else if(e.nextSibling&&Qr(e.nextSibling)&&e.nextSibling.__ln.previous){r=e.nextSibling.__ln.previous;t.previous=r,t.next=e.nextSibling.__ln,e.nextSibling.__ln.previous=t,r&&(r.next=t)}else this.head&&(this.head.previous=t),t.next=this.head,this.head=t;this.length++},e.prototype.removeNode=function(e){var t=e.__ln;this.head&&(t.previous?(t.previous.next=t.next,t.next&&(t.next.previous=t.previous)):(this.head=t.next,this.head&&(this.head.previous=null)),e.__ln&&delete e.__ln,this.length--)},e}(),Xr=function(e,t){return"".concat(e,"@").concat(t)};function Zr(e){return"__sn"in e}var en=function(){function e(){var e=this;this.frozen=!1,this.locked=!1,this.texts=[],this.attributes=[],this.removes=[],this.mapRemoves=[],this.movedMap={},this.addedSet=new Set,this.movedSet=new Set,this.droppedSet=new Set,this.processMutations=function(t){t.forEach(e.processMutation),e.emit()},this.emit=function(){var t,r,n,o;if(!e.frozen&&!e.locked){for(var i=[],s=new Yr,a=function(t){for(var r=t,n=-2;-2===n;)n=(r=r&&r.nextSibling)&&e.mirror.getId(r);return n},c=function(t){for(var r,n,o,c,u,l=t.getRootNode?null===(r=t.getRootNode())||void 0===r?void 0:r.host:null,d=l;null===(o=null===(n=null==d?void 0:d.getRootNode)||void 0===n?void 0:n.call(d))||void 0===o?void 0:o.host;)d=(null===(u=null===(c=null==d?void 0:d.getRootNode)||void 0===c?void 0:c.call(d))||void 0===u?void 0:u.host)||null;var f=!(e.doc.contains(t)||null!==d&&e.doc.contains(d));if(t.parentNode&&!f){var h=ar(t.parentNode)?e.mirror.getId(l):e.mirror.getId(t.parentNode),p=a(t);if(-1===h||-1===p)return s.addNode(t);var v=Ir(t,{doc:e.doc,map:e.mirror.map,blockClass:e.blockClass,blockSelector:e.blockSelector,maskTextClass:e.maskTextClass,maskTextSelector:e.maskTextSelector,skipChild:!0,inlineStylesheet:e.inlineStylesheet,maskInputOptions:e.maskInputOptions,maskTextFn:e.maskTextFn,maskInputFn:e.maskInputFn,slimDOMOptions:e.slimDOMOptions,recordCanvas:e.recordCanvas,inlineImages:e.inlineImages,onSerialize:function(r){Kr(r)&&e.iframeManager.addIframe(r),Jr(t)&&e.shadowDomManager.addShadowRoot(t.shadowRoot,document)},onIframeLoad:function(t,r){e.iframeManager.attachIframe(t,r),e.shadowDomManager.observeAttachShadow(t)}});v&&i.push({parentId:h,nextId:p,node:v})}};e.mapRemoves.length;)e.mirror.removeNodeFromMap(e.mapRemoves.shift());try{for(var u=nr(e.movedSet),l=u.next();!l.done;l=u.next()){var d=l.value;rn(e.removes,d,e.mirror)&&!e.movedSet.has(d.parentNode)||c(d)}}catch(e){t={error:e}}finally{try{l&&!l.done&&(r=u.return)&&r.call(u)}finally{if(t)throw t.error}}try{for(var f=nr(e.addedSet),h=f.next();!h.done;h=f.next()){d=h.value;nn(e.droppedSet,d)||rn(e.removes,d,e.mirror)?nn(e.movedSet,d)?c(d):e.droppedSet.add(d):c(d)}}catch(e){n={error:e}}finally{try{h&&!h.done&&(o=f.return)&&o.call(f)}finally{if(n)throw n.error}}for(var p=null;s.length;){var v=null;if(p){var y=e.mirror.getId(p.value.parentNode),g=a(p.value);-1!==y&&-1!==g&&(v=p)}if(!v)for(var m=s.length-1;m>=0;m--){var b=s.get(m);if(b){y=e.mirror.getId(b.value.parentNode),g=a(b.value);if(-1!==y&&-1!==g){v=b;break}}}if(!v){for(;s.head;)s.removeNode(s.head.value);break}p=v.previous,s.removeNode(v.value),c(v.value)}var w={texts:e.texts.map(function(t){return{id:e.mirror.getId(t.node),value:t.value}}).filter(function(t){return e.mirror.has(t.id)}),attributes:e.attributes.map(function(t){return{id:e.mirror.getId(t.node),attributes:t.attributes}}).filter(function(t){return e.mirror.has(t.id)}),removes:e.removes,adds:i};(w.texts.length||w.attributes.length||w.removes.length||w.adds.length)&&(e.texts=[],e.attributes=[],e.removes=[],e.addedSet=new Set,e.movedSet=new Set,e.droppedSet=new Set,e.movedMap={},e.mutationCb(w))}},this.processMutation=function(t){var r,n,o,i;if(!qr(t.target))switch(t.type){case"characterData":var s=t.target.textContent;Gr(t.target,e.blockClass)||s===t.oldValue||e.texts.push({value:xr(t.target,e.maskTextClass,e.maskTextSelector)&&s?e.maskTextFn?e.maskTextFn(s):s.replace(/[\S]/g,"*"):s,node:t.target});break;case"attributes":var a=t.target;s=t.target.getAttribute(t.attributeName);if("value"===t.attributeName&&(s=cr({maskInputOptions:e.maskInputOptions,tagName:t.target.tagName,type:t.target.getAttribute("type"),value:s,maskInputFn:e.maskInputFn})),Gr(t.target,e.blockClass)||s===t.oldValue)return;var c=e.attributes.find(function(e){return e.node===t.target});if(c||(c={node:t.target,attributes:{}},e.attributes.push(c)),"style"===t.attributeName){var u=e.doc.createElement("span");t.oldValue&&u.setAttribute("style",t.oldValue),void 0!==c.attributes.style&&null!==c.attributes.style||(c.attributes.style={});var l=c.attributes.style;try{for(var d=nr(Array.from(a.style)),f=d.next();!f.done;f=d.next()){var h=f.value,p=a.style.getPropertyValue(h),v=a.style.getPropertyPriority(h);p===u.style.getPropertyValue(h)&&v===u.style.getPropertyPriority(h)||(l[h]=""===v?p:[p,v])}}catch(e){r={error:e}}finally{try{f&&!f.done&&(n=d.return)&&n.call(d)}finally{if(r)throw r.error}}try{for(var y=nr(Array.from(u.style)),g=y.next();!g.done;g=y.next()){h=g.value;""===a.style.getPropertyValue(h)&&(l[h]=!1)}}catch(e){o={error:e}}finally{try{g&&!g.done&&(i=y.return)&&i.call(y)}finally{if(o)throw o.error}}}else c.attributes[t.attributeName]=Pr(e.doc,t.target.tagName,t.attributeName,s);break;case"childList":t.addedNodes.forEach(function(r){return e.genAdds(r,t.target)}),t.removedNodes.forEach(function(r){var n=e.mirror.getId(r),o=ar(t.target)?e.mirror.getId(t.target.host):e.mirror.getId(t.target);Gr(t.target,e.blockClass)||qr(r)||(e.addedSet.has(r)?(tn(e.addedSet,r),e.droppedSet.add(r)):e.addedSet.has(t.target)&&-1===n||Hr(t.target,e.mirror)||(e.movedSet.has(r)&&e.movedMap[Xr(n,o)]?tn(e.movedSet,r):e.removes.push({parentId:o,id:n,isShadow:!!ar(t.target)||void 0})),e.mapRemoves.push(r))})}},this.genAdds=function(t,r){if(!r||!Gr(r,e.blockClass)){if(Zr(t)){if(qr(t))return;e.movedSet.add(t);var n=null;r&&Zr(r)&&(n=r.__sn.id),n&&(e.movedMap[Xr(t.__sn.id,n)]=!0)}else e.addedSet.add(t),e.droppedSet.delete(t);Gr(t,e.blockClass)||t.childNodes.forEach(function(t){return e.genAdds(t)})}}}return e.prototype.init=function(e){var t=this;["mutationCb","blockClass","blockSelector","maskTextClass","maskTextSelector","inlineStylesheet","maskInputOptions","maskTextFn","maskInputFn","recordCanvas","inlineImages","slimDOMOptions","doc","mirror","iframeManager","shadowDomManager","canvasManager"].forEach(function(r){t[r]=e[r]})},e.prototype.freeze=function(){this.frozen=!0,this.canvasManager.freeze()},e.prototype.unfreeze=function(){this.frozen=!1,this.canvasManager.unfreeze(),this.emit()},e.prototype.isFrozen=function(){return this.frozen},e.prototype.lock=function(){this.locked=!0,this.canvasManager.lock()},e.prototype.unlock=function(){this.locked=!1,this.canvasManager.unlock(),this.emit()},e.prototype.reset=function(){this.shadowDomManager.reset(),this.canvasManager.reset()},e}();function tn(e,t){e.delete(t),t.childNodes.forEach(function(t){return tn(e,t)})}function rn(e,t,r){var n=t.parentNode;if(!n)return!1;var o=r.getId(n);return!!e.some(function(e){return e.id===o})||rn(e,n,r)}function nn(e,t){var r=t.parentNode;return!!r&&(!!e.has(r)||nn(e,r))}var on=en,sn=[],an="undefined"!=typeof CSSGroupingRule,cn="undefined"!=typeof CSSMediaRule,un="undefined"!=typeof CSSSupportsRule,ln="undefined"!=typeof CSSConditionRule;function dn(e){try{if("composedPath"in e){var t=e.composedPath();if(t.length)return t[0]}else if("path"in e&&e.path.length)return e.path[0];return e.target}catch(t){return e.target}}function fn(e,t){var r,n,o=new on;sn.push(o),o.init(e);var i=window.MutationObserver||window.__rrMutationObserver,s=null===(n=null===(r=null===window||void 0===window?void 0:window.Zone)||void 0===r?void 0:r.__symbol__)||void 0===n?void 0:n.call(r,"MutationObserver");s&&window[s]&&(i=window[s]);var a=new i(o.processMutations.bind(o));return a.observe(t,{attributes:!0,attributeOldValue:!0,characterData:!0,characterDataOldValue:!0,childList:!0,subtree:!0}),a}function hn(e){var t=e.mouseInteractionCb,r=e.doc,n=e.mirror,o=e.blockClass,i=e.sampling;if(!1===i.mouseInteraction)return function(){};var s=!0===i.mouseInteraction||void 0===i.mouseInteraction?{}:i.mouseInteraction,a=[];return Object.keys(Ar).filter(function(e){return Number.isNaN(Number(e))&&!e.endsWith("_Departed")&&!1!==s[e]}).forEach(function(e){var i=e.toLowerCase(),s=function(e){return function(r){var i=dn(r);if(!Gr(i,o)){var s=$r(r)?r.changedTouches[0]:r;if(s){var a=n.getId(i),c=s.clientX,u=s.clientY;t({type:Ar[e],id:a,x:c,y:u})}}}}(e);a.push(_r(i,s,r))}),function(){a.forEach(function(e){return e()})}}function pn(e){var t=e.scrollCb,r=e.doc,n=e.mirror,o=e.blockClass;return _r("scroll",Fr(function(e){var i=dn(e);if(i&&!Gr(i,o)){var s=n.getId(i);if(i===r){var a=r.scrollingElement||r.documentElement;t({id:s,x:a.scrollLeft,y:a.scrollTop})}else t({id:s,x:i.scrollLeft,y:i.scrollTop})}},e.sampling.scroll||100),r)}function vn(e,t){var r=rr({},e);return t||delete r.userTriggered,r}var yn=["INPUT","TEXTAREA","SELECT"],gn=new WeakMap;function mn(e){return function(e,t){if(an&&e.parentRule instanceof CSSGroupingRule||cn&&e.parentRule instanceof CSSMediaRule||un&&e.parentRule instanceof CSSSupportsRule||ln&&e.parentRule instanceof CSSConditionRule){var r=Array.from(e.parentRule.cssRules).indexOf(e);t.unshift(r)}else{r=Array.from(e.parentStyleSheet.cssRules).indexOf(e);t.unshift(r)}return t}(e,[])}function bn(e,t){var r,n;void 0===t&&(t={});var o=e.doc.defaultView;if(!o)return function(){};!function(e,t){var r=e.mutationCb,n=e.mousemoveCb,o=e.mouseInteractionCb,i=e.scrollCb,s=e.viewportResizeCb,a=e.inputCb,c=e.mediaInteractionCb,u=e.styleSheetRuleCb,l=e.styleDeclarationCb,d=e.canvasMutationCb,f=e.fontCb;e.mutationCb=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];t.mutation&&t.mutation.apply(t,ir([],or(e),!1)),r.apply(void 0,ir([],or(e),!1))},e.mousemoveCb=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];t.mousemove&&t.mousemove.apply(t,ir([],or(e),!1)),n.apply(void 0,ir([],or(e),!1))},e.mouseInteractionCb=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];t.mouseInteraction&&t.mouseInteraction.apply(t,ir([],or(e),!1)),o.apply(void 0,ir([],or(e),!1))},e.scrollCb=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];t.scroll&&t.scroll.apply(t,ir([],or(e),!1)),i.apply(void 0,ir([],or(e),!1))},e.viewportResizeCb=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];t.viewportResize&&t.viewportResize.apply(t,ir([],or(e),!1)),s.apply(void 0,ir([],or(e),!1))},e.inputCb=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];t.input&&t.input.apply(t,ir([],or(e),!1)),a.apply(void 0,ir([],or(e),!1))},e.mediaInteractionCb=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];t.mediaInteaction&&t.mediaInteaction.apply(t,ir([],or(e),!1)),c.apply(void 0,ir([],or(e),!1))},e.styleSheetRuleCb=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];t.styleSheetRule&&t.styleSheetRule.apply(t,ir([],or(e),!1)),u.apply(void 0,ir([],or(e),!1))},e.styleDeclarationCb=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];t.styleDeclaration&&t.styleDeclaration.apply(t,ir([],or(e),!1)),l.apply(void 0,ir([],or(e),!1))},e.canvasMutationCb=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];t.canvasMutation&&t.canvasMutation.apply(t,ir([],or(e),!1)),d.apply(void 0,ir([],or(e),!1))},e.fontCb=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];t.font&&t.font.apply(t,ir([],or(e),!1)),f.apply(void 0,ir([],or(e),!1))}}(e,t);var i=fn(e,e.doc),s=function(e){var t=e.mousemoveCb,r=e.sampling,n=e.doc,o=e.mirror;if(!1===r.mousemove)return function(){};var i,s="number"==typeof r.mousemove?r.mousemove:50,a="number"==typeof r.mousemoveCallback?r.mousemoveCallback:500,c=[],u=Fr(function(e){var r=Date.now()-i;t(c.map(function(e){return e.timeOffset-=r,e}),e),c=[],i=null},a),l=Fr(function(e){var t=dn(e),r=$r(e)?e.changedTouches[0]:e,n=r.clientX,s=r.clientY;i||(i=Date.now()),c.push({x:n,y:s,id:o.getId(t),timeOffset:Date.now()-i}),u("undefined"!=typeof DragEvent&&e instanceof DragEvent?Rr.Drag:e instanceof MouseEvent?Rr.MouseMove:Rr.TouchMove)},s,{trailing:!1}),d=[_r("mousemove",l,n),_r("touchmove",l,n),_r("drag",l,n)];return function(){d.forEach(function(e){return e()})}}(e),a=hn(e),c=pn(e),u=function(e){var t=e.viewportResizeCb,r=-1,n=-1;return _r("resize",Fr(function(){var e=zr(),o=Vr();r===e&&n===o||(t({width:Number(o),height:Number(e)}),r=e,n=o)},200),window)}(e),l=function(e){var t=e.inputCb,r=e.doc,n=e.mirror,o=e.blockClass,i=e.ignoreClass,s=e.maskInputOptions,a=e.maskInputFn,c=e.sampling,u=e.userTriggeredOnInput;function l(e){var t=dn(e),n=e.isTrusted;if(t&&"OPTION"===t.tagName&&(t=t.parentElement),t&&t.tagName&&!(yn.indexOf(t.tagName)<0)&&!Gr(t,o)){var c=t.type;if(!t.classList.contains(i)){var l=t.value,f=!1;"radio"===c||"checkbox"===c?f=t.checked:(s[t.tagName.toLowerCase()]||s[c])&&(l=cr({maskInputOptions:s,tagName:t.tagName,type:c,value:l,maskInputFn:a})),d(t,vn({text:l,isChecked:f,userTriggered:n},u));var h=t.name;"radio"===c&&h&&f&&r.querySelectorAll('input[type="radio"][name="'.concat(h,'"]')).forEach(function(e){e!==t&&d(e,vn({text:e.value,isChecked:!f,userTriggered:!1},u))})}}}function d(e,r){var o=gn.get(e);if(!o||o.text!==r.text||o.isChecked!==r.isChecked){gn.set(e,r);var i=n.getId(e);t(rr(rr({},r),{id:i}))}}var f=("last"===c.input?["change"]:["input","change"]).map(function(e){return _r(e,l,r)}),h=Object.getOwnPropertyDescriptor(HTMLInputElement.prototype,"value"),p=[[HTMLInputElement.prototype,"value"],[HTMLInputElement.prototype,"checked"],[HTMLSelectElement.prototype,"value"],[HTMLTextAreaElement.prototype,"value"],[HTMLSelectElement.prototype,"selectedIndex"],[HTMLOptionElement.prototype,"selected"]];return h&&h.set&&f.push.apply(f,ir([],or(p.map(function(e){return Ur(e[0],e[1],{set:function(){l({target:this})}})})),!1)),function(){f.forEach(function(e){return e()})}}(e),d=function(e){var t=e.mediaInteractionCb,r=e.blockClass,n=e.mirror,o=e.sampling,i=function(e){return Fr(function(o){var i=dn(o);if(i&&!Gr(i,r)){var s=i,a=s.currentTime,c=s.volume,u=s.muted;t({type:e,id:n.getId(i),currentTime:a,volume:c,muted:u})}},o.media||500)},s=[_r("play",i(0)),_r("pause",i(1)),_r("seeked",i(2)),_r("volumechange",i(3))];return function(){s.forEach(function(e){return e()})}}(e),f=function(e,t){var r=e.styleSheetRuleCb,n=e.mirror,o=t.win,i=o.CSSStyleSheet.prototype.insertRule;o.CSSStyleSheet.prototype.insertRule=function(e,t){var o=n.getId(this.ownerNode);return-1!==o&&r({id:o,adds:[{rule:e,index:t}]}),i.apply(this,arguments)};var s=o.CSSStyleSheet.prototype.deleteRule;o.CSSStyleSheet.prototype.deleteRule=function(e){var t=n.getId(this.ownerNode);return-1!==t&&r({id:t,removes:[{index:e}]}),s.apply(this,arguments)};var a={};an?a.CSSGroupingRule=o.CSSGroupingRule:(cn&&(a.CSSMediaRule=o.CSSMediaRule),ln&&(a.CSSConditionRule=o.CSSConditionRule),un&&(a.CSSSupportsRule=o.CSSSupportsRule));var c={};return Object.entries(a).forEach(function(e){var t=or(e,2),o=t[0],i=t[1];c[o]={insertRule:i.prototype.insertRule,deleteRule:i.prototype.deleteRule},i.prototype.insertRule=function(e,t){var i=n.getId(this.parentStyleSheet.ownerNode);return-1!==i&&r({id:i,adds:[{rule:e,index:ir(ir([],or(mn(this)),!1),[t||0],!1)}]}),c[o].insertRule.apply(this,arguments)},i.prototype.deleteRule=function(e){var t=n.getId(this.parentStyleSheet.ownerNode);return-1!==t&&r({id:t,removes:[{index:ir(ir([],or(mn(this)),!1),[e],!1)}]}),c[o].deleteRule.apply(this,arguments)}}),function(){o.CSSStyleSheet.prototype.insertRule=i,o.CSSStyleSheet.prototype.deleteRule=s,Object.entries(a).forEach(function(e){var t=or(e,2),r=t[0],n=t[1];n.prototype.insertRule=c[r].insertRule,n.prototype.deleteRule=c[r].deleteRule})}}(e,{win:o}),h=function(e,t){var r=e.styleDeclarationCb,n=e.mirror,o=t.win,i=o.CSSStyleDeclaration.prototype.setProperty;o.CSSStyleDeclaration.prototype.setProperty=function(e,t,o){var s,a,c=n.getId(null===(a=null===(s=this.parentRule)||void 0===s?void 0:s.parentStyleSheet)||void 0===a?void 0:a.ownerNode);return-1!==c&&r({id:c,set:{property:e,value:t,priority:o},index:mn(this.parentRule)}),i.apply(this,arguments)};var s=o.CSSStyleDeclaration.prototype.removeProperty;return o.CSSStyleDeclaration.prototype.removeProperty=function(e){var t,o,i=n.getId(null===(o=null===(t=this.parentRule)||void 0===t?void 0:t.parentStyleSheet)||void 0===o?void 0:o.ownerNode);return-1!==i&&r({id:i,remove:{property:e},index:mn(this.parentRule)}),s.apply(this,arguments)},function(){o.CSSStyleDeclaration.prototype.setProperty=i,o.CSSStyleDeclaration.prototype.removeProperty=s}}(e,{win:o}),p=e.collectFonts?function(e){var t=e.fontCb,r=e.doc,n=r.defaultView;if(!n)return function(){};var o=[],i=new WeakMap,s=n.FontFace;n.FontFace=function(e,t,r){var n=new s(e,t,r);return i.set(n,{family:e,buffer:"string"!=typeof t,descriptors:r,fontSource:"string"==typeof t?t:JSON.stringify(Array.from(new Uint8Array(t)))}),n};var a=Wr(r.fonts,"add",function(e){return function(r){return setTimeout(function(){var e=i.get(r);e&&(t(e),i.delete(r))},0),e.apply(this,[r])}});return o.push(function(){n.FontFace=s}),o.push(a),function(){o.forEach(function(e){return e()})}}(e):function(){},v=[];try{for(var y=nr(e.plugins),g=y.next();!g.done;g=y.next()){var m=g.value;v.push(m.observer(m.callback,o,m.options))}}catch(e){r={error:e}}finally{try{g&&!g.done&&(n=y.return)&&n.call(y)}finally{if(r)throw r.error}}return function(){sn.forEach(function(e){return e.reset()}),i.disconnect(),s(),a(),c(),u(),l(),d(),f(),h(),p(),v.forEach(function(e){return e()})}}var wn=function(){function e(e){this.iframes=new WeakMap,this.mutationCb=e.mutationCb}return e.prototype.addIframe=function(e){this.iframes.set(e,!0)},e.prototype.addLoadListener=function(e){this.loadListener=e},e.prototype.attachIframe=function(e,t){var r;this.mutationCb({adds:[{parentId:e.__sn.id,nextId:null,node:t}],removes:[],texts:[],attributes:[],isAttachIframe:!0}),null===(r=this.loadListener)||void 0===r||r.call(this,e)},e}(),Sn=function(){function e(e){this.restorePatches=[],this.mutationCb=e.mutationCb,this.scrollCb=e.scrollCb,this.bypassOptions=e.bypassOptions,this.mirror=e.mirror;var t=this;this.restorePatches.push(Wr(HTMLElement.prototype,"attachShadow",function(e){return function(){var r=e.apply(this,arguments);return this.shadowRoot&&t.addShadowRoot(this.shadowRoot,this.ownerDocument),r}}))}return e.prototype.addShadowRoot=function(e,t){fn(rr(rr({},this.bypassOptions),{doc:t,mutationCb:this.mutationCb,mirror:this.mirror,shadowDomManager:this}),e),pn(rr(rr({},this.bypassOptions),{scrollCb:this.scrollCb,doc:e,mirror:this.mirror}))},e.prototype.observeAttachShadow=function(e){if(e.contentWindow){var t=this;this.restorePatches.push(Wr(e.contentWindow.HTMLElement.prototype,"attachShadow",function(r){return function(){var n=r.apply(this,arguments);return this.shadowRoot&&t.addShadowRoot(this.shadowRoot,e.contentDocument),n}}))}},e.prototype.reset=function(){this.restorePatches.forEach(function(e){return e()})},e}();var On=function(e,t,r,n){var o,i,s=[],a=Object.getOwnPropertyNames(t.CanvasRenderingContext2D.prototype),c=function(n){try{if("function"!=typeof t.CanvasRenderingContext2D.prototype[n])return"continue";var o=Wr(t.CanvasRenderingContext2D.prototype,n,function(t){return function(){for(var o=this,i=[],s=0;s<arguments.length;s++)i[s]=arguments[s];return Gr(this.canvas,r)||setTimeout(function(){var t=ir([],or(i),!1);if("drawImage"===n&&t[0]&&t[0]instanceof HTMLCanvasElement){var r=t[0],s=r.getContext("2d"),a=null==s?void 0:s.getImageData(0,0,r.width,r.height),c=null==a?void 0:a.data;t[0]=JSON.stringify(c)}e(o.canvas,{type:jr["2D"],property:n,args:t})},0),t.apply(this,i)}});s.push(o)}catch(r){var i=Ur(t.CanvasRenderingContext2D.prototype,n,{set:function(t){e(this.canvas,{type:jr["2D"],property:n,args:[t],setter:!0})}});s.push(i)}};try{for(var u=nr(a),l=u.next();!l.done;l=u.next()){c(l.value)}}catch(e){o={error:e}}finally{try{l&&!l.done&&(i=u.return)&&i.call(u)}finally{if(o)throw o.error}}return function(){s.forEach(function(e){return e()})}};for(var En=function(e,t){var r=[];try{var n=Wr(e.HTMLCanvasElement.prototype,"getContext",function(e){return function(r){for(var n=[],o=1;o<arguments.length;o++)n[o-1]=arguments[o];return Gr(this,t)||"__context"in this||(this.__context=r),e.apply(this,ir([r],or(n),!1))}});r.push(n)}catch(e){console.error("failed to patch HTMLCanvasElement.prototype.getContext")}return function(){r.forEach(function(e){return e()})}},Pn="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",xn="undefined"==typeof Uint8Array?[]:new Uint8Array(256),Tn=0;Tn<64;Tn++)xn[Pn.charCodeAt(Tn)]=Tn;var kn=new Map;var In=function(e,t,r){if(e&&(Rn(e,t)||"object"==typeof e)){var n=function(e,t){var r=kn.get(e);return r||(r=new Map,kn.set(e,r)),r.has(t)||r.set(t,[]),r.get(t)}(r,e.constructor.name),o=n.indexOf(e);return-1===o&&(o=n.length,n.push(e)),o}};function Cn(e,t,r){if(e instanceof Array)return e.map(function(e){return Cn(e,t,r)});if(null===e)return e;if(e instanceof Float32Array||e instanceof Float64Array||e instanceof Int32Array||e instanceof Uint32Array||e instanceof Uint8Array||e instanceof Uint16Array||e instanceof Int16Array||e instanceof Int8Array||e instanceof Uint8ClampedArray)return{rr_type:e.constructor.name,args:[Object.values(e)]};if(e instanceof ArrayBuffer){var n=e.constructor.name,o=function(e){var t,r=new Uint8Array(e),n=r.length,o="";for(t=0;t<n;t+=3)o+=Pn[r[t]>>2],o+=Pn[(3&r[t])<<4|r[t+1]>>4],o+=Pn[(15&r[t+1])<<2|r[t+2]>>6],o+=Pn[63&r[t+2]];return n%3==2?o=o.substring(0,o.length-1)+"=":n%3==1&&(o=o.substring(0,o.length-2)+"=="),o}(e);return{rr_type:n,base64:o}}return e instanceof DataView?{rr_type:e.constructor.name,args:[Cn(e.buffer,t,r),e.byteOffset,e.byteLength]}:e instanceof HTMLImageElement?{rr_type:e.constructor.name,src:e.src}:e instanceof ImageData?{rr_type:e.constructor.name,args:[Cn(e.data,t,r),e.width,e.height]}:Rn(e,t)||"object"==typeof e?{rr_type:e.constructor.name,index:In(e,t,r)}:e}var Rn=function(e,t){var r=["WebGLActiveInfo","WebGLBuffer","WebGLFramebuffer","WebGLProgram","WebGLRenderbuffer","WebGLShader","WebGLShaderPrecisionFormat","WebGLTexture","WebGLUniformLocation","WebGLVertexArrayObject","WebGLVertexArrayObjectOES"].filter(function(e){return"function"==typeof t[e]});return Boolean(r.find(function(r){return e instanceof t[r]}))};function An(e,t,r,n,o,i){var s,a,c=[],u=Object.getOwnPropertyNames(e),l=function(s){try{if("function"!=typeof e[s])return"continue";var a=Wr(e,s,function(a){return function(){for(var c=[],u=0;u<arguments.length;u++)c[u]=arguments[u];var l=a.apply(this,c);if(In(l,i,e),!Gr(this.canvas,n)){o.getId(this.canvas);var d=function(e,t,r){return ir([],or(e),!1).map(function(e){return Cn(e,t,r)})}(ir([],or(c),!1),i,e),f={type:t,property:s,args:d};r(this.canvas,f)}return l}});c.push(a)}catch(n){var u=Ur(e,s,{set:function(e){r(this.canvas,{type:t,property:s,args:[e],setter:!0})}});c.push(u)}};try{for(var d=nr(u),f=d.next();!f.done;f=d.next()){l(f.value)}}catch(e){s={error:e}}finally{try{f&&!f.done&&(a=d.return)&&a.call(d)}finally{if(s)throw s.error}}return c}var jn,Mn,Nn=function(e,t,r,n){var o=[];return o.push.apply(o,ir([],or(An(t.WebGLRenderingContext.prototype,jr.WebGL,e,r,n,t)),!1)),void 0!==t.WebGL2RenderingContext&&o.push.apply(o,ir([],or(An(t.WebGL2RenderingContext.prototype,jr.WebGL2,e,r,n,t)),!1)),function(){o.forEach(function(e){return e()})}},Ln=function(){function e(e){this.pendingCanvasMutations=new Map,this.rafStamps={latestId:0,invokeId:null},this.frozen=!1,this.locked=!1,this.processMutation=function(e,t){!(this.rafStamps.invokeId&&this.rafStamps.latestId!==this.rafStamps.invokeId)&&this.rafStamps.invokeId||(this.rafStamps.invokeId=this.rafStamps.latestId),this.pendingCanvasMutations.has(e)||this.pendingCanvasMutations.set(e,[]),this.pendingCanvasMutations.get(e).push(t)},this.mutationCb=e.mutationCb,this.mirror=e.mirror,!0===e.recordCanvas&&this.initCanvasMutationObserver(e.win,e.blockClass)}return e.prototype.reset=function(){this.pendingCanvasMutations.clear(),this.resetObservers&&this.resetObservers()},e.prototype.freeze=function(){this.frozen=!0},e.prototype.unfreeze=function(){this.frozen=!1},e.prototype.lock=function(){this.locked=!0},e.prototype.unlock=function(){this.locked=!1},e.prototype.initCanvasMutationObserver=function(e,t){this.startRAFTimestamping(),this.startPendingCanvasMutationFlusher();var r=En(e,t),n=On(this.processMutation.bind(this),e,t,this.mirror),o=Nn(this.processMutation.bind(this),e,t,this.mirror);this.resetObservers=function(){r(),n(),o()}},e.prototype.startPendingCanvasMutationFlusher=function(){var e=this;requestAnimationFrame(function(){return e.flushPendingCanvasMutations()})},e.prototype.startRAFTimestamping=function(){var e=this,t=function(r){e.rafStamps.latestId=r,requestAnimationFrame(t)};requestAnimationFrame(t)},e.prototype.flushPendingCanvasMutations=function(){var e=this;this.pendingCanvasMutations.forEach(function(t,r){var n=e.mirror.getId(r);e.flushPendingCanvasMutationFor(r,n)}),requestAnimationFrame(function(){return e.flushPendingCanvasMutations()})},e.prototype.flushPendingCanvasMutationFor=function(e,t){if(!this.frozen&&!this.locked){var r=this.pendingCanvasMutations.get(e);if(r&&-1!==t){var n=r.map(function(e){e.type;var t=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(n=Object.getOwnPropertySymbols(e);o<n.length;o++)t.indexOf(n[o])<0&&Object.prototype.propertyIsEnumerable.call(e,n[o])&&(r[n[o]]=e[n[o]])}return r}(e,["type"]);return t}),o=r[0].type;this.mutationCb({id:t,type:o,commands:n}),this.pendingCanvasMutations.delete(e)}}},e}();function _n(e){return rr(rr({},e),{timestamp:Date.now()})}var Dn={map:{},getId:function(e){return e&&e.__sn?e.__sn.id:-1},getNode:function(e){return this.map[e]||null},removeNodeFromMap:function(e){var t=this,r=e.__sn&&e.__sn.id;delete this.map[r],e.childNodes&&e.childNodes.forEach(function(e){return t.removeNodeFromMap(e)})},has:function(e){return this.map.hasOwnProperty(e)},reset:function(){this.map={}}};function Bn(e){void 0===e&&(e={});var t=e.emit,r=e.checkoutEveryNms,n=e.checkoutEveryNth,o=e.blockClass,i=void 0===o?"rr-block":o,s=e.blockSelector,a=void 0===s?null:s,c=e.ignoreClass,u=void 0===c?"rr-ignore":c,l=e.maskTextClass,d=void 0===l?"rr-mask":l,f=e.maskTextSelector,h=void 0===f?null:f,p=e.inlineStylesheet,v=void 0===p||p,y=e.maskAllInputs,g=e.maskInputOptions,m=e.slimDOMOptions,b=e.maskInputFn,w=e.maskTextFn,S=e.hooks,O=e.packFn,E=e.sampling,P=void 0===E?{}:E,x=e.mousemoveWait,T=e.recordCanvas,k=void 0!==T&&T,I=e.userTriggeredOnInput,C=void 0!==I&&I,R=e.collectFonts,A=void 0!==R&&R,j=e.inlineImages,M=void 0!==j&&j,N=e.plugins,L=e.keepIframeSrcFn,_=void 0===L?function(){return!1}:L;if(!t)throw new Error("emit function is required");void 0!==x&&void 0===P.mousemove&&(P.mousemove=x);var D,B,F=!0===y?{color:!0,date:!0,"datetime-local":!0,email:!0,month:!0,number:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0,textarea:!0,select:!0,password:!0}:void 0!==g?g:{password:!0},U=!0===m||"all"===m?{script:!0,comment:!0,headFavicon:!0,headWhitespace:!0,headMetaSocial:!0,headMetaRobots:!0,headMetaHttpEquiv:!0,headMetaVerification:!0,headMetaAuthorship:"all"===m,headMetaDescKeywords:"all"===m}:m||{};void 0===D&&(D=window),"NodeList"in D&&!D.NodeList.prototype.forEach&&(D.NodeList.prototype.forEach=Array.prototype.forEach),"DOMTokenList"in D&&!D.DOMTokenList.prototype.forEach&&(D.DOMTokenList.prototype.forEach=Array.prototype.forEach),Node.prototype.contains||(Node.prototype.contains=function(e){if(!(0 in arguments))throw new TypeError("1 argument is required");do{if(this===e)return!0}while(e=e&&e.parentNode);return!1});var W=0;jn=function(e,o){var i;if(!(null===(i=sn[0])||void 0===i?void 0:i.isFrozen())||e.type===Cr.FullSnapshot||e.type===Cr.IncrementalSnapshot&&e.data.source===Rr.Mutation||sn.forEach(function(e){return e.unfreeze()}),t(function(e){var t,r;try{for(var n=nr(N||[]),o=n.next();!o.done;o=n.next()){var i=o.value;i.eventProcessor&&(e=i.eventProcessor(e))}}catch(e){t={error:e}}finally{try{o&&!o.done&&(r=n.return)&&r.call(n)}finally{if(t)throw t.error}}return O&&(e=O(e)),e}(e),o),e.type===Cr.FullSnapshot)B=e,W=0;else if(e.type===Cr.IncrementalSnapshot){if(e.data.source===Rr.Mutation&&e.data.isAttachIframe)return;W++;var s=n&&W>=n,a=r&&e.timestamp-B.timestamp>r;(s||a)&&Mn(!0)}};var z=function(e){jn(_n({type:Cr.IncrementalSnapshot,data:rr({source:Rr.Mutation},e)}))},V=function(e){return jn(_n({type:Cr.IncrementalSnapshot,data:rr({source:Rr.Scroll},e)}))},G=function(e){return jn(_n({type:Cr.IncrementalSnapshot,data:rr({source:Rr.CanvasMutation},e)}))},q=new wn({mutationCb:z}),H=new Ln({recordCanvas:k,mutationCb:G,win:window,blockClass:i,mirror:Dn}),$=new Sn({mutationCb:z,scrollCb:V,bypassOptions:{blockClass:i,blockSelector:a,maskTextClass:d,maskTextSelector:h,inlineStylesheet:v,maskInputOptions:F,maskTextFn:w,maskInputFn:b,recordCanvas:k,inlineImages:M,sampling:P,slimDOMOptions:U,iframeManager:q,canvasManager:H},mirror:Dn});Mn=function(e){var t,r,n,o;void 0===e&&(e=!1),jn(_n({type:Cr.Meta,data:{href:window.location.href,width:Vr(),height:zr()}}),e),sn.forEach(function(e){return e.lock()});var s=or(function(e,t){var r=t||{},n=r.blockClass,o=void 0===n?"rr-block":n,i=r.blockSelector,s=void 0===i?null:i,a=r.maskTextClass,c=void 0===a?"rr-mask":a,u=r.maskTextSelector,l=void 0===u?null:u,d=r.inlineStylesheet,f=void 0===d||d,h=r.inlineImages,p=void 0!==h&&h,v=r.recordCanvas,y=void 0!==v&&v,g=r.maskAllInputs,m=void 0!==g&&g,b=r.maskTextFn,w=r.maskInputFn,S=r.slimDOM,O=void 0!==S&&S,E=r.dataURLOptions,P=r.preserveWhiteSpace,x=r.onSerialize,T=r.onIframeLoad,k=r.iframeLoadTimeout,I=r.keepIframeSrcFn,C={};return[Ir(e,{doc:e,map:C,blockClass:o,blockSelector:s,maskTextClass:c,maskTextSelector:l,skipChild:!1,inlineStylesheet:f,maskInputOptions:!0===m?{color:!0,date:!0,"datetime-local":!0,email:!0,month:!0,number:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0,textarea:!0,select:!0,password:!0}:!1===m?{password:!0}:m,maskTextFn:b,maskInputFn:w,slimDOMOptions:!0===O||"all"===O?{script:!0,comment:!0,headFavicon:!0,headWhitespace:!0,headMetaDescKeywords:"all"===O,headMetaSocial:!0,headMetaRobots:!0,headMetaHttpEquiv:!0,headMetaAuthorship:!0,headMetaVerification:!0}:!1===O?{}:O,dataURLOptions:E,inlineImages:p,recordCanvas:y,preserveWhiteSpace:P,onSerialize:x,onIframeLoad:T,iframeLoadTimeout:k,keepIframeSrcFn:void 0===I?function(){return!1}:I}),C]}(document,{blockClass:i,blockSelector:a,maskTextClass:d,maskTextSelector:h,inlineStylesheet:v,maskAllInputs:F,maskTextFn:w,slimDOM:U,recordCanvas:k,inlineImages:M,onSerialize:function(e){Kr(e)&&q.addIframe(e),Jr(e)&&$.addShadowRoot(e.shadowRoot,document)},onIframeLoad:function(e,t){q.attachIframe(e,t),$.observeAttachShadow(e)},keepIframeSrcFn:_}),2),c=s[0],u=s[1];if(!c)return console.warn("Failed to snapshot the document");Dn.map=u,jn(_n({type:Cr.FullSnapshot,data:{node:c,initialOffset:{left:void 0!==window.pageXOffset?window.pageXOffset:(null===document||void 0===document?void 0:document.documentElement.scrollLeft)||(null===(r=null===(t=null===document||void 0===document?void 0:document.body)||void 0===t?void 0:t.parentElement)||void 0===r?void 0:r.scrollLeft)||(null===document||void 0===document?void 0:document.body.scrollLeft)||0,top:void 0!==window.pageYOffset?window.pageYOffset:(null===document||void 0===document?void 0:document.documentElement.scrollTop)||(null===(o=null===(n=null===document||void 0===document?void 0:document.body)||void 0===n?void 0:n.parentElement)||void 0===o?void 0:o.scrollTop)||(null===document||void 0===document?void 0:document.body.scrollTop)||0}}})),sn.forEach(function(e){return e.unlock()})};try{var K=[];K.push(_r("DOMContentLoaded",function(){jn(_n({type:Cr.DomContentLoaded,data:{}}))}));var J=function(e){var t;return bn({mutationCb:z,mousemoveCb:function(e,t){return jn(_n({type:Cr.IncrementalSnapshot,data:{source:t,positions:e}}))},mouseInteractionCb:function(e){return jn(_n({type:Cr.IncrementalSnapshot,data:rr({source:Rr.MouseInteraction},e)}))},scrollCb:V,viewportResizeCb:function(e){return jn(_n({type:Cr.IncrementalSnapshot,data:rr({source:Rr.ViewportResize},e)}))},inputCb:function(e){return jn(_n({type:Cr.IncrementalSnapshot,data:rr({source:Rr.Input},e)}))},mediaInteractionCb:function(e){return jn(_n({type:Cr.IncrementalSnapshot,data:rr({source:Rr.MediaInteraction},e)}))},styleSheetRuleCb:function(e){return jn(_n({type:Cr.IncrementalSnapshot,data:rr({source:Rr.StyleSheetRule},e)}))},styleDeclarationCb:function(e){return jn(_n({type:Cr.IncrementalSnapshot,data:rr({source:Rr.StyleDeclaration},e)}))},canvasMutationCb:G,fontCb:function(e){return jn(_n({type:Cr.IncrementalSnapshot,data:rr({source:Rr.Font},e)}))},blockClass:i,ignoreClass:u,maskTextClass:d,maskTextSelector:h,maskInputOptions:F,inlineStylesheet:v,sampling:P,recordCanvas:k,inlineImages:M,userTriggeredOnInput:C,collectFonts:A,doc:e,maskInputFn:b,maskTextFn:w,blockSelector:a,slimDOMOptions:U,mirror:Dn,iframeManager:q,shadowDomManager:$,canvasManager:H,plugins:(null===(t=null==N?void 0:N.filter(function(e){return e.observer}))||void 0===t?void 0:t.map(function(e){return{observer:e.observer,options:e.options,callback:function(t){return jn(_n({type:Cr.Plugin,data:{plugin:e.name,payload:t}}))}}}))||[]},S)};q.addLoadListener(function(e){K.push(J(e.contentDocument))});var Q=function(){Mn(),K.push(J(document))};return"interactive"===document.readyState||"complete"===document.readyState?Q():K.push(_r("load",function(){jn(_n({type:Cr.Load,data:{}})),Q()},window)),function(){K.forEach(function(e){return e()})}}catch(e){console.warn(e)}}Bn.addCustomEvent=function(e,t){if(!jn)throw new Error("please add custom event after start recording");jn(_n({type:Cr.Custom,data:{tag:e,payload:t}}))},Bn.freezePage=function(){sn.forEach(function(e){return e.freeze()})},Bn.takeFullSnapshot=function(e){if(!Mn)throw new Error("please take full snapshot after start recording");Mn(e)},Bn.mirror=Dn;var Fn=Bn;class Un{constructor(e){se(this,"onEmit",void 0),this.onEmit=e.onEmit}}class Wn extends Un{pause(){}resume(){Fn.takeFullSnapshot()}stop(){this.stopRecording&&this.stopRecording()}constructor(e){super(e),se(this,"config",void 0),se(this,"stopRecording",void 0),se(this,"start",void 0),se(this,"startRecording",void 0),this.config=e,this.start=()=>{"complete"===document.readyState||"interactive"===document.readyState?this.startRecording():(window.addEventListener("load",this.startRecording,{once:!0}),this.stopRecording=()=>window.removeEventListener("load",this.startRecording))},this.startRecording=()=>{this.stopRecording=Fn({maskAllInputs:!0,maskTextSelector:"*",...this.config,emit:e=>{const t={type:"rrweb",startTime:e.timestamp,data:e,onSessionChanged:()=>{Fn.takeFullSnapshot()}};this.onEmit(t)}})}}}class zn extends Un{static clear(){ht&&(yt.debug("SplunkRecorder: Clearing assets"),ht.clear())}pause(){this.stop()}resume(){this.start()}start(){"visible"===document.visibilityState&&this.sessionReplay.start(),this.isVisibilityListenerAttached||document.addEventListener("visibilitychange",this.visibilityChangeHandler),this.isStoppedManually=!1}stop(){this.sessionReplay.stop(),document.removeEventListener("visibilitychange",this.visibilityChangeHandler),this.isVisibilityListenerAttached=!1,this.isStoppedManually=!0}constructor(e){var t,r,n,o,i,s,a,c,u,l,d,f,h,p,v,y;super(e),se(this,"config",void 0),se(this,"isStoppedManually",void 0),se(this,"isVisibilityListenerAttached",void 0),se(this,"sessionReplay",void 0),se(this,"onSegment",void 0),se(this,"onSessionChanged",void 0),se(this,"startOnVisibilityChange",void 0),se(this,"stopOnVisibilityChange",void 0),se(this,"visibilityChangeHandler",void 0),this.config=e,this.isStoppedManually=!0,this.isVisibilityListenerAttached=!1,this.onSegment=e=>{yt.debug("Session replay segment: ",e);const t=e.toPlain(),r={data:t,onSessionChanged:this.onSessionChanged,startTime:t.metadata.startUnixMs,type:"splunk"};this.onEmit(r)},this.onSessionChanged=()=>{yt.debug("SplunkRecorder: onSessionChanged"),this.stop(),zn.clear(),this.start()},this.startOnVisibilityChange=()=>{this.start()},this.stopOnVisibilityChange=()=>{this.sessionReplay.stop()},this.visibilityChangeHandler=()=>{"visible"===document.visibilityState?this.sessionReplay.isStarted||this.isStoppedManually||this.startOnVisibilityChange():this.sessionReplay.isStarted&&this.stopOnVisibilityChange()},this.sessionReplay=new ht({features:{backgroundServiceSrc:null===(t=this.config.features)||void 0===t?void 0:t.backgroundServiceSrc,cacheAssets:null!==(a=null===(r=this.config.features)||void 0===r?void 0:r.cacheAssets)&&void 0!==a&&a,canvas:null!==(c=null===(n=this.config.features)||void 0===n?void 0:n.canvas)&&void 0!==c&&c,iframes:null!==(u=null===(o=this.config.features)||void 0===o?void 0:o.iframes)&&void 0!==u&&u,packAssets:null!==(l=null===(i=this.config.features)||void 0===i?void 0:i.packAssets)&&void 0!==l?l:{styles:!0},video:null!==(d=null===(s=this.config.features)||void 0===s?void 0:s.video)&&void 0!==d&&d},logLevel:null!==(f=this.config.logLevel)&&void 0!==f?f:"error",maskAllInputs:null===(h=this.config.maskAllInputs)||void 0===h||h,maskAllText:null===(p=this.config.maskAllText)||void 0===p||p,maxExportIntervalMs:null!==(v=this.config.maxExportIntervalMs)&&void 0!==v?v:5e3,onSegment:this.onSegment,originalFetch:this.config.originalFetch,sensitivityRules:null!==(y=this.config.sensitivityRules)&&void 0!==y?y:[]})}}const Vn=e=>"string"==typeof e;function Gn(e){return"object"==typeof e&&!Array.isArray(e)&&null!==e}const qn=e=>{let{recordCanvas:t,inlineStylesheet:r,inlineImages:n,collectFonts:o}=e;const i={},s={};return!0===t&&(i.canvas=!0),!0===r&&(s.styles=!0),!0===n&&(s.images=!0),!0===o&&(s.fonts=!0),Object.keys(s).length>0&&(i.packAssets=s),Object.keys(i).length>0?i:void 0},Hn=e=>{let{maskTextClass:t="rr-mask",maskTextSelector:r,blockClass:n="rr-block",blockSelector:o,ignoreClass:i="rr-ignore",maskInputFn:s,maskTextFn:a,maskInputOptions:c}=e;s&&Jn('Config option "maskInputFn" cannot be migrated automatically.'),a&&Jn('Config option "maskTextFn" cannot be migrated automatically.'),c&&Jn('Config option "maskInputOptions" cannot be migrated automatically.');const u=[];return u.push(...$n(t,"mask")),u.push(...Kn(r,"mask")),u.push(...$n(n,"exclude")),u.push(...Kn(o,"exclude")),u.push(...$n(i,"mask")),u.length>0?u:void 0},$n=(e,t)=>{const r=[];return Vn(e)?r.push({rule:t,selector:".".concat(e)}):Jn("Privacy class is a regex: ".concat(e,". Cannot be converted to a CSS selector.")),r},Kn=(e,t)=>Vn(e)&&e.length>0?[{rule:t,selector:e}]:[],Jn=e=>{throw new Error("Config migration failed: ".concat(e))},Qn=e=>{const t=(e=>({features:qn(e),maskAllInputs:e.maskAllInputs,sensitivityRules:Hn(e)}))(e);return((e,t)=>{const r={...t,...e};if(e.features||t.features){var n;const i={...t.features,...e.features};if((null===(n=e.features)||void 0===n?void 0:n.packAssets)&&Gn(e.features.packAssets)){var o;const r={...(null===(o=t.features)||void 0===o?void 0:o.packAssets)&&Gn(t.features.packAssets)?t.features.packAssets:{},...e.features.packAssets};Object.keys(r).length>0&&(i.packAssets=r)}Object.keys(i).length>0&&(r.features=i)}if(e.sensitivityRules||t.sensitivityRules){var i,s;const n=[...null!==(i=e.sensitivityRules)&&void 0!==i?i:[],...null!==(s=t.sensitivityRules)&&void 0!==s?s:[]];n.length>0&&(r.sensitivityRules=n)}return r})(e,t)},Yn=972800,Xn=new TextEncoder,Zn=new TextDecoder;let eo,to,ro,no,oo=!1,io=0,so=!1,ao=1,co=1;const uo={get inited(){return Boolean(oo)},init(e){if(oo)return;if("object"!=typeof window)throw Error("SplunkSessionRecorder Error: This library is intended to run in a browser environment. Please ensure the code is evaluated within a browser context.");yt.setLoggingLevel(e.debug?"debug":"warn");let t=re.getTracerProvider();t&&"getDelegate"in t&&(t=t.getDelegate());const r=null===(n=globalThis[Xt])||void 0===n?void 0:n[Zt];var n;if(!r)return void yt.error("SplunkRum must be initialized before session recorder.");if(r.disabledByBotDetection)return void yt.error("SplunkSessionRecorder will not be initialized, bots are not allowed.");if(r.disabledByAutomationFrameworkDetection)return void yt.error("SplunkSessionRecorder will not be initialized, automation frameworks are not allowed.");const o=function(){var e;return null===(e=globalThis[Xt])||void 0===e?void 0:e[er]}();if(!o||o!==ct)return void yt.error("SplunkSessionRecorder will not be initialized. Version mismatch with SplunkRum (SplunkRum: ".concat(null!=o?o:"N/A",", SplunkSessionRecorder: ").concat(ct,")"));if(!r.resource)return void yt.error("Splunk OTEL Web must be initialized before session recorder.");const i=r.resource,{beaconEndpoint:s,realm:a,rumAccessToken:c,recorder:u="rrweb",...l}=e,d="splunk"===u;if("rrweb"===u&&"anonymousTracking"===r.userTrackingMode)return void yt.error("SplunkSessionRecorder: Using rrweb recorder with anonymous tracking mode is not supported. Please use splunk recorder instead. Session recording will not be initialized.");if(r._internalCheckSessionRecorderType(u),r.provider){const e=d?"splunk":"rrweb";r.provider.resource.attributes["splunk.sessionReplay"]=e,yt.debug("SplunkSessionRecorder: splunk.sessionReplay resource attribute set to '".concat(e,"'."))}eo=re.getTracer("splunk.rr-web",ct);const f=eo.startSpan("record init");if(!f.isRecording())return;f.end();let h=s;if(a&&(h?yt.warn("SplunkSessionRecorder: Realm value ignored (beaconEndpoint has been specified)"):h="https://rum-ingest.".concat(a,".signalfx.com/v1/rumreplay")),!h)return void yt.error("SplunkSessionRecorder could not determine `exportUrl`, please ensure that `realm` or `beaconEndpoint` is specified and try again");var p;c&&(h+="?auth=".concat(c));const v=new Ft({beaconUrl:h,getResourceAttributes(){var e;const t={...i.attributes,"splunk.rumSessionId":null!==(e=r.getSessionId())&&void 0!==e?e:""},n=r.getAnonymousId();return n&&(t["user.anonymous_id"]=n),t},sessionId:null!==(p=r.getSessionId())&&void 0!==p?p:"",usePersistentExportQueue:d}),y=new Qt(v);ro=r.userTrackingMode,to=r.getSessionId(),d&&r.isNewSessionId()&&(yt.debug("SplunkRum.isNewSessionId()"),zn.clear()),io=Date.now();const g=e=>{if(so)return;ro!==r.userTrackingMode&&(ro=r.userTrackingMode,"rrweb"===u&&"anonymousTracking"===ro&&yt.warn("SplunkSessionRecorder: Using rrweb recorder with anonymous tracking mode is not supported. Please use splunk recorder instead."));let t=!1;if(r.getSessionId()!==to){if(document.hidden)return;r._internalOnExternalSpanCreated&&(r._internalOnExternalSpanCreated(),t=!0),to=r.getSessionId(),io=Date.now(),ao=1,co=1,e.onSessionChanged()}if(e.startTime>io+1446e4)return;t||r._internalOnExternalSpanCreated&&r._internalOnExternalSpanCreated();const n="splunk"===e.type?Math.floor(e.startTime):e.startTime,o=ao;ao+=1;const i=Xn.encode(JSON.stringify("splunk"===e.type?e.data.data:e.data)),s=Math.ceil(i.byteLength/Yn);for(let t=0;t<s;t++){const r=t*Yn,a=(t+1)*Yn,c={"rr-web.offset":co,"rr-web.event":o,"rr-web.chunk":t+1,"rr-web.total-chunks":s};"splunk"===e.type&&(c.segmentMetadata=JSON.stringify(e.data.metadata));const l=Yt(Zn.decode(i.slice(r,a)),n,c);co+=1,yt.debug("Emitting log",l),y.onEmit(l),"splunk"===u&&y.forceFlush()}};try{no=d?new zn({originalFetch:function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return new Promise((e,r)=>{ne.with(ie(ne.active()),()=>{window.fetch(...t).then(e).catch(r)})})},...Qn(l),onEmit:g}):new Wn({...l,onEmit:g}),no.start(),oo=!0}catch(e){yt.error("SplunkSessionRecorder: Failed to initialize recorder",e)}},resume(){if(!oo)return;const e=so;so=!1,e||(null==no||no.resume(),eo.startSpan("record resume").end())},stop(){oo&&(so&&(null==no||no.stop(),eo.startSpan("record stop").end()),so=!0)},deinit(){oo&&(null==no||no.stop(),oo=!1)}};var lo=uo;window.SplunkSessionRecorder=n.default}();
//# sourceMappingURL=splunk-otel-web-session-recorder.js.map